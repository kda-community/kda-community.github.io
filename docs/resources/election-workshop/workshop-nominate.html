<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-resources/election-workshop/workshop-nominate" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Nominate candidates | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/resources/election-workshop/workshop-nominate"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nominate candidates | Kadena Docs"><meta data-rh="true" name="description" content="Work with database schemas and tables in your Pact module to manage candidates for the election application smart contract backend."><meta data-rh="true" property="og:description" content="Work with database schemas and tables in your Pact module to manage candidates for the election application smart contract backend."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/resources/election-workshop/workshop-nominate"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/resources/election-workshop/workshop-nominate" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/resources/election-workshop/workshop-nominate" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nominate candidates</h1></header>
<p>In <a href="/docs/resources/election-workshop/workshop-write">Write a smart contract</a>, you learned about defining Pact modules and created a skeleton <code>election</code> module for the smart contract that will become the backend of the election application.
In this tutorial, you&#x27;ll update the <code>election</code> module with a database table and functions to support the following operations:</p>
<ul>
<li>Store a list of candidates and the number of votes each candidate receives.</li>
<li>Store a list of the accounts that have voted to ensure that every account can
vote only once.</li>
<li>Add nominated candidates to the candidate table.</li>
<li>List all of the candidates that are stored in the table.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin">Before you begin<a href="#before-you-begin" class="hash-link" aria-label="Direct link to Before you begin" title="Direct link to Before you begin">​</a></h2>
<p>Before you start this tutorial, verify the following basic requirements:</p>
<ul>
<li>You have an internet connection and a web browser installed on your local computer.</li>
<li>You have a code editor, such as <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">Visual Studio Code</a>, access to an interactive terminal shell, and are generally familiar with using command-line programs.</li>
<li>You have cloned the <a href="https://github.com/kadena-community/voting-dapp.git" target="_blank" rel="noopener noreferrer">voting-dapp</a> repository to create your project directory as described in <a href="/docs/resources/election-workshop/workshop-prepare">Prepare your workspace</a>.</li>
<li>You have the development network running in a Docker container as described in <a href="/docs/resources/election-workshop/workshop-start">Start a local blockchain</a>.</li>
<li>You are <a href="/docs/resources/election-workshop/workshop-start#connect-to-the-development-network">connected to the development network</a> using your local host IP address and port number 8080.</li>
<li>You have created and funded an administrative account as described in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a>.</li>
<li>You have created a principal namespace on the development network as described in <a href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a>.</li>
<li>You have defined the keyset that controls your namespace using the administrative account as described in <a href="/docs/resources/election-workshop/workshop-keysets">Define keysets</a>.</li>
<li>You have created a minimal election module using the Pact smart contract language as described in <a href="/docs/resources/election-workshop/workshop-write">Write a smart contract</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-database-schema-and-table">Define the database schema and table<a href="#define-the-database-schema-and-table" class="hash-link" aria-label="Direct link to Define the database schema and table" title="Direct link to Define the database schema and table">​</a></h2>
<p>To prepare the <code>election</code> module database, you must first define a <strong>schema</strong> for the table.
You can then define a table that uses the schema inside the <code>election</code> module.
The actual creation of the table happens outside the Pact module declaration, as you saw with defining and entering a namespace.</p>
<p>To define the database schema and table:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/election.pact</code> file in the code editor on your computer.</p>
</li>
<li>
<p>Add the schema for the database table inside of the <code>election</code> module declaration with the following lines of code:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema candidates-schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Candidates table schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    votes:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable candidates:{candidates-schema})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this code, <code>defschema</code> defines a <code>candidate-schema</code> for a database table named <code>candidates</code> with two columns:</p>
<ul>
<li><code>name</code> of type string</li>
<li><code>votes</code> of type integer</li>
</ul>
</li>
<li>
<p>Create the table outside of the election module by adding the following lines of code at the end of the <code>./pact/election.pact</code> file, after the closing parenthesis (<code>)</code>) of the <code>election</code> module declaration:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(if (read-msg &quot;init-candidates&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [(create-table candidates)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this code, the <code>read-msg</code> function reads the <code>init-candidates</code> field from the transaction data.
If you set this field to <code>true</code> in the data for your module deployment transaction, the statement between the first square brackets—<code>(create-table candidates)</code>—is executed to create the <code>candidates</code> table based on its schema definition inside the <code>election</code> module.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-table-creation">Test table creation<a href="#test-table-creation" class="hash-link" aria-label="Direct link to Test table creation" title="Direct link to Test table creation">​</a></h2>
<p>Before trying to create the table on your local development network, you can verify that your changes work as expected by running some tests in the Pact REPL.</p>
<p>To test table creation:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact</code> folder in the code editor.</p>
</li>
<li>
<p>Create a new file named <code>election.repl</code> in the <code>pact</code> folder.</p>
</li>
<li>
<p>Set the <code>env-data</code> and <code>env-sigs</code> fields for the REPL test environment to use the public key for your administrative account.</p>
<p>For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;election-admin&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;keys&quot; : [ &quot;d0aa32802596b8e31f7e35d1f4995524f11ed9c7683450b561e01fb3a36c18ae&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      , &quot;pred&quot; : &quot;keys-all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  , &quot;init-candidates&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [{ &quot;key&quot;  : &quot;d0aa32802596b8e31f7e35d1f4995524f11ed9c7683450b561e01fb3a36c18ae&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Also, notice that <code>init-candidates: true</code> is included in the environment data to ensure that the <code>(create-table candidates)</code> command is executed when you load the <code>election</code> module into the Pact REPL.</p>
</li>
<li>
<p>Define your principal namespace and the <code>admin-keyset</code> for the namespace using the principal namespace you used in your <code>election.pact</code> file.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define the principal namespace&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-namespace &quot;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&quot; (read-keyset &quot;election-admin&quot; ) (read-keyset &quot;election-admin&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define the election-admin keyset in the namespace&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (namespace &quot;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-keyset &quot;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election-admin&quot; (read-keyset &quot;election-admin&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These transactions are required because, inside of the <code>election.pact</code> file, the <code>election</code> module is defined in your principal namespace and it is governed by the <code>election-admin</code> in that namespace.</p>
</li>
<li>
<p>Add a transaction to load the election module:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Load election module&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (load &quot;election.pact&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that the transaction succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:0:0-7:1:Trace: &quot;Setting transaction data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:9:0-13:1:Trace: &quot;Setting transaction signatures/caps&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:15:0-15:43:Trace: &quot;Begin Tx 0 Define the principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:16:2-16:129:Trace: &quot;Namespace defined: n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:17:0-17:11:Trace: &quot;Commit Tx 0 Define the principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:19:0-19:62:Trace: &quot;Begin Tx 1 Define the election-admin keyset in the namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:20:2-20:58:Trace: &quot;Namespace set to n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:21:2-21:109:Trace: &quot;Keyset write success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:22:0-22:11:Trace: &quot;Commit Tx 1 Define the election-admin keyset in the namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:24:0-24:33:Trace: &quot;Begin Tx 2 Load election module&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:25:2-25:24:Trace: &quot;Loading election.pact...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.pact:0:0-0:56:Trace: &quot;Namespace set to n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.pact:3:0-16:1:Trace: Loaded module n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election, hash _zJBtnrLTTYsbTcnDk_qt13sJPfnlTTBJ13jz11x_Sc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.pact:19:0-22:1:Trace: [&quot;TableCreated&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:26:0-26:11:Trace: &quot;Commit Tx 2 Load election module&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-list-candidates-function">Update the list-candidates function<a href="#update-the-list-candidates-function" class="hash-link" aria-label="Direct link to Update the list-candidates function" title="Direct link to Update the list-candidates function">​</a></h2>
<p>The current implementation of the <code>list-candidates</code> function returns a simple list.
Although it appears that the <code>candidates</code> table has been created successfully, the table doesn&#x27;t have any data to return.
Before you can test that the <code>candidates</code> table works as expected, you must modify the code for the <code>list-candidates</code> function.</p>
<p>To update the list-candidates function to read data from a table:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/election.pact</code> file in your code editor.</p>
</li>
<li>
<p>Update the return value of the <code>list-candidates</code> function to select all of the rows of the <code>candidates</code> table, including the key and the column values of each row.</p>
<p>For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun list-candidates ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (fold-db candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (lambda (key columnData) true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (lambda (key columnData) (+ { &quot;key&quot;: key } columnData))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>fold-db</code> function fetches the value of the <code>key</code> column separately from the other column values.</p>
<ul>
<li>The first argument for <code>fold-db</code> is the table name.</li>
<li>The second argument is a predicate function that determines which rows should be selected.
To fetch all rows from a table, you can simply return <code>true</code> here.</li>
<li>The third argument is an accumulator function that allows you to map the data of each row to a different format.</li>
</ul>
<p>This code example formats the return value of the <code>fold-db</code> function as a JSON object with the following structure.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;key&quot;: &quot;1&quot;, &quot;name&quot;: &quot;Candidate A&quot;, &quot;votes&quot;: 0 },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;key&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Candidate B&quot;, &quot;votes&quot;: 0 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Open the <code>election-workshop/pact/election.repl</code> file in the code editor.</p>
</li>
<li>
<p>Add a transaction to test the new implementation of the <code>election.list-candidates</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;List candidates&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;There are no candidates in the candidates table&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (list-candidates)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because there are no candidates in the table, you should see the transaction succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:28:0-28:28:Trace: &quot;Begin Tx 3 List candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:29:2-29:59:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:30:2-34:3:Trace: &quot;Expect: success There are no candidates in the candidates table&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:35:0-35:11:Trace: &quot;Commit Tx 3 List candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that you shouldn&#x27;t include a call to a function like <code>fold-db</code> in transactions sent to the blockchain.
Instead, you can make a local request to select all rows from a table to save gas.
You&#x27;ll learn more about making local requests later in this tutorial.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-candidates">Add candidates<a href="#add-candidates" class="hash-link" aria-label="Direct link to Add candidates" title="Direct link to Add candidates">​</a></h2>
<p>At this point, you have a database table for storing candidate names and the votes they&#x27;ve received, but without any candidates for anyone to vote on.</p>
<p>To add candidates to the database:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/election.pact</code> file in your code editor.</p>
</li>
<li>
<p>Define a new <code>add-candidate</code> function inside the <code>election</code> module declaration.
You&#x27;ll use this function to insert candidate information from a JSON object into each row in the <code>candidates</code> table.
The function uses the <code>insert</code> built-in function to add each candidate to the table.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun add-candidate (candidate:object)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (insert candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (at &quot;key&quot; candidate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: (at &quot;name&quot; candidate),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;votes&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this code, you pass the following arguments to the <code>insert</code> function:</p>
<ul>
<li>The name of table you want to update.
In this case, the table is the <code>candidates</code> table.</li>
<li>The value for the key of the row to be inserted.
In this case, the value of the <code>key</code> field is extracted from the <code>candidate</code> object.</li>
<li>The key-value object representing the row to be inserted into the table.
The object consists of a <code>name</code> key and a <code>votes</code> key that correspond to the columns in the schema for the <code>candidates</code> table.
In this case, the <code>votes</code> column of the new value always gets a value <code>0</code> and the <code>name</code> column gets the name you specify in the JSON object.</li>
</ul>
<p>Now that you&#x27;ve added the <code>add-candidate</code> function to the <code>election</code> module, you can test it by adding tests to the <code>election.repl</code> file.</p>
</li>
<li>
<p>Open the <code>election-workshop/pact/election.repl</code> file in your code editor.</p>
</li>
<li>
<p>Add a transaction to test that candidates can be added to the database using the <code>election.add-candidate</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Add candidates&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_14912521e87a6d387157d526b281bde8422371d1.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Add Candidate A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Write succeeded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (add-candidate { &quot;key&quot;: &quot;1&quot;, &quot;name&quot;: &quot;Candidate A&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Add Candidate B&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Write succeeded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (add-candidate { &quot;key&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Candidate B&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Add Candidate C&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Write succeeded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (add-candidate { &quot;key&quot;: &quot;3&quot;, &quot;name&quot;: &quot;Candidate C&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that each candidate object has the fields <code>key</code> and <code>name</code>, while the <code>candidate-schema</code> you defined for the <code>candidates</code> table has columns for <code>name</code> and <code>votes</code>.
Because the <code>add-candidate</code> function sets the <code>votes</code> column to have an initial value of <code>0</code> when a new candidate is added, you don&#x27;t need to send a value for votes in the transaction.</p>
<p>The <code>key</code> value is a unique index for the table row that is added.
This value can&#x27;t be automatically generated, so you have to pass a value yourself.</p>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that the transaction succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:37:0-37:27:Trace: &quot;Begin Tx 4 Add candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:38:5-38:62:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:39:5-43:6:Trace: &quot;Expect: success Add Candidate A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:44:5-48:6:Trace: &quot;Expect: success Add Candidate B&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:49:5-53:6:Trace: &quot;Expect: success Add Candidate C&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:54:0-54:11:Trace: &quot;Commit Tx 4 Add candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can add a transaction to call the <code>list-candidates</code> function after adding candidates to the database in the <code>election.repl</code> file like this:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;List candidates&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (list-candidates)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now that there&#x27;s data in the table, the <code>list-candidates</code> function returns the rows from the table:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:57:2-57:59:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:58:4-58:21:Trace: [{&quot;key&quot;: &quot;1&quot;,&quot;name&quot;: &quot;Candidate A&quot;,&quot;votes&quot;: 0} {&quot;key&quot;: &quot;2&quot;,&quot;name&quot;: &quot;Candidate B&quot;,&quot;votes&quot;: 0} {&quot;key&quot;: &quot;3&quot;,&quot;name&quot;: &quot;Candidate C&quot;,&quot;votes&quot;: 0}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:59:0-59:11:Trace: &quot;Commit Tx 5 List candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because the key for each row in a table must be unique, you should test that you can&#x27;t insert a row with a duplicate
key.</p>
</li>
<li>
<p>Add a transaction to the <code>election.repl</code> file to test that you can&#x27;t insert a row with a duplicate key:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Add candidate with existing key fails&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect-failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Database exception: Insert: row found for key 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (add-candidate { &quot;key&quot;: &quot;1&quot;, &quot;name&quot;: &quot;Candidate D&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you were to execute this transaction, it would fail—as expected—with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:61:0-61:50:Trace: &quot;Begin Tx 6 Add candidate with existing key fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:62:0-62:57:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:63:0-66:1:Trace: &quot;Expect failure: Success: Database exception: Insert: row found for key 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:67:0-67:11:Trace: &quot;Commit Tx 6 Add candidate with existing key fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Verify that you only have three candidates in the table by adding the following assertion to the <code>election-workshop/pact/election.repl</code> file:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;List candidates&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;There should be three candidates&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (length (list-candidates))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that the transaction succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:64:0:Trace: Begin Tx 6: List candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:65:2:Trace: Using n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:66:2:Trace: Expect: success: There should be three candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:71:0:Trace: Commit Tx 6: List candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ve now seen how candidates can be stored in a database table and that the <code>list-candidates</code> function works as expected to retrieve information from that table.
The next step is to restrict access to the <code>add-candidate</code> function, so that ony the <code>election</code> module owner can update the <code>candidates</code> database.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="guard-add-candidate-with-a-capability">Guard add-candidate with a capability<a href="#guard-add-candidate-with-a-capability" class="hash-link" aria-label="Direct link to Guard add-candidate with a capability" title="Direct link to Guard add-candidate with a capability">​</a></h2>
<p>At this point, the <code>add-candidate</code> function is a public function that anyone can use to nominate candidates.
To prevent that kind of election chaos, you need a gatekeeper—a guard—that restricts access to the nominating process and the number of candidates or proposals to be voted on.</p>
<p>For the election application, this gatekeeper or <strong>guard</strong> is the holder of the <code>election-admin</code> administrative account.
To restrict access to the <code>add-candidate</code> function, you can define a new <code>ELECTION-ADMIN</code> capability.
With this capability, you can enforce that the <code>election-admin</code> must sign transactions that call specific functions. For the <code>election</code> module, you&#x27;ll use the <code>ELECTION-ADMIN</code> capability to protect access to the <code>add-candidate</code> function.</p>
<p>To guard access to the <code>add-candidate</code> function:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/election.pact</code> file in your code editor.</p>
</li>
<li>
<p>Define a new ELECTION-ADMIN capability that enforces the use of the <code>election-admin</code> administrative account.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defcap ELECTION-ADMIN () </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (enforce-guard (keyset-ref-guard &quot;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election-admin&quot;)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the <code>add-candidate</code> function to check whether the <code>ELECTION-ADMIN</code> capability is granted:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun add-candidate (candidate:object)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (with-capability (ELECTION-ADMIN)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (insert candidates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (at &quot;key&quot; candidate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: (at &quot;name&quot; candidate),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;votes&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>with-capability</code> function ensures that the <code>ELECTION-ADMIN</code> capability is in scope for the code block—the capability body—that inserts a <code>candidate</code> object into the <code>candidates</code> table.
If the <code>ELECTION-ADMIN</code> capability can&#x27;t be granted, because of a keyset failure in this case, the code block wrapped by the <code>with-capability</code> function isn&#x27;t executed.</p>
<p>After making these changes in the <code>election.pact</code> file, you should add tests to verify the code works as you expect it to.</p>
</li>
<li>
<p>Open the <code>election-workshop/pact/election.repl</code> file in the code editor.</p>
</li>
<li>
<p>Set the environment data and signature to use a different key, then add a transaction that you expect to fail for adding a fourth candidate.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;admin-keyset&quot; :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;keys&quot; : [ &quot;other-key&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , &quot;pred&quot; : &quot;keys-all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [{ &quot;key&quot;  : &quot;other-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Add candidate without permission fails&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect-failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Adding a candidate with the wrong keyset should fail&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Keyset failure (keys-all)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (add-candidate { &quot;key&quot;: &quot;4&quot;, &quot;name&quot;: &quot;Candidate D&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that the using the <code>add-candidate</code> function is a guarded operation that fails when the wrong keyset is used with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:77:3-83:3:Trace: &quot;Setting transaction data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:85:2-89:3:Trace: &quot;Setting transaction signatures/caps&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:91:2-91:53:Trace: &quot;Begin Tx 8 Add candidate without permission fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:92:4-92:61:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:93:4-97:5:Trace: &quot;Expect failure: Success: Adding a candidate with the wrong keyset should fail&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:98:2-98:13:Trace: &quot;Commit Tx 8 Add candidate without permission fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Clear the environment data and signature and add another transaction to try to call the <code>add-candidate</code> function.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data {})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs [])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Add candidate without permission fails&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (use n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (add-candidate { &quot;key&quot;: &quot;4&quot;, &quot;name&quot;: &quot;Candidate D&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>election.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact election.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that calling the <code>add-candidate</code> function fails with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.repl:103:2-103:59:Trace: Loaded imports from n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">election.pact:11:5: Keyset failure (keys-all): [d0aa3280...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 11 |      (enforce-guard (keyset-ref-guard &quot;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election-admin&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  at(n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election.ELECTION-ADMIN.{Cp4zNjFLxwm66mq6BWMpo4z1seYIjWyOfsPXXUNkcxE}):election-07-wip.pact:26:5-34:6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  at(n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election.add-candidate.{Cp4zNjFLxwm66mq6BWMpo4z1seYIjWyOfsPXXUNkcxE} {&quot;key&quot;: &quot;4&quot;,&quot;...}):election.repl:104:2-104:55</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Remove the changes to the environment data and signatures and the last two transactions, then execute the code in the <code>election.repl</code> file to verify that the file loads successfully using the <code>election-admin</code> keyset guard.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-election-module">Deploy the election module<a href="#deploy-the-election-module" class="hash-link" aria-label="Direct link to Deploy the election module" title="Direct link to Deploy the election module">​</a></h2>
<p>Now that you&#x27;ve updated and tested your <code>election</code> module using the Pact REPL, you can update the module deployed on the local development network.</p>
<p>To update the <code>election</code> module on the development network:</p>
<ol>
<li>
<p>Verify the development network is currently running on your local computer.</p>
</li>
<li>
<p>Open the <code>election-module-devnet.ktpl</code> file, add the <code>&quot;init-candidates&quot;: true</code> property to the transaction data, and save the file.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">election-admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;{{public-key}}&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pred</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;keys-all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&quot;init-candidates&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a transaction that uses the <code>election-module-devnet.ktpl</code> template by running the <code>kadena tx add</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Sign the transaction by running the <code>kadena tx sign</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Send the signed transaction to the blockchain by running the <code>kadena tx send</code> command and following the prompts displayed.</p>
<p>You can verify the transaction results using the request key for the transaction.</p>
<p><img decoding="async" loading="lazy" alt="Election module deployed on the development chain" src="/docs/assets/images/deploy-module-177f314b4c70532b888a7e6425367ebb.png" width="2074" height="1708" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-candidate">Add a candidate<a href="#add-a-candidate" class="hash-link" aria-label="Direct link to Add a candidate" title="Direct link to Add a candidate">​</a></h2>
<p>After you deploy the module on the local development network, you can use your administrative account to add, sign, and send transactions that add candidates to the <code>candidates</code> table.</p>
<p>To add a candidate to the <code>election</code> module you have deployed on the development network:</p>
<ol>
<li>
<p>Create a new reusable transaction template named <code>add-election-candidate.ktpl</code> in the <code>~/.kadena/transaction-templates</code> folder.</p>
</li>
<li>
<p>Open the <code>add-election-candidate.ktpl</code> file and create a YAML transaction request similar to the following.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">code: |-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election.add-candidate  { &quot;key&quot;: &quot;1&quot;, &quot;name&quot;: &quot;Maya Garcia&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   election-admin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     keys: [&quot;{{public-key}}&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     pred: &quot;keys-all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meta:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   chainId: &quot;{{chain-id}}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   sender: &quot;{{{sender-account}}}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   gasLimit: 80300</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   gasPrice: 0.000001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ttl: 600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - public: &quot;{{public-key}}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     caps: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networkId: &quot;{{network-id}}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a transaction that uses the <code>add-election-candidate.ktpl</code> template by running the <code>kadena tx add</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Sign the transaction by running the <code>kadena tx sign</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Send the signed transaction to the blockchain by running the <code>kadena tx send</code> command and following the prompts displayed.</p>
<p>You can verify the transaction results using the request key for the transaction.</p>
<p><img decoding="async" loading="lazy" alt="Candidate added to the blockchain successfully" src="/docs/assets/images/add-candidate-7b49cfb20d7464cb5852d4132425cf15.png" width="1746" height="494" class="img_ev3q"></p>
<p>You can reuse the <code>add-election-candidate.ktpl</code> template to add more candidates to the candidates table by updating the code to specify a new index key and candidate name or proposal title.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">code: |-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election.add-candidate  { &quot;key&quot;: &quot;2&quot;, &quot;name&quot;: &quot;Tai Xi&quot; })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You could also use this template to add proposals instead of the candidates to election by providing a new unique index key and a proposal title.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">code: |-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election.add-candidate  { &quot;key&quot;: &quot;2a&quot;, &quot;name&quot;: &quot;Approve the budget for the new library.&quot; })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connect-the-frontend">Connect the frontend<a href="#connect-the-frontend" class="hash-link" aria-label="Direct link to Connect the frontend" title="Direct link to Connect the frontend">​</a></h2>
<p>You now have the election backend defined in a Pact module running on the development network.
To make the functions in the module available to the election application website, you need to modify the frontend to exchange data with the development network.</p>
<p>The frontend, written in TypeScript, uses repositories to exchange data with the backend.
The interfaces for these repositories are defined in the <code>frontend/src/types.ts</code> file.
By default, the frontend uses the in-memory implementations of the repositories.
By making changes to the implementation of the <code>interface ICandidateRepository</code> in <code>frontend/src/repositories/candidate/DevnetCandidateRepository.ts</code>, you can configure the frontend to use the <code>devnet</code> backend instead of the <code>in-memory</code> backend.
After making these changes, you can use the frontend to view candidates from the <code>candidates</code> table that are managed by your <code>election</code> module running on the development network blockchain.</p>
<p>To modify the frontend to list candidates from the development network:</p>
<ol>
<li>
<p>Open <code>election-workshop/frontend/src/repositories/candidate/DevnetCandidateRepository.ts</code> in your code editor.</p>
</li>
<li>
<p>Update the values for the <code>CHAIN_ID</code> and <code>NAMESPACE</code> constants with the chain where you deployed the <code>election</code> module and your own principal namespace.</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NETWORK_ID</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;development&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CHAIN_ID</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_HOST</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">http://localhost:8080/chainweb/0.0/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">NETWORK_ID</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/chain/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">CHAIN_ID</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/pact</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NAMESPACE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Remove the <code>@ts-ignore</code> comment from the <code>listCandidates</code> function:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> listCandidates </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ICandidate</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Pact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// @ts-ignore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execution</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Pact</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">modules</span><span class="token punctuation" style="color:#393A34">[</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">NAMESPACE</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">.election</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;list-candidates&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMeta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CHAIN_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      gasLimit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setNetworkId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">NETWORK_ID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> result </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dirtyRead</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">transaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">status </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;success&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> ICandidate</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function uses the Kadena client (<code>@kadena/client</code>) library to connect to the development network and read data from the blockchain.
After you remove the <code>@ts-ignore</code> comment, you should notice that the code editor highlights a problem with your module because it isn&#x27;t defined in the <code>IPactModules</code> interface.
To fix this problem, you must generate types for the <code>election</code> module so they can be used when called by Kadena client library functions.</p>
</li>
<li>
<p>Open a terminal in your code editor, change to the <code>election-workshop/frontend</code> directory, then generate types for the <code>election</code> module by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run pactjs:generate:contract:election</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command uses the <code>pactjs</code> library to generate TypeScript definitions for the <code>election</code> module and should clear the error reported by the code editor.
Depending on the code editor, you might need to close the project in the editor and reopen it to reload the code editor window with the change.</p>
<p>After you clear the error, note that the <code>listCandidates</code> function:</p>
<ul>
<li>Sets the chain identifier, gas limit, and network identifier before creating the transaction.</li>
<li>Creates a <code>client</code> connection to the blockchain.</li>
<li>Uses the <code>dirtyRead</code> method from the <code>@kadena/client</code> library to return a raw response for the transaction result without sending a transaction to the blockchain.</li>
<li>Processes the response from the development network and returns a list of candidates or an empty list.</li>
</ul>
</li>
<li>
<p>In the terminal where the <code>election-workshop/frontend</code> directory is your current working directory, install the frontend dependencies by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the frontend application configured to use the <code>devnet</code> backend by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run start-devnet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Open <code>http://localhost:5173</code> in your browser and verify that the website loads without errors.</p>
<p>You&#x27;ll notice that—unlike the frontend configured to use the in-memory backend—only the candidate you added after deploying the module on the development network is displayed.
With the development network backend, candidates must be added to the <code>candidates</code> table before they can be displayed.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next steps" title="Direct link to Next steps">​</a></h2>
<p>In this tutorial, you learned how to:</p>
<ul>
<li>Define a simple database schema and database table to store candidates.</li>
<li>Define functions for listing and adding candidates to the <code>candidates</code> table.</li>
<li>Deploy the <code>election</code> module on the development network running locally.</li>
<li>Connect the frontend of the election website to use the <code>election</code> module deployed on the development network as a backend.</li>
</ul>
<p>In the next tutorial, you&#x27;ll upgrade the <code>election</code> module to enable people to cast a vote on a candidate with their Kadena account.</p>
<p>To see the code for the activity you completed in this tutorial and get the starter code for the next tutorial, check out the <code>08-voting</code> branch from the <code>election-workshop</code> repository by running the following command in your terminal
shell:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git checkout 08-voting</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/resources/election-workshop/7-nominate-candidates.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin" class="table-of-contents__link toc-highlight">Before you begin</a></li><li><a href="#define-the-database-schema-and-table" class="table-of-contents__link toc-highlight">Define the database schema and table</a></li><li><a href="#test-table-creation" class="table-of-contents__link toc-highlight">Test table creation</a></li><li><a href="#update-the-list-candidates-function" class="table-of-contents__link toc-highlight">Update the list-candidates function</a></li><li><a href="#add-candidates" class="table-of-contents__link toc-highlight">Add candidates</a></li><li><a href="#guard-add-candidate-with-a-capability" class="table-of-contents__link toc-highlight">Guard add-candidate with a capability</a></li><li><a href="#deploy-the-election-module" class="table-of-contents__link toc-highlight">Deploy the election module</a></li><li><a href="#add-a-candidate" class="table-of-contents__link toc-highlight">Add a candidate</a></li><li><a href="#connect-the-frontend" class="table-of-contents__link toc-highlight">Connect the frontend</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>