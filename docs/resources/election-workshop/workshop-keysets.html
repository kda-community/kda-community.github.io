<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-resources/election-workshop/workshop-keysets" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Define keysets | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/resources/election-workshop/workshop-keysets"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Define keysets | Kadena Docs"><meta data-rh="true" name="description" content="Learn how to define keysets in your principal namespace."><meta data-rh="true" property="og:description" content="Learn how to define keysets in your principal namespace."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/resources/election-workshop/workshop-keysets"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/resources/election-workshop/workshop-keysets" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/resources/election-workshop/workshop-keysets" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/smart-contract-dev">Smart contracts</a><button aria-label="Expand sidebar category &#x27;Smart contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/coding-projects/coding-projects">Coding projects</a><button aria-label="Expand sidebar category &#x27;Coding projects&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/resources">Resources</a><button aria-label="Collapse sidebar category &#x27;Resources&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/solutions">Developer tools and solutions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/resources/election-workshop">Workshop: Election app</a><button aria-label="Collapse sidebar category &#x27;Workshop: Election app&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/election-workshop/workshop-prepare">Prepare your workspace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/election-workshop/workshop-start">Start a local blockchain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/resources/election-workshop/workshop-keysets">Define keysets</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/ecosystem">Ecosystem and partners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/writing-guide">Writer&#x27;s style guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/contribute-doc">Contribute to documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/contribute-dev">Contribute as a developer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resources/legacy">Legacy documentation site</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/resources"><span itemprop="name">Resources</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/resources/election-workshop"><span itemprop="name">Workshop: Election app</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Define keysets</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Define keysets</h1></header>
<p>As you learned in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a> and <a href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a>, keysets determine rules for signing transactions and controlling the accounts that can access and update the namespaces where you deploy smart contracts.
This tutorial demonstrates how to define the <code>admin-keyset</code> in the principal namespace that you created in <a href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a> using the public key of the administrative account you created in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a>.</p>
<p>After you define the <code>admin-keyset</code> in your principal namespace, you&#x27;ll be able to use it to authorize your administrative account to submit specific types of transactions for the election application you&#x27;re building.
For example, you&#x27;ll be able to authorize transactions that deploy and upgrade the election smart contract and that nominate the candidates that other accounts can vote on.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin">Before you begin<a href="#before-you-begin" class="hash-link" aria-label="Direct link to Before you begin" title="Direct link to Before you begin">​</a></h2>
<p>Before you start this tutorial, verify the following basic requirements:</p>
<ul>
<li>You have an internet connection and a web browser installed on your local computer.</li>
<li>You have a code editor, such as <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">Visual Studio Code</a>, access to an interactive terminal shell, and are generally familiar with using command-line programs.</li>
<li>You have cloned the <a href="https://github.com/kadena-community/voting-dapp.git" target="_blank" rel="noopener noreferrer">voting-dapp</a> repository to create your project directory as described in <a href="/docs/resources/election-workshop/workshop-prepare">Prepare your workspace</a>.</li>
<li>You have the development network running in a Docker container as described in <a href="/docs/resources/election-workshop/workshop-start">Start a local blockchain</a>.</li>
<li>You are <a href="/docs/resources/election-workshop/workshop-start#connect-to-the-development-network">connected to the development network</a> using your local host IP address and port number 8080.</li>
<li>You have created and funded an administrative account as described in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a>.</li>
<li>You have created a principal namespace on the development network as described in <a href="/docs/resources/election-workshop/workshop-namespace#create-your-own-principal-namespace">Create your own principal namespace</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="write-a-transaction-to-define-a-keyset">Write a transaction to define a keyset<a href="#write-a-transaction-to-define-a-keyset" class="hash-link" aria-label="Direct link to Write a transaction to define a keyset" title="Direct link to Write a transaction to define a keyset">​</a></h2>
<p>Like the previous tutorial, in this tutorial, you&#x27;ll write transactions to test operations in a <code>.repl</code> file and execute the test code using the Pact command-line interpreter.
After you test the transaction to define a keyset in the Pact REPL, you&#x27;ll define a keyset in the principal namespace that you created for your local development network.</p>
<p>Pact provides the <code>define-keyset</code> built-in function to define keysets.
This function takes two arguments:</p>
<ul>
<li>The name of the keyset being defined.</li>
<li>The keyset object—that is, one or more keys and a predicate—that you want to associate with the keyset name being defined.</li>
</ul>
<p>As you saw in <a href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a>, you can wrap the <code>define-keyset</code> function by calling the <code>expect</code> function to test that calling <code>define-keyset</code> will succeed.
The <code>expect</code> function takes three arguments:</p>
<ul>
<li>The title of the test.</li>
<li>The expected output of the <code>define-keyset</code> function.</li>
<li>The <code>define-keyset</code> function call.</li>
</ul>
<p>To define a keyset:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact</code> folder in the code editor.</p>
</li>
<li>
<p>Create a new file named <code>keyset.repl</code> in the <code>pact</code> folder.</p>
</li>
<li>
<p>Write an empty transaction by adding the <a href="/docs/pact-5/repl/begin-tx"><code>begin-tx</code></a> and <a href="/docs/pact-5/repl/commit-tx"><code>commit-tx</code></a> built-in functions in the <code>keyset.repl</code> file:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a new keyset&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add the <code>expect</code> wrapper and <code>define-keyset</code> function call between the <code>begin-tx</code> and <code>commit-tx</code> lines:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a new keyset&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;A keyset can be defined&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;Keyset write success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (define-keyset &quot;election-admin-keyset&quot; (read-keyset &quot;admin-keyset&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you execute the transaction using the <code>pact keyset.repl --trace</code> command at this point, the transaction will fail because there&#x27;s no <code>&quot;admin-keyset&quot;</code> available to read:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:2:3-6:4:FAILURE: A keyset can be defined evaluation of actual failed with error message: read-keyset failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load failed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you saw when defining a namespace, you must add the information for the <code>admin-keyset</code> to the environment—using the <code>env-data</code> built-in function—so that it can be read in the <code>define-keyset</code> function call.</p>
</li>
<li>
<p>Add the <code>admin-keyset</code> to the environment by calling the <code>env-data</code> function at the top of the <code>keyset.repl</code> file:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;admin-keyset&quot; :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;keys&quot; : [ &quot;admin-public-key&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , &quot;pred&quot; : &quot;keys-all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this environment data, the <code>define-keyset</code> function can read the <code>admin-keyset</code> object to define the new <code>election-admin-keyset</code> keyset.
However, for this keyset to to useful for governing a module in a namespace, it must be defined within the context of a specific namespace.</p>
</li>
<li>
<p>Add the following transaction to define the <code>election</code> namespace before the transaction to define a keyset.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a namespace to define the keyset in&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (define-namespace &quot;election&quot; (read-keyset &quot;admin-keyset&quot;) (read-keyset &quot;admin-keyset&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Modify the <code>Define a new keyset</code> transaction to define the <code>election-admin-keyset</code> in the context of the <code>election</code> namespace by first entering the election namespace by calling the <code>namespace</code> built-in function, then adding <code>election</code> as a prefix for the new keyset.</p>
<p>For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a new keyset&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(namespace &quot;election&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;A keyset can be defined&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Keyset write success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-keyset &quot;election.election-admin-keyset&quot; (read-keyset &quot;admin-keyset&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>keyset.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact keyset.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll see that the transaction succeeds with output similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:0:0-6:1:Trace: &quot;Setting transaction data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:8:0-8:55:Trace: &quot;Begin Tx 0 Define a namespace to define the keyset in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:9:6-9:93:Trace: &quot;Namespace defined: election&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:10:0-10:11:Trace: &quot;Commit Tx 0 Define a namespace to define the keyset in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:12:0-12:32:Trace: &quot;Begin Tx 1 Define a new keyset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:13:3-13:25:Trace: &quot;Namespace set to election&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:14:3-17:83:Trace: &quot;Expect: success A keyset can be defined&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:18:0-18:11:Trace: &quot;Commit Tx 1 Define a new keyset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You now have a valid keyset named <code>election-admin-keyset</code> in the <code>election</code> namespace.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-keyset-authorization">Test keyset authorization<a href="#test-keyset-authorization" class="hash-link" aria-label="Direct link to Test keyset authorization" title="Direct link to Test keyset authorization">​</a></h2>
<p>The <code>election.election-admin-keyset</code> you just defined is protected by the <code>admin-keyset</code> that has only one key, the <code>admin-public-key</code>.
Only this account is authorized to call the <code>define-keyset</code> function to modify or update the <code>election.election-admin-keyset</code> definition.
Transactions that use any other key will fail.</p>
<p>To test keyset authorization and verify that no other accounts can take control of your namespace, you can add another test case to the <code>keyset.repl</code> file.</p>
<p>To test keyset authorization works as expected:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/keyset.repl</code> file in the code editor.</p>
</li>
<li>
<p>Add new environment data for the <code>admin-keyset</code> that uses a different key to the bottom of the <code>keyset.repl</code> file:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;admin-keyset&quot; :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;keys&quot; : [ &quot;other-public-key&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , &quot;pred&quot; : &quot;keys-all&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These lines establish a different <code>admin-keyset</code> context for testing whether a different key can be used to change the keyset definition.</p>
</li>
<li>
<p>Sign the transaction with the <code>other-public-key</code> key from the second <code>admin-keyset</code> by adding the following lines of code after the lines changing the context:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [{ &quot;key&quot;  : &quot;other-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add a transaction to define a new keyset using the <code>other-public-key</code> in the second <code>admin-keyset</code>
and change the <code>expect</code> function to <code>expect-failure</code> with the following lines of code:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a keyset using a different keyset fails&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (namespace &quot;election&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect-failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Keyset is already defined using a different keyset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Keyset failure (keys-all): [admin-pu...]&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (define-keyset &quot;election.election-admin-keyset&quot; (read-keyset &quot;admin-keyset&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>keyset.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact keyset.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll see that the transaction to change the <code>election.admin-keyset</code> fails—as expected—with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:20:0-26:1:Trace: &quot;Setting transaction data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:28:0-32:1:Trace: &quot;Setting transaction signatures/caps&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:34:0-34:59:Trace: &quot;Begin Tx 2 Define a keyset using a different keyset fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:35:2-35:24:Trace: &quot;Namespace set to election&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:36:2-40:3:Trace: &quot;Expect failure: Success: keyset definition is already defined using a different keyset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:41:0-41:11:Trace: &quot;Commit Tx 2 Define a keyset using a different keyset fails&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This output proves that the <code>election.election-admin-keyset</code> can only be governed by the account with the <code>admin-public-key</code> and can&#x27;t be modified by an account that uses a different key.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rotate-the-keyset">Rotate the keyset<a href="#rotate-the-keyset" class="hash-link" aria-label="Direct link to Rotate the keyset" title="Direct link to Rotate the keyset">​</a></h2>
<p>The previous example illustrated that an unauthorized account can&#x27;t take control of your namespace.
However, it is possible for you to transfer governance permissions to someone else by <strong>rotating</strong> the <code>election.election-admin-keyset</code> to use a different key.
Keyset rotation can be useful in many situations.
For example, if the administrator of an election resigns or retires, you can use keyset rotation to add the signature of a new authorized successor to the original <code>admin-public-key</code> in a new transaction.</p>
<p>To rotate the keyset to accept a new signature:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/keyset.repl</code> file in the code editor.</p>
</li>
<li>
<p>Add a new signature to the environment by adding the following lines of code after the last transaction that tested unauthorized access:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [{ &quot;key&quot;  : &quot;other-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ,{ &quot;key&quot;  : &quot;admin-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add a new transaction that allows the <code>election.election-admin-keyset</code> to be modified and is expected to succeed:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Rotating the existing keyset to a new keyset works if the transaction is signed with the original admin-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(namespace &quot;election&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Keyset can be rotated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Keyset write success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-keyset &quot;election.election-admin-keyset&quot; (read-keyset &quot;admin-keyset&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the code in the <code>keyset.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact keyset.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll see that the transaction to rotate the <code>election.election-admin-keyset</code> succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:43:0-50:1:Trace: &quot;Setting transaction signatures/caps&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:52:0-54:3:Trace: &quot;Begin Tx 3 Rotating the existing keyset to a new keyset works if the transaction is signed with the original admin-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:55:2-55:24:Trace: &quot;Namespace set to election&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:56:2-60:3:Trace: &quot;Expect: success Keyset can be rotated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keyset.repl:61:2-61:13:Trace: &quot;Commit Tx 3 Rotating the existing keyset to a new keyset works if the transaction is signed with the original admin-public-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This output indicates that your test passed and you have successfully rotated the <code>election.election-admin-keyset</code> to be governed by an <code>admin-keyset</code> that contains the <code>other-public-key</code> signature.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-keyset-definition-in-a-principal-namespace">Test keyset definition in a principal namespace<a href="#test-keyset-definition-in-a-principal-namespace" class="hash-link" aria-label="Direct link to Test keyset definition in a principal namespace" title="Direct link to Test keyset definition in a principal namespace">​</a></h2>
<p>In <a href="/docs/resources/election-workshop/workshop-namespace">Define a namespace</a>, you defined a principal namespace for your local development network.
In this tutorial, you&#x27;ll add a keyset definition for your account to govern that principal namespace.
As a best practice, you should test transactions locally using the Pact REPL before you send them as API requests to the development network.</p>
<p>To test your keyset definition:</p>
<ol>
<li>
<p>Open the <code>election-workshop/pact/principal-namespace.repl</code> file in the code editor on your computer.</p>
<p>You might remember that this file:</p>
<ul>
<li>Loads the public key of the <code>sender00</code> account and the <code>ns</code> module from the local filesystem into the environment data of the Pact REPL.</li>
<li>Creates the principal namespace using the <code>ns-name</code> variable.</li>
</ul>
</li>
<li>
<p>Add the following signature and transaction to define the keyset:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-sigs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [{ &quot;key&quot;  : &quot;368820f80c324bbc7c2b0610688a7da43e39f91d118732671cd9c7500ff43cca&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   , &quot;caps&quot; : []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define a keyset in the principal namespace&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;A keyset can be defined in a principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Keyset write success&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (let ((ns-name (ns.create-principal-namespace (read-keyset &quot;admin-keyset&quot;))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (namespace ns-name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (define-keyset (format &quot;{}.{}&quot; [ns-name &quot;admin-keyset&quot;]) (read-keyset &quot;admin-keyset&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code:</p>
<ul>
<li>Adds a signature for the transaction.</li>
<li>Stores the name of the principal namespace in the <code>ns-name</code> variable.</li>
<li>Uses the <code>ns-name</code> variable with the <code>namespace</code> function to enter the principal namespace before calling the <code>define-keyset</code> function.</li>
<li>Uses the <code>define-keyset</code> function to compose the keyset name from the principal namespace name stored in the <code>ns-name</code> variable and the string <code>admin-keyset</code> instead of a hardcoded <code>election.election-admin-keyset</code> string.</li>
</ul>
</li>
<li>
<p>Execute the code in the <code>principal-namespace.repl</code> file using the Pact command-line interpreter and the <code>--trace</code> command-line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact principal-namespace.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll see that the transaction succeeds with output similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">principal-namespace.repl:21:0-25:3:Trace: &quot;Setting transaction signatures/caps&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">principal-namespace.repl:27:0-27:55:Trace: &quot;Begin Tx 2 Define a keyset in the principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">principal-namespace.repl:28:2-35:1:Trace: &quot;Expect: success A keyset can be defined in a principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">principal-namespace.repl:36:0-36:11:Trace: &quot;Commit Tx 2 Define a keyset in the principal namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, you defined a keyset using the public key for <code>sender00</code> account.
Next, you can define a keyset in the principal namespace you created on the development network using the administrative account you created in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a>.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-a-keyset-in-your-principal-namespace">Define a keyset in your principal namespace<a href="#define-a-keyset-in-your-principal-namespace" class="hash-link" aria-label="Direct link to Define a keyset in your principal namespace" title="Direct link to Define a keyset in your principal namespace">​</a></h2>
<p>Now that you&#x27;ve seen how to use the <code>define-keyset</code> function and how to enter a specific namespace with the <code>namespace</code> function, you&#x27;re ready to define a keyset for your principal namespace on the local development network with the administrative account you created previously.</p>
<p>To define a keyset for the principal namespace on the development network:</p>
<ol>
<li>
<p>Verify the development network is currently running on your local computer.</p>
</li>
<li>
<p>Open your code editor and navigate to the <code>election-namespace.ktpl</code> file that you created previously.</p>
<p>For example, open the <code>~/.kadena/transaction-templates</code> folder in your code editor.</p>
</li>
<li>
<p>Modify the code in the transaction request to define a keyset in your principal namespace using the public key for the <code>election-admin</code> administrator account that you created in <a href="/docs/resources/election-workshop/workshop-admin">Add an administrator account</a>.</p>
<p>For example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">namespace (ns.create</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">principal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">namespace (read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot;)) (read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot;) (read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (let ((ns</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name (ns.create</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">principal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">namespace (read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot;))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (namespace ns</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset (format &quot;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ns</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">) (read</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyset &quot;election</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a transaction that uses the template by running the <code>kadena tx add</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Sign the transaction by running the <code>kadena tx sign</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Send the signed transaction to the blockchain by running the <code>kadena tx send</code> command and following the prompts displayed.</p>
</li>
<li>
<p>Verify the transaction results using the request key for the transaction.</p>
<p>Note that combining the code to define or redefine the namespace and define a keyset for the namespace doesn&#x27;t record the namespace name in the transaction results.
If you didn&#x27;t take note of the principal namespace defined for the keyset you used in the previous tutorial, you can rerun the transaction to define the principal namespace or create a separate transaction similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(define-namespace (ns.create-principal-namespace (read-keyset &quot;election-admin&quot;)) (read-keyset &quot;election-admin&quot;) (read-keyset &quot;election-admin&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You&#x27;ll always get the same unique principal namespace for the same keyset.
The principal namespace for the <code>d0aa32802596b8e31f7e35d1f4995524f11ed9c7683450b561e01fb3a36c18ae</code> public key used in the previous tutorial is <code>n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80</code> and the keyset defined in that namespace for this tutorial is <code>n_d5ff15d933b83c1ef691dce3dabacfdfeaeade80.election-admin</code>.
You need this information in the next tutorial.</p>
</li>
</ol>
<p>You now have a <strong>keyset definition</strong> that governs your principal namespace on the local development network.
This keyset is controlled by the administrative account you created using <code>kadena-cli</code> commands.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next steps" title="Direct link to Next steps">​</a></h2>
<p>In this tutorial, you learned how to:</p>
<ul>
<li>Define and update a keyset in the Pact REPL.</li>
<li>Test the behavior of keysets before defining a keyset on the blockchain.</li>
<li>Create a transaction to define a keyset in your principal namespace on the local development network.</li>
</ul>
<p>In the next tutorial, you&#x27;ll create your first <strong>Pact module</strong> for the election application.
You&#x27;ll define the Pact module inside of your principal namespace and control how it&#x27;s used with the keyset you defined in this tutorial.
After you complete the tutorial, you&#x27;ll have the basic functionality for the election application website.</p>
<p>To see the code for the activity you completed in this tutorial and get the starter code for the next tutorial, check out the <code>06-smart-contracts</code> branch from the <code>election-workshop</code> repository by running the following command in your
terminal shell:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git checkout 06-smart-contracts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/resources/election-workshop/5-define-keysets.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/resources/election-workshop/workshop-namespace"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Define a namespace</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/resources/ecosystem"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ecosystem and partners</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin" class="table-of-contents__link toc-highlight">Before you begin</a></li><li><a href="#write-a-transaction-to-define-a-keyset" class="table-of-contents__link toc-highlight">Write a transaction to define a keyset</a></li><li><a href="#test-keyset-authorization" class="table-of-contents__link toc-highlight">Test keyset authorization</a></li><li><a href="#rotate-the-keyset" class="table-of-contents__link toc-highlight">Rotate the keyset</a></li><li><a href="#test-keyset-definition-in-a-principal-namespace" class="table-of-contents__link toc-highlight">Test keyset definition in a principal namespace</a></li><li><a href="#define-a-keyset-in-your-principal-namespace" class="table-of-contents__link toc-highlight">Define a keyset in your principal namespace</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>