<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/syntax" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Syntax and keywords | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/reference/syntax"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Syntax and keywords | Kadena Docs"><meta data-rh="true" name="description" content="This reference provide a summary of syntax conventions for the Pact smart contract programming language."><meta data-rh="true" property="og:description" content="This reference provide a summary of syntax conventions for the Pact smart contract programming language."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/reference/syntax"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/reference/syntax" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/reference/syntax" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/smart-contract-dev">Smart contracts</a><button aria-label="Expand sidebar category &#x27;Smart contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/reference">Reference</a><button aria-label="Collapse sidebar category &#x27;Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/reference/syntax">Syntax and keywords</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pact-5/func-quick-ref">Function quick reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/capabilities">Capability functions</a><button aria-label="Expand sidebar category &#x27;Capability functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/database">Database functions</a><button aria-label="Expand sidebar category &#x27;Database functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/general">General functions</a><button aria-label="Expand sidebar category &#x27;General functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/guards">Guard functions</a><button aria-label="Expand sidebar category &#x27;Guard functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/keysets">Keyset functions</a><button aria-label="Expand sidebar category &#x27;Keyset functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/operators">Operator functions</a><button aria-label="Expand sidebar category &#x27;Operator functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/repl">REPL-only functions</a><button aria-label="Expand sidebar category &#x27;REPL-only functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/time/time-functions">Time functions</a><button aria-label="Expand sidebar category &#x27;Time functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/pact-5/special-use">Specialized functions</a><button aria-label="Expand sidebar category &#x27;Specialized functions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kadena-client">Kadena TypeScript client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/pact-cli">Pact command-line interpreter</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/reference/kadena-cli-ref">kadena-cli commands</a><button aria-label="Expand sidebar category &#x27;kadena-cli commands&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/chainweb-cli">chainweb-node command-line</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/bootstrap">Chainweb bootstrap nodes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/latency">Chainweb execution and latency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/guard-json">Guard JSON representation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/dex-integration">Exchange integration guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/evm-integration/foundry-chainweb-ref">Foundry Chainweb EVM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/coding-projects/coding-projects">Coding projects</a><button aria-label="Expand sidebar category &#x27;Coding projects&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/reference"><span itemprop="name">Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Syntax and keywords</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Syntax and keywords</h1></header>
<p>This reference provide a summary of syntactical conventions and reserved keywords for the Pact smart contract programming language.
This section doesn&#x27;t include explanatory text, use case examples, or general information about the Pact language. Therefore, this section is typically not suitable for readers who are new to programming languages or who are looking for a general introduction to using Pact.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="text-strings">Text strings<a href="#text-strings" class="hash-link" aria-label="Direct link to Text strings" title="Direct link to Text strings">​</a></h2>
<p>Text string literals are delimited using double quotation marks:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; &quot;This is a literal text string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;This is a literal text string&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In programs, you can specify multiline strings by putting a backslash before and after whitespace within the quotation marks.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun id (a)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Identity function. \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \Argument is returned.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Multiline strings aren&#x27;t support when using the Pact command-line interpreter interactively.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="symbols">Symbols<a href="#symbols" class="hash-link" aria-label="Direct link to Symbols" title="Direct link to Symbols">​</a></h2>
<p>Symbols are string literals that represent a unique item in the runtime, like a function identifier or a table name.
Internally, symbols are treated as string literals.
However, if you want to make use of symbols to distinguish identifiers from other strings, precede the string with a single quotation mark.
For example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; &#x27;accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;accounts&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Symbol notation doesn&#x27;t support whitespace nor multiline strings.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integers">Integers<a href="#integers" class="hash-link" aria-label="Direct link to Integers" title="Direct link to Integers">​</a></h2>
<p>Integer literals are unbounded, and can be positive or negative.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; 12345</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12345</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; -922337203685477580712387461234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-922337203685477580712387461234</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="decimals">Decimals<a href="#decimals" class="hash-link" aria-label="Direct link to Decimals" title="Direct link to Decimals">​</a></h2>
<p>Decimal literals have potentially unlimited precision.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; 100.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; -356452.234518728287461023856582382983746</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-356452.234518728287461023856582382983746</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="booleans">Booleans<a href="#booleans" class="hash-link" aria-label="Direct link to Booleans" title="Direct link to Booleans">​</a></h2>
<p>Booleans are represented by <code>true</code> and <code>false</code> literals.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (and true false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lists">Lists<a href="#lists" class="hash-link" aria-label="Direct link to Lists" title="Direct link to Lists">​</a></h2>
<p>List literals are created with square brackets (<code>[]</code>).
Optionally, list items can be separated with commas.
Uniform literal lists are given a type in parsing.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; [1 2 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1 2 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; [1,2,3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1 2 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (typeof [1 2 true])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;list&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="objects">Objects<a href="#objects" class="hash-link" aria-label="Direct link to Objects" title="Direct link to Objects">​</a></h2>
<p>Objects are dictionaries, created with curly braces (<code>{}</code>) specifying key-value pairs using a colon (<code>:</code>).
For certain applications, such as database updates, keys must be strings.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; { &quot;foo&quot;: (+ 1 2), &quot;bar&quot;: &quot;baz&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&quot;bar&quot;: &quot;baz&quot;,&quot;foo&quot;: 3}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bindings">Bindings<a href="#bindings" class="hash-link" aria-label="Direct link to Bindings" title="Direct link to Bindings">​</a></h2>
<p>Bindings are dictionary-like forms, also created with curly braces, to bind database results to variables using the <code>:=</code> operator.
Bindings are used in the following functions to assign variables to named columns in a row, or values in an object:</p>
<ul>
<li><a href="/docs/pact-5/database/with-read">with-read</a></li>
<li><a href="/docs/pact-5/database/with-default-read">with-default-read</a></li>
<li><a href="/docs/pact-5/general/bind">bind</a></li>
<li><a href="/docs/pact-5/general/resume">resume</a></li>
</ul>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun check-balance (id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (with-read accounts id { &quot;balance&quot; := bal }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (enforce (&gt; bal 0) (format &quot;Account in overdraft: {}&quot; [bal]))))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lambdas">Lambdas<a href="#lambdas" class="hash-link" aria-label="Direct link to Lambdas" title="Direct link to Lambdas">​</a></h2>
<p>Lambda expressions are code blocks that create anonymous functions that can be applied in a local scope, rather than at the top level of a program with the <code>defun</code> keyword.</p>
<p>Lambdas are supported in <code>let</code> expressions, and can be as inline arguments for built-in function applications.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; identity function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (let ((f (lambda (x) x))) (f a))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; native example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (let ((f (lambda (x) x))) (map (f) [1 2 3]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Inline native example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (map (lambda (x) x) [1 2 3])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-specifiers">Type specifiers<a href="#type-specifiers" class="hash-link" aria-label="Direct link to Type specifiers" title="Direct link to Type specifiers">​</a></h2>
<p>You can specify types for functions, variables, and objects by using the colon (<code>:</code>) operator followed by one of the following type literal or a user type specification:</p>
<ul>
<li><code>string</code></li>
<li><code>integer</code></li>
<li><code>decimal</code></li>
<li><code>bool</code></li>
<li><code>time</code></li>
<li><code>keyset</code></li>
<li><code>list</code> or <code>[type]</code> to specify the list type</li>
<li><code>object</code>, which can be further typed with a schema</li>
<li><code>table</code>, which can be further typed with a schema</li>
<li><code>module</code>, which must be further typed with required interfaces</li>
</ul>
<p>For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun mint:bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ( id:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      account:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      guard:guard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      amount:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-arguments-and-return-types">Function arguments and return types<a href="#function-arguments-and-return-types" class="hash-link" aria-label="Direct link to Function arguments and return types" title="Direct link to Function arguments and return types">​</a></h3>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun prefix:string (pfx:string str:string) (+ pfx str))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="let-variables">Let variables<a href="#let-variables" class="hash-link" aria-label="Direct link to Let variables" title="Direct link to Let variables">​</a></h3>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(let ((a:integer 1) (b:integer 2)) (+ a b))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="schema-type-literals">Schema type literals<a href="#schema-type-literals" class="hash-link" aria-label="Direct link to Schema type literals" title="Direct link to Schema type literals">​</a></h2>
<p>A schema defined with <a href="/docs/reference/syntax#defschema">defschema</a> is referenced by a name enclosed in curly braces (<code>{}</code>).</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema token-schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uri:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    precision:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    supply:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    policies:[module{kip.token-policy-v2}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable tokens:{token-schema})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable versions:{version})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Tables and objects can only take a schema type literal.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(deftable accounts:{account})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defun get-order:{order} (id) (read orders id))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="module-type-literals">Module type literals<a href="#module-type-literals" class="hash-link" aria-label="Direct link to Module type literals" title="Direct link to Module type literals">​</a></h2>
<p><a href="/docs/smart-contracts/modules#module-references">Module references</a> are specified by the interfaces they demand as a comma-delimited list.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module:{fungible-v2,user.votable}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dereference-operator">Dereference operator<a href="#dereference-operator" class="hash-link" aria-label="Direct link to Dereference operator" title="Direct link to Dereference operator">​</a></h2>
<p>The dereference operator <code>::</code> allows a member of an interface specified in the type of a <a href="/docs/smart-contracts/modules#module-references">module reference</a> to be invoked at runtime.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(interface baz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun quux:bool (a:integer b:string))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defconst ONE 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defun foo (bar:module{baz})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (bar::quux 1 &quot;hi&quot;) ;; invokes &#x27;quux&#x27; on whatever module is passed in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar::ONE             ;; directly references interface const</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bless">bless<a href="#bless" class="hash-link" aria-label="Direct link to bless" title="Direct link to bless">​</a></h2>
<p>Use the <code>bless</code> keyword to identify a previous version of a module—identified by its <code>hash</code> value—that you want to continue to support.</p>
<p>For more information about using the <code>bless</code> keyword in a module declaration, see <a href="/docs/smart-contracts/modules#module-versioning-and-dependencies">Dependency management</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax">Basic syntax<a href="#basic-syntax" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To support a previous version of a module, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(bless HASH)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates supporting two previous versions of the <code>provider</code> module:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module provider &#x27;keyset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (bless &quot;ZHD9IZg-ro1wbx7dXi3Fr-CVmA-Pt71Ov9M1UNhzAkY&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (bless &quot;bctSHEz4N5Y1XQaic6eOoBmjty88HMMGfAdQLPuIGMw&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cond">cond<a href="#cond" class="hash-link" aria-label="Direct link to cond" title="Direct link to cond">​</a></h2>
<p>Use the <code>cond</code> keyword to produce a series of <code>if-elseif-else</code> expressions to evaluate one after another.
For example, if the first condition evaluated passes, then branch-1 is executed.
If the first condition isn&#x27;t met, the second condition is evaluated and if that condition passes, then branch-2 is executed.
The <code>else-branch</code> is only evaluated if all other conditions fail.</p>
<p>The <code>cond</code> special form allows you to evaluate a series of <code>if</code> expressions in a more concise manner.</p>
<p>Syntactically, the <code>cond</code> form accepts a sequence of conditions:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(cond</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (a b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (c d)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (e f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   g)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When the conditions are evaluated, the statements are expanded to a series of <code>if</code> statements:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(if a b (if c d (if e f g)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-1">Basic syntax<a href="#basic-syntax-1" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To evaluate a series of conditions, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(cond (condition-1 branch-1) [(condition-2 branch-2) [...]] else-branch)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example demonstrates how to use <code>cond</code> to evaluate multiple branching conditional expressions.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module medals GOV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (defcap GOV () true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (defun award:string (score:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (cond ((&lt; score 10) &quot;Bronze&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ((&lt; score 20) &quot;Silver&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ((&lt; score 30) &quot;Gold&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Platinum&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you load this module, you can call the <code>award</code> function to see the conditions evaluated:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (m.award 100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Platinum&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (m.award 23)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Gold&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (m.award 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Bronze&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defcap">defcap<a href="#defcap" class="hash-link" aria-label="Direct link to defcap" title="Direct link to defcap">​</a></h2>
<p>Use the <code>defcap</code> keyword to signal the start of a capability definition followed by the capability name, required or optional arguments, optional documentation, and the capability body composed of one or more expressions.
A <code>defcap</code> code block defines a capability token you want to store in the environment to grant some type of permission or privilege. The body of the code block can consist of one or more expressions.</p>
<p>The body of the capability definition is only called with the <code>with-capability</code> and <code>compose-capability</code> functions when the token—parameterized by its arguments—isn&#x27;t found in the environment.
When the code is executed, the arguments are in scope.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-2">Basic syntax<a href="#basic-syntax-2" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a capability token that grants a permission or a privilege, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defcap name arguments [doc] capability-body ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-2">Examples<a href="#examples-2" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates defining the <code>USER_GUARD</code> capability:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defcap USER_GUARD (user)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Enforce user account guard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (with-read accounts user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;guard&quot;: guard }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (enforce-guard guard)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates defining the <code>DEBIT</code> capability:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defcap DEBIT (id:string sender:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (enforce-guard (account-guard id sender))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defconst">defconst<a href="#defconst" class="hash-link" aria-label="Direct link to defconst" title="Direct link to defconst">​</a></h2>
<p>Use the <code>defconst</code> keyword to define a constant name with the specified value and optional documentation or metadata. The value is evaluated when the module is loaded and held in memory for the duration of module execution.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-3">Basic syntax<a href="#basic-syntax-3" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a constant value, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst name value [doc-or-metadata])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-3">Examples<a href="#examples-3" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following examples illustrate defining constants with optional documentation:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst COLOR_RED=&quot;#FF0000&quot; &quot;Red in hex&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defconst COLOR_GRN=&quot;#00FF00&quot; &quot;Green in hex&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defconst PI 3.14159265 &quot;Pi to 8 decimals&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates defining the constant <code>PENNY</code> with an explicit type:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst PENNY:decimal 0.1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defun">defun<a href="#defun" class="hash-link" aria-label="Direct link to defun" title="Direct link to defun">​</a></h2>
<p>Use the <code>defun</code> keyword to signal the start of a function definition followed by the function name, required or optional arguments, optional documentation or metadata, and the function body composed of one or more expressions.
Arguments are in scope for the function body.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-4">Basic syntax<a href="#basic-syntax-4" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a function, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun name [arguments] [doc-or-metadata] function-body ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-4">Examples<a href="#examples-4" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following examples illustrate defining an <code>add3</code> function and a <code>scale3</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun add3 (a b c) (+ a (+ b c)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defun scale3 (a b c s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;multiply sum of A B C times s&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (* s (add3 a b c)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defpact">defpact<a href="#defpact" class="hash-link" aria-label="Direct link to defpact" title="Direct link to defpact">​</a></h2>
<p>Use the <code>defpact</code> keyword to define a multi-step transaction with the specified <code>name</code> as a pact.
The computation for a pact is composed from a sequence of steps that must be executed in a specific order and occur in distinct transactions.
The <code>defpact</code> syntax is identical to the [defun](/reference/syntax#defun keyword except that the <code>defpact</code> body must be comprised of <a href="/docs/reference/syntax#step">steps</a> to be executed in strict sequential order.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-5">Basic syntax<a href="#basic-syntax-5" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a pact, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defpact name [arguments] [doc-or-metadata] steps ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-5">Examples<a href="#examples-5" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defpact payment (payer payer-entity payee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  payee-entity amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step-with-rollback payer-entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (debit payer amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (credit payer amount))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step payee-entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (credit payee amount)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can nest <code>defpact</code> calls.
However, the following restrictions apply:</p>
<ul>
<li>The number of steps in the child <code>defpact</code> must match the number of steps of the parent <code>defpact</code>.</li>
<li>If a parent <code>defpact</code> step has the rollback field, so must the child.</li>
<li>If a parent step rolls back, so do child steps.</li>
<li>You must call the <code>continue</code> function with the same continuation arguments as the <code>defpact</code> originally dispatched to support multiple nested <code>defpact</code> calls to the same function but with different arguments.</li>
</ul>
<p>The following example shows a well-formed <code>defpact</code> with an equal number of steps, nested rollbacks, and <code>continue</code> calls:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defpact payment (payer payee amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step-with-rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (debit payer amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (credit payer amount))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step payee-entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (credit payee amount)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defpact split-payment (payer payee1 payee2 amount ratio)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step-with-rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (let</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ((payment1 (payment payer payee1 (* amount ratio)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (payment2 (payment payer payee2 (* amount (- 1 ratio))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;step 0 complete&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (let</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ((payment1 (continue (payment payer payee1 (* amount ratio))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       (payment2 (continue (payment payer payee2 (* amount (- 1 ratio)))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;step 0 rolled back&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (let</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ((payment1 (continue (payment payer payee1 (* amount ratio))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       (payment2 (continue (payment payer payee2 (* amount (- 1 ratio)))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;step 1 complete&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defschema">defschema<a href="#defschema" class="hash-link" aria-label="Direct link to defschema" title="Direct link to defschema">​</a></h2>
<p>Use the <code>defschema</code> keyword to define a <em>schema</em> of table <code>fields</code> with the specified <code>name</code>.
Each field in the schema takes the form of <code>fieldname[:fieldtype]</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-6">Basic syntax<a href="#basic-syntax-6" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a schema, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defschema name [doc-or-metadata] fields ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-6">Examples<a href="#examples-6" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates defining the <code>accounts</code> schema and an <code>accounts</code> table:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defschema accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Schema for accounts table&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  balance:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  amount:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ccy:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  data)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deftable">deftable<a href="#deftable" class="hash-link" aria-label="Direct link to deftable" title="Direct link to deftable">​</a></h2>
<p>Use the <code>deftable</code> keyword to define a database <em>table</em> with the specified <code>name</code>.
The name you specify is used in database functions to identify the table you want to work with.
Note the table must still be created with <a href="/docs/pact-5/database/create-table">create-table</a> function.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-7">Basic syntax<a href="#basic-syntax-7" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a table, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(deftable name[:schema] [doc-or-metadata])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-7">Examples<a href="#examples-7" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates defining a schema and an <code>accounts</code> table:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Row type for accounts table.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     balance:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     amount:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ccy:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     rowguard:guard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     date:time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     data:object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable accounts:{account}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Main table for accounts module.&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="do">do<a href="#do" class="hash-link" aria-label="Direct link to do" title="Direct link to do">​</a></h2>
<p>Use the <code>do</code> keyword to evaluate a sequence of expressions and return the last one as the result.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-8">Basic syntax<a href="#basic-syntax-8" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To evaluate a sequence of expressions and return the last result, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(do (my-expression1) (my-expression2) (my-return-expression))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-8">Examples<a href="#examples-8" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (do (print &quot;hello world!&quot;) (+ 1 2) (+ 121 299))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;hello world!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">420</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice how the return value is the last addition of <code>(+ 121 299)</code>.
The <code>do</code> keyword evaluates every expression supplied, so if any expression errors along the way, the subsequent expressions will never be evaluated.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (do (enforce false &quot;boom&quot;) (+ 1 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(interactive):1:4: boom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 1 | (do (enforce false &quot;boom&quot;) (+ 1 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   |     ^^^^^^^^^^^^^^^^^^^^^^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error">error<a href="#error" class="hash-link" aria-label="Direct link to error" title="Direct link to error">​</a></h2>
<p>Use the <code>error</code> keyword to throw a recoverable error for a specified string expression.
This special form enables you to throw an error with a string return value that can be caught with a <code>try</code> expression.
The <code>error</code> form is particularly useful for typechecking expressions where an <code>(enforce false)</code> expression would not suffice because the return type for an <code>(enforce false)</code> expression is always boolean value.
With the <code>error</code> special form, you can force an error that satisfies any type signature.
The <code>error</code> special form is also useful when you only want to implement specific parts of an interface.
For example, assume you have an interface defined as follows:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(interface implement-me</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun foo:integer ())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun bar:decimal ())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you only want to implement the <code>foo</code> function in your module, you can use the <code>error</code> special form like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module implementor GOV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defcap GOV:unit () (error “non-upgradable”)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (implements implement-me)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun foo:integer () 123)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun bar:decimal () (error “I do not want to implement this”)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>error</code> special form is essentially ⊥-elimination for Pact and is supported in Pact 5.3, and later.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-9">Basic syntax<a href="#basic-syntax-9" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To throw an error for the specified string <code>expression</code>, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(error expression)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-9">Examples<a href="#examples-9" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates using the <code>error</code> special form to force errors in a <code>.repl</code> file:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (interface foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (defun f:integer (x:integer))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (module uses-error g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (defcap g:bool () (error &quot;not upgradable&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (defun f:integer (x:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (error &quot;not-callable&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (expect-failure &quot;uses-error typechecks&quot; &quot;not-callable&quot; (uses-error.f 1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (expect-failure &quot;uses-error cannot acquire admin&quot; &quot;not upgradable&quot; (acquire-module-admin uses-error))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can execute the <code>error</code> test cases by running the following command:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact error-special-form.repl --trace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The tests produce the following output:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:0:0-0:10:Trace: &quot;Begin Tx 0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:1:2-3:3:Trace: Loaded interface foo, hash oYo76TzdQMOX1LiyHOYqJRxBsVq4iq7PPXIUEoMj-Kg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:5:2-10:5:Trace: Loaded module uses-error, hash flArwZWZKnv3fGIF5JcnRv2AiQ8vz92n0LZ18Y_cQuU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:12:4-12:76:Trace: &quot;Expect failure: Success: uses-error typechecks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:13:0-13:11:Trace: &quot;Commit Tx 0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:15:0-15:10:Trace: &quot;Begin Tx 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:16:2-16:103:Trace: &quot;Expect failure: Success: uses-error cannot acquire admin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error-special-form.repl:17:0-17:11:Trace: &quot;Commit Tx 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implements">implements<a href="#implements" class="hash-link" aria-label="Direct link to implements" title="Direct link to implements">​</a></h2>
<p>Use the <code>implements</code> keyword to specify that a module <em>implements</em> the specified <code>interface</code>.
This keyword requires the module to implement all of the functions, defpacts, and capabilities that are specified in the interface with identical signatures, including the same argument names and declared types.</p>
<p>A module that implements an interface can be used as a <a href="/docs/smart-contracts/modules#module-references">module reference</a> for the specified interfaces.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-10">Basic syntax<a href="#basic-syntax-10" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To implement an interface in a module, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(implements interface)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interface">interface<a href="#interface" class="hash-link" aria-label="Direct link to interface" title="Direct link to interface">​</a></h2>
<p>Use the <code>interface</code> keyword to define and install an interface with the specified <code>name</code> and optional documentation or metadata.</p>
<p>The <code>body</code> of the interface is composed of definitions that will be scoped in the module.
Valid expressions in a module include the following:</p>
<ul>
<li><a href="/docs/reference/syntax#defun">defun</a></li>
<li><a href="/docs/reference/syntax#defconst">defconst</a></li>
<li><a href="/docs/reference/syntax#defschema">defschema</a></li>
<li><a href="/docs/reference/syntax#defpact">defpact</a></li>
<li><a href="/docs/reference/syntax#defcap">defcap</a></li>
<li><a href="/docs/reference/syntax#use">use</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-11">Basic syntax<a href="#basic-syntax-11" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define an interface, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(interface name [doc-or-metadata] body ...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-10">Examples<a href="#examples-10" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates defining the <code>coin-sig</code> interface with documentation:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(interface coin-sig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;&#x27;coin-sig&#x27; represents the Kadena Coin Contract interface. This contract     \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \provides both the general interface for a Kadena&#x27;s token, supplying a   \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \transfer function, coinbase, account creation and balance query.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun create-account:string (account:string guard:guard)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Create an account for ACCOUNT, with GUARD controlling access to the  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    \account.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @model [ (property (not (= account &quot;&quot;))) ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun transfer:string (sender:string receiver:string amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Transfer AMOUNT between accounts SENDER and RECEIVER on the same    \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    \chain. This fails if either SENDER or RECEIVER does not exist.           \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    \Create-on-transfer can be done using the &#x27;transfer-and-create&#x27; function.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @model [ (property (&gt; amount 0.0))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             (property (not (= sender receiver)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun account-balance:decimal (account:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Check an account&#x27;s balance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @model [ (property (not (= account &quot;&quot;))) ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="let">let<a href="#let" class="hash-link" aria-label="Direct link to let" title="Direct link to let">​</a></h2>
<p>Use the <code>let</code> keyword to bind variables in pairs to over the scope of the code body.
In Pact 4, <code>let</code> declarations didn&#x27;t allow variables within bind-pairs to refer to previously-declared variables in the same declaration.
In Pact 4, you could use the <code>let*</code> form to enable variables to reference previously-declared variables in the same <code>let</code> declaration.
In Pact 5, the  <code>let*</code> keyword is deprecated and you can replace all <code>let*</code> declarations with <code>let</code> declarations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-12">Basic syntax<a href="#basic-syntax-12" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To bind a variable to a value, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(let (bind-pair [bind-pair [...]]) body)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-11">Examples<a href="#examples-11" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates binding variables to values in a <code>let</code> declaration:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact &gt; (let ((x 2) (y 5)) (* x y))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates referencing a previously-declared variable in the same <code>let</code> declaration in Pact 5:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(let ((x 2) (y (* x 10)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(+ x y))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="let-1">let*<a href="#let-1" class="hash-link" aria-label="Direct link to let*" title="Direct link to let*">​</a></h2>
<p>Use the <code>let*</code> keyword to bind variables in pairs over the scope of the code <code>body</code>.
In Pact 4, this form of the keyword enables variables to reference previously-declared variables in the same <code>let</code> declaration.
In Pact 5, this form is deprecated and you can replace all let* declarations with <code>let</code> declarations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-13">Basic syntax<a href="#basic-syntax-13" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To bind a variable to a value, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(let* (bind-pair [bind-pair [...]]) body)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-12">Examples<a href="#examples-12" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates referencing a previously-declared variable in the same <code>let*</code> declaration:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(let* ((x 2) (y (* x 10)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(+ x y))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-prefix-">Metadata prefix (@)<a href="#metadata-prefix-" class="hash-link" aria-label="Direct link to Metadata prefix (@)" title="Direct link to Metadata prefix (@)">​</a></h2>
<p>As several examples demonstrate in this section, you can often embed optional documentation strings in code blocks that use reserved keywords like <code>defun</code> and <code>deftable</code> like this:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun average (a b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;take the average of a and b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (/ (+ a b) 2))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also add metadata by using the <code>@</code>-prefix.
Supported metadata fields include:</p>
<ul>
<li><code>@doc</code> to provide a documentation string.</li>
<li><code>@event</code> to emit an event.</li>
<li><code>@managed</code> to manage specific data associated with a capability.</li>
<li><code>@model</code> to specify a property that can be checked for correctness in format verification.</li>
</ul>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun average (a b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @doc   &quot;take the average of a and b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (/ (+ a b) 2))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Embedded documentation strings like <code>&quot;Row type for accounts table.&quot;</code> are just a short form of <code>@doc</code> metadata.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="module">module<a href="#module" class="hash-link" aria-label="Direct link to module" title="Direct link to module">​</a></h2>
<p>Use the <code>module</code> keyword to define and install a module with the specified <code>name</code> that is governed by the specified <code>keyset-or-governance</code>, with optional documentation or metadata.</p>
<p>If the <code>keyset-or-governance</code> is a string, the string represents a keyset that has been installed with the <code>define-keyset</code> function that will be checked whenever module administrative privileges are required.
If <code>keyset-or-governance</code> is an unqualified <a href="/docs/reference/syntax#atoms">atom</a>, it represents a <code>defcap</code> capability that will be acquired if module administrative privileges are requested.</p>
<p>The body of a module is composed of definitions are scoped to the module.
A module can include the following types of declarations:</p>
<ul>
<li><a href="/docs/reference/syntax#defun">defun</a></li>
<li><a href="/docs/reference/syntax#defpact">defpact</a></li>
<li><a href="/docs/reference/syntax#defcap">defcap</a></li>
<li><a href="/docs/reference/syntax#deftable">deftable</a></li>
<li><a href="/docs/reference/syntax#defschema">defschema</a></li>
<li><a href="/docs/reference/syntax#defconst">defconst</a></li>
<li><a href="/docs/reference/syntax#implements">implements</a></li>
<li><a href="/docs/reference/syntax#use">use</a></li>
<li><a href="/docs/reference/syntax#bless">bless</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-14">Basic syntax<a href="#basic-syntax-14" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a module, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module name keyset-or-governance [doc-or-metadata] body...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-13">Examples<a href="#examples-13" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates a defining the <code>accounts</code> module with a keyset and two functions:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module accounts &#x27;accounts-admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Module for interacting with accounts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun create-account (id bal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Create account ID with initial balance BAL&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (insert accounts id { &quot;balance&quot;: bal }))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun transfer (from to amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Transfer AMOUNT from FROM to TO&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (with-read accounts from { &quot;balance&quot;: fbal }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (enforce (&lt;= amount fbal) &quot;Insufficient funds&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (with-read accounts to { &quot;balance&quot;: tbal }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (update accounts from { &quot;balance&quot;: (- fbal amount) })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (update accounts to { &quot;balance&quot;: (+ tbal amount) }))))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pure">pure<a href="#pure" class="hash-link" aria-label="Direct link to pure" title="Direct link to pure">​</a></h2>
<p>Use the <code>pure</code> keyword to evaluate a specified <code>expression</code> in read-only mode.
With this special form, the <code>expression</code> being evaluated cannot write to the database.</p>
<p>For example, the following code defines a function that calls a function in a downstream module to get account details:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun details(account:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Call the downstream module dependency to get account info&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (my-dependency.get-account-details account)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If this <code>my-dependency.get-account-details</code> function includes code that modifies its own database or calls back into the calling module, the function call could make the <code>details</code> function vulnerable to unexpected behavior or a reentry attack.
However, if you modify the <code>details</code> function to use the <code>pure</code> special form, you can ensure that the <code>my-dependency.get-account-details account</code> call can&#x27;t modify the Pact database:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun details(account:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Call the downstream module dependency to get account info&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (pure (my-dependency.get-account-details account))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With this code, the call to the downstream module expression—enclosed in (pure ..) statement—can&#x27;t update any data in the calling module.
If the downstream module function attempts to perform an operation that&#x27;s not allowed, the operation will fail with a transaction-ending error.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-15">Basic syntax<a href="#basic-syntax-15" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To evaluate a specified <code>expression</code> without allowing database writes, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(pure expression)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-14">Examples<a href="#examples-14" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example demonstrates that the <code>pure</code> special form can be used to evaluate an expression, but can&#x27;t be used to write to a database table:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(module read-only-test g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defcap g () true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema sc a:integer b:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable tbl:{sc})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defcap ENFORCE_ME (a:integer) true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun write-entry (key:string a:integer b:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (write tbl key {&quot;a&quot;:a, &quot;b&quot;:b})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun read-entry (key:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (read tbl key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun write-then-read (key:string a:integer b:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (write-entry key a b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (read-entry key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun errors-on-write (key:string a:integer b:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (pure (write-then-read key a b))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(typecheck &quot;read-only-test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(create-table tbl)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect &quot;Writes and reads work&quot; {&quot;a&quot;:1, &quot;b&quot;:&quot;v&quot;} (write-then-read &quot;key&quot; 1 &quot;v&quot;) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect-failure &quot;Writes do not work in read-only mode&quot; (errors-on-write &quot;key&quot; 1 &quot;v&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(expect &quot;Only reads work in read-only mode&quot; {&quot;a&quot;:1, &quot;b&quot;:&quot;v&quot;} (pure (read-entry &quot;key&quot;)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can execute the <code>pure</code> test cases by running <code>pact pure-special-form.repl --trace</code> to produce the following output:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:0:0-0:10:Trace: &quot;Begin Tx 0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:1:0-25:3:Trace: Loaded module read-only-test, hash 32oanTfcea9Wp4Haq5yj0Wk_rcGxzNbuHXOUkmJnVNE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:27:0-27:28:Trace: Typechecking successful for module read-only-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:29:0-29:18:Trace: &quot;TableCreated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:31:0-31:80:Trace: &quot;Expect: success Writes and reads work&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:32:0-32:85:Trace: &quot;Expect failure: Success: Writes do not work in read-only mode&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:33:0-33:87:Trace: &quot;Expect: success Only reads work in read-only mode&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pure-special-form.repl:34:0-34:11:Trace: &quot;Commit Tx 0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step">step<a href="#step" class="hash-link" aria-label="Direct link to step" title="Direct link to step">​</a></h2>
<p>Use the <code>step</code> keyword to define a step within a <a href="/docs/reference/syntax#defpact">defpact</a>, such that any prior steps will be executed in prior transactions, and later steps in later transactions.
You can include an <code>entity</code> argument to indicate that a specific step is intended for confidential transactions. With this argument, only the specified <code>entity</code> would execute the step, and other participants would skip the execution of the step.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-16">Basic syntax<a href="#basic-syntax-16" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a step in a <code>defpact</code>, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(step expression)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(step entity expression)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-15">Examples<a href="#examples-15" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates a <code>defpact</code> for depositing funds with two <code>step</code> transactions:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defpact deposit(sender:string receiver:string guard:guard amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Deposit KDA from L1 to L2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (with-capability (LOCK_DEPOSIT sender)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (let ((deposit-details:object{deposit-schema}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &#x27;receiver : receiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            , &#x27;amount   : amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            , &#x27;guard    : guard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (lock-deposit sender amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (enforce (validate-principal guard receiver) &quot;Guard must be a principal&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (yield deposit-details &quot;crossnet:L2.2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (resume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { &#x27;receiver := receiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        , &#x27;amount   := amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        , &#x27;guard    := guard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (claim-deposit receiver guard amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-with-rollback">step-with-rollback<a href="#step-with-rollback" class="hash-link" aria-label="Direct link to step-with-rollback" title="Direct link to step-with-rollback">​</a></h2>
<p>Use the <code>step-with-rollback</code> keyword to define a step within a <a href="/docs/reference/syntax#defpact">defpact</a> similar to using the step keyword except that you specify a <code>rollback-expression</code>.
If you include an <code>entity</code> argument, the <code>rollback-expression</code> is only be executed upon failure of a subsequent step, as part of a reverse-sequence &quot;rollback cascade&quot; going back from the step that failed to the first step.
Without the <code>entity</code> argument, the <code>rollback-expression</code> acts as a cancel function that is be explicitly executed by a participant.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-17">Basic syntax<a href="#basic-syntax-17" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To define a step in a <code>defpact</code>, use the following syntax model:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(step-with-rollback expression rollback-expression)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(step-with-rollback entity expression rollback-expression)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-16">Examples<a href="#examples-16" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates a <code>defpact</code> for offering a token for sale with one <code>step-with-rollback</code>:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defpact sale:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ( id:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      seller:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      amount:decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (step-with-rollback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;; Step 0: offer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (let ((token-info (get-token-info id)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (with-capability (OFFER-CALL id seller amount timeout (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (marmalade-v2.policy-manager.enforce-offer token-info seller amount timeout (pact-id)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (with-capability (SALE id seller amount timeout (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (offer id seller amount))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (pact-id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;; Step 0, rollback: withdraw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (let ((token-info (get-token-info id)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (with-capability (WITHDRAW-CALL id seller amount timeout (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (marmalade-v2.policy-manager.enforce-withdraw token-info seller amount timeout (pact-id)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (with-capability (WITHDRAW id seller amount timeout (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (withdraw id seller amount))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (pact-id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;; Step 1: buy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (let ( (buyer:string (read-msg &quot;buyer&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              (buyer-guard:guard (read-msg &quot;buyer-guard&quot;)) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (with-capability (BUY-CALL id seller buyer amount (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (marmalade-v2.policy-manager.enforce-buy (get-token-info id) seller buyer buyer-guard amount (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (with-capability (BUY id seller buyer amount (pact-id))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (buy id seller buyer buyer-guard amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (pact-id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use">use<a href="#use" class="hash-link" aria-label="Direct link to use" title="Direct link to use">​</a></h2>
<p>Use the <code>use</code> keyword to import the specified <code>module</code> into a namespace.
This keyword is only valid at the top-level of a contract or within a module declaration.
The specified <code>module</code> can be a string, symbol, or bare atom.</p>
<p>You specify the <code>hash</code> argument to validate that the imported module&#x27;s hash matches specified <code>hash</code> and fail if the hashes are not the same.
You can use the <a href="/docs/pact-5/database/describe-module">describe-module</a> function to query for the hash of a loaded module on the chain.</p>
<p>You can also specify an optional list of <code>imports</code> consisting of function, constant, and schema names to import from the specified <code>module</code>.
If you explicitly define the function, constant, and schema names to import, only the listed items are available for you to use in the module body.
If you don&#x27;t specify an import list, then every name in the imported module is brought into scope.
If two modules are defined in the same transaction, all names are in scope for both modules, and the import behavior defaults to the entire module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-18">Basic syntax<a href="#basic-syntax-18" class="hash-link" aria-label="Direct link to Basic syntax" title="Direct link to Basic syntax">​</a></h3>
<p>To import a specified module, use the following syntax models:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(use module)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(use module hash)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(use module imports)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(use module hash imports)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-17">Examples<a href="#examples-17" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following example illustrates importing all of the definitions from the <code>accounts</code> module and using the <code>transfer</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(use accounts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(transfer &quot;123&quot; &quot;456&quot; 5 (time &quot;2016-07-22T11:26:35Z&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates importing all of the definitions from a specific version of <code>accounts</code> module with the hash <code>&quot;ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s&quot;</code> and using the <code>transfer</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(use accounts &quot;ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(transfer &quot;123&quot; &quot;456&quot; 5 (time &quot;2016-07-22T11:26:35Z&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates importing only the <code>transfer</code> and <code>example-fun</code> definitions from the <code>accounts</code> module and using the <code>transfer</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(use accounts [ transfer example-fun ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(transfer &quot;123&quot; &quot;456&quot; 5 (time &quot;2016-07-22T11:26:35Z&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example illustrates importing only the <code>transfer</code> and <code>example-fun</code> definitions from a specific version of <code>accounts</code> module with the hash <code>&quot;ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s&quot;</code> and using the <code>transfer</code> function:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(use accounts &quot;ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s&quot; [ transfer example-fun ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(transfer &quot;123&quot; &quot;456&quot; 5 (time &quot;2016-07-22T11:26:35Z&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expressions">Expressions<a href="#expressions" class="hash-link" aria-label="Direct link to Expressions" title="Direct link to Expressions">​</a></h2>
<p>Expressions can be literals, atoms, s-expressions, or references.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="atoms">Atoms<a href="#atoms" class="hash-link" aria-label="Direct link to Atoms" title="Direct link to Atoms">​</a></h3>
<p>Atoms are non-reserved barewords that start with a letter or allowed symbol, and contain letters, digits, and allowed symbols.
Allowed symbols are <code>%#+-_&amp;$@&lt;&gt;=?*!|/</code>.
Atoms must resolve to a variable bound by one of the following:</p>
<ul>
<li><a href="/docs/reference/syntax#defun">defun</a> definition.</li>
<li><a href="/docs/reference/syntax#defpact">defpact</a> definition.</li>
<li><a href="/docs/reference/syntax#bindings">bindings</a> form.</li>
<li><a href="/docs/reference/syntax#lambdas">lambda</a> form.</li>
<li>Symbols imported into the namespace with <a href="/docs/reference/syntax#use">use</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s-expressions">S-expressions<a href="#s-expressions" class="hash-link" aria-label="Direct link to S-expressions" title="Direct link to S-expressions">​</a></h3>
<p>S-expressions are formed with parentheses, with the first atom determining if the expression is a special form with a reserved keyword or a function application.
If the expression is a function application, the first atom must refer to a definition.</p>
<p>An application with less than the required arguments is in some contexts a valid <em>partial application</em> of the function.
However, this is only supported in a limited number of Pact functions, such the <code>map</code>, <code>fold</code>, and <code>filter</code> functions.
With these functions, the list item can be appended to the application arguments to serially execute the function.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(map (+ 2) [1 2 3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(fold (+) &quot;&quot; [&quot;Concatenate&quot; &quot; &quot; &quot;me&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using a partial application with most functions results in a runtime error.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h3>
<p>References are multiple atoms joined by a dot <code>.</code> that directly resolve to definitions found in other modules.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact &gt; accounts.transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;(defun accounts.transfer (src,dest,amount,date) \&quot;transfer AMOUNT from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRC to DEST\&quot;)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Eval failure:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transfer&lt;EOF&gt;: Cannot resolve transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (use &#x27;accounts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Using \&quot;accounts\&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; transfer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;(defun accounts.transfer (src,dest,amount,date) \&quot;transfer AMOUNT from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SRC to DEST\&quot;)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>References are preferred over <code>use</code> for transactions because references resolve faster.
However, when defining a module, <code>use</code> is preferred for legibility.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/pact">pact</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/language-reference">language reference</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/syntax">syntax</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/syntax.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pact-5/func-quick-ref"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Function quick reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#text-strings" class="table-of-contents__link toc-highlight">Text strings</a></li><li><a href="#symbols" class="table-of-contents__link toc-highlight">Symbols</a></li><li><a href="#integers" class="table-of-contents__link toc-highlight">Integers</a></li><li><a href="#decimals" class="table-of-contents__link toc-highlight">Decimals</a></li><li><a href="#booleans" class="table-of-contents__link toc-highlight">Booleans</a></li><li><a href="#lists" class="table-of-contents__link toc-highlight">Lists</a></li><li><a href="#objects" class="table-of-contents__link toc-highlight">Objects</a></li><li><a href="#bindings" class="table-of-contents__link toc-highlight">Bindings</a></li><li><a href="#lambdas" class="table-of-contents__link toc-highlight">Lambdas</a></li><li><a href="#type-specifiers" class="table-of-contents__link toc-highlight">Type specifiers</a></li><li><a href="#schema-type-literals" class="table-of-contents__link toc-highlight">Schema type literals</a></li><li><a href="#module-type-literals" class="table-of-contents__link toc-highlight">Module type literals</a></li><li><a href="#dereference-operator" class="table-of-contents__link toc-highlight">Dereference operator</a></li><li><a href="#bless" class="table-of-contents__link toc-highlight">bless</a></li><li><a href="#cond" class="table-of-contents__link toc-highlight">cond</a></li><li><a href="#defcap" class="table-of-contents__link toc-highlight">defcap</a></li><li><a href="#defconst" class="table-of-contents__link toc-highlight">defconst</a></li><li><a href="#defun" class="table-of-contents__link toc-highlight">defun</a></li><li><a href="#defpact" class="table-of-contents__link toc-highlight">defpact</a></li><li><a href="#defschema" class="table-of-contents__link toc-highlight">defschema</a></li><li><a href="#deftable" class="table-of-contents__link toc-highlight">deftable</a></li><li><a href="#do" class="table-of-contents__link toc-highlight">do</a></li><li><a href="#error" class="table-of-contents__link toc-highlight">error</a></li><li><a href="#implements" class="table-of-contents__link toc-highlight">implements</a></li><li><a href="#interface" class="table-of-contents__link toc-highlight">interface</a></li><li><a href="#let" class="table-of-contents__link toc-highlight">let</a></li><li><a href="#let-1" class="table-of-contents__link toc-highlight">let*</a></li><li><a href="#metadata-prefix-" class="table-of-contents__link toc-highlight">Metadata prefix (@)</a></li><li><a href="#module" class="table-of-contents__link toc-highlight">module</a></li><li><a href="#pure" class="table-of-contents__link toc-highlight">pure</a></li><li><a href="#step" class="table-of-contents__link toc-highlight">step</a></li><li><a href="#step-with-rollback" class="table-of-contents__link toc-highlight">step-with-rollback</a></li><li><a href="#use" class="table-of-contents__link toc-highlight">use</a></li><li><a href="#expressions" class="table-of-contents__link toc-highlight">Expressions</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>