<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/marmalade/token-standard-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Token standard architecture | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/reference/marmalade/token-standard-architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Token standard architecture | Kadena Docs"><meta data-rh="true" name="description" content="Build a non-fungible token (NFT) marketplace using the Marmalade token standard and Pact smart contracts."><meta data-rh="true" property="og:description" content="Build a non-fungible token (NFT) marketplace using the Marmalade token standard and Pact smart contracts."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/reference/marmalade/token-standard-architecture"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/reference/marmalade/token-standard-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/reference/marmalade/token-standard-architecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Token standard architecture</h1></header>
<p>Marmalade contracts define a poly-fungible token standard and token policy management for the Kadena blockchain.
These contracts provide interfaces for defining, minting, and managing digital items like non-fungible tokens and token collections using Pact smart contracts on the Kadena network.</p>
<p>The Marmalade token standard architecture depends on several smart contracts that enable you to manage how tokens are minted, offered for sale, and transferred between accounts.
This multi-layered contract architecture simplifies how you create and manage tokens, define marketplace policies, and implement common token features.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-contracts">Core contracts<a href="#core-contracts" class="hash-link" aria-label="Direct link to Core contracts" title="Direct link to Core contracts">​</a></h2>
<p>The Marmalade contract architecture provides separate contracts to handle specific tasks.
For example, there are separate contracts for managing policies applied to token and for managing auction rules for token sales.
This architecture ensures that functions are called in the correct order to complete multi-step transactions.</p>
<p>At a high level, the Marmalade architecture consists of the following main contracts:</p>
<ul>
<li>
<p>The Marmalade <strong>ledger</strong> (<code>marmalade-v2.ledger</code>) contract provides the core functionality of the marketplace with the ability to create, mint, burn, transfer, buy, and sell tokens.</p>
</li>
<li>
<p>The Marmalade <strong>policy manager</strong> (<code>marmalade-v2.policy-manager</code>) contract enables token creators to configure rules to control token properties and allowed operations.</p>
</li>
<li>
<p>Marmalade <strong>sale</strong> (<code>marmalade-v2.sale-contracts</code>) contracts enable tokens to be offered for sale using sales models that don&#x27;t rely on a fixed price.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-contract">Ledger contract<a href="#ledger-contract" class="hash-link" aria-label="Direct link to Ledger contract" title="Direct link to Ledger contract">​</a></h2>
<p>The Marmalade ledger contract—<code>marmalade-v2.ledger</code>—is the primary contract that enables buyers and sellers use to interact with the marketplace.
This contract keeps track of important information for everyone participating in the marketplace and records every transaction that takes place involving tokens minted with Marmalade.
The ledger stores information about tokens, including the token metadata, the policies associated with the token, and the record of token ownership.
The main functions in the ledger contract are</p>
<p>The Marmalade Ledger plays a central role in enabling you to manage the lifecycle of non-fungible tokens and other digital assets.
The ledger contract provides the core functions—such as <code>create-token</code>, <code>mint</code>, <code>burn</code>, <code>transfer</code>, and <code>sale</code>—that are required to create, transfer, and track the ownership of tokens.
The ledger contract ensures that all token-related activity is recorded accurately and securely in a transparent, traceable, and tamper-proof way.</p>
<p>The ledger contract defines the tables and schemas to store information about accounts and tokens.
The ledger contract also defines specific <strong>capabilities</strong> to perform specific actions and enforce specific conditions when those actions are performed.
The tables, schemas, and capabilities defined in the ledger contract ensure that token creators, token owners, and token buyers comply with predefined rules and constraints when they interact.</p>
<p>By enforcing rules and constraints through token policies, Marmalade promotes more secure and trustworthy transactions for all marketplace participants.</p>
<p>For more technical information about the Marmalade ledger contract, see <a href="/docs/reference/marmalade/ledger">Ledger contract</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policy-manager">Policy manager<a href="#policy-manager" class="hash-link" aria-label="Direct link to Policy manager" title="Direct link to Policy manager">​</a></h2>
<p>The Marmalade policy manager contract—<code>marmalade-v2.policy-manager</code>—enables token creators to select multiple policies to configure the specific token features they want to implement.
The policy manager acts as a middle layer between the ledger and the individual policies applied to a token.</p>
<p>The policy manager gives token creators greater flexibility in defining rules for transferring ownership and managing transactions between buyers and sellers.
For example, it&#x27;s the policy manager contract that enables a sale to require a secure escrow account to complete a token transfer or to guarantee royalty payments.</p>
<p>The following diagram provides a simplified view of how the policy manager contract acts as a middle layer between the ledger contract and policies applied to a token in the token creation process:</p>
<p><img decoding="async" loading="lazy" alt="Contract workflow to mint a token" src="/docs/assets/images/mint_flow-f60d5fb49f15ca0522674d3023ef194d.png" width="1180" height="341" class="img_ev3q"></p>
<p>By using the policy manager contract, you can standardize the rules for creating asset properties, collecting payments, and transferring ownership within a marketplaces, providing a more consistent experience for marketplace participants.</p>
<p>With the policy manager contract, you can choose token properties from built-in policies—like the non-fungible policy and royalty policy—or create custom policies to use on their own or in combination with the built-in policies.</p>
<p>For more technical details about the Marmalade policy manager contract, see <a href="/docs/reference/marmalade/policy-manager">Policy manager contract</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sales-specific-contracts">Sales-specific contracts<a href="#sales-specific-contracts" class="hash-link" aria-label="Direct link to Sales-specific contracts" title="Direct link to Sales-specific contracts">​</a></h2>
<p>Marmalade supports sales-specific contracts to provide flexibility for how tokens can be sold.
Sales-specific contracts allow you to define different sales models with different sales mechanics—like auctions or limited offering periods—instead of simply quoting an asking price.</p>
<p>When you offer a token for sale in the ledger, you can provide a reference to a specific contract that defines the rules for the sale.
For example, the sale contract you reference might have auction rules that specify an opening price and how to handle incoming bids.
Depending on the rules defined in the referenced sale contract, the policy manager contract updates the final price of the quote during the buy process.</p>
<p>By using a separate contract to define and manage the mechanics of the sales process, you can ensure that buyers and sellers can participate safely without compromising royalty payments.
It&#x27;s important to note that contracts that define a sales model—the sale contract—must be reviewed and registered in the policy manager so that the policy manager can enforce the contract rules.</p>
<p>The following diagram provides a simplified view of the interaction between the ledger, policy manager, and a sale contract:</p>
<p><img decoding="async" loading="lazy" alt="Contract interaction using a sale contract" src="/docs/assets/images/offer-sale-contracts-workflow-33c92a71d20d4d2fe1ed611bb44c64bd.png" width="1180" height="445" class="img_ev3q"></p>
<p>For information about registered sales-specific contracts, see the <a href="/docs/reference/marmalade/conventional-sale">conventional sale</a> and <a href="/docs/reference/marmalade/dutch-sale">dutch sale</a> contract reference.
For more information about how to implement the sale contract interface or create a custom sale contract, see <a href="/docs/reference/marmalade/custom-sale">Custom sales contracts</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policies">Policies<a href="#policies" class="hash-link" aria-label="Direct link to Policies" title="Direct link to Policies">​</a></h2>
<p>Individual policies give you granular control over token properties and token-related activity, including minting, burning, transferring, and buying tokens.
Token policies are implemented as smart contracts based on the interfaces defined in the <a href="https://github.com/kadena-io/marmalade/blob/main/pact/kip/token-policy-v2.pact" target="_blank" rel="noopener noreferrer"><code>kip.token-policy-v2</code></a> standard.
There are several built-in policies—called <strong>concrete policies</strong>—that are configured to handle the most common marketplace use cases.</p>
<p>The built-in concrete policies are officially released and maintained to provide ready-to-use implementations of common features that don&#x27;t require any custom development work.</p>
<p>The concrete policies currently available provide the following features:</p>
<ul>
<li>Guard enforcement policy.
If the <code>guard-policy</code> is applied to a token, a keyset or another type of guard must be specified to initiate any token-related activity, bolstering security against unauthorized minting.</li>
<li>Non-fungible token enforcement policy.
If the <code>non-fungible-policy</code> is applied to a token, the token is guaranteed to be unique with a maximum supply of one and precision set to zero.</li>
<li>Royalty enforcement policy.
If the <code>royalty-policy</code> is applied to a token, you can designate an account to receive royalties each time the token is transferred to a new owner, fostering an ongoing revenue stream from NFT sales.</li>
<li>Collection identification policy.
If the <code>collection-policy</code> is applied to a token, the token is identified as part of a collection and can be discovered as an item in a toke list.</li>
</ul>
<p>You can also create <strong>custom policies</strong> to implement unique rules or enforce specific behavior not covered by the concrete policies.
You can find examples of custom policies in the <a href="https://github.com/kadena-io/marmalade/tree/main/examples/policies" target="_blank" rel="noopener noreferrer">examples/policies</a> repository.</p>
<p>Example policies aren&#x27;t officially released and maintained, but can be useful models for developing your own custom policies.
If an example or custom policy seems broadly useful to a general audience, it can be promoted to a concrete policy, contributing to the overall evolution of the Marmalade marketplace.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/marmalade/token-standard-architecture.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#core-contracts" class="table-of-contents__link toc-highlight">Core contracts</a></li><li><a href="#ledger-contract" class="table-of-contents__link toc-highlight">Ledger contract</a></li><li><a href="#policy-manager" class="table-of-contents__link toc-highlight">Policy manager</a></li><li><a href="#sales-specific-contracts" class="table-of-contents__link toc-highlight">Sales-specific contracts</a></li><li><a href="#policies" class="table-of-contents__link toc-highlight">Policies</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>