<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-coding-projects/loans" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Loans in multiple tables | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/coding-projects/loans"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Loans in multiple tables | Kadena Docs"><meta data-rh="true" name="description" content="Learn how to build smart contracts that allow users to create, distribute, and manage loan information."><meta data-rh="true" property="og:description" content="Learn how to build smart contracts that allow users to create, distribute, and manage loan information."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/coding-projects/loans"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/loans" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/loans" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/smart-contract-dev">Smart contracts</a><button aria-label="Expand sidebar category &#x27;Smart contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/coding-projects/coding-projects">Coding projects</a><button aria-label="Collapse sidebar category &#x27;Coding projects&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/hello-world">Hello world, revisited</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/transfers">Simple payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/rotate-auth">Rotate authorized keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/contract-interactions">Contract interactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/gas-station">Gas station accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/coding-projects/loans">Loans in multiple tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/local-testing">Local testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/estimate-gas">Estimate gas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/pact-server-api">Pact built-in server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/conditions-control">Conditions and control flow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/coding-projects/coding-projects"><span itemprop="name">Coding projects</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Loans in multiple tables</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Loans in multiple tables</h1></header>
<p>The <em>Loans and database management</em> project is designed to demonstrate working with multiple tables and writing more complex functions to build more complete applications.
For this project, you&#x27;ll build a smart contract with tables for adding and manipulating loan information with secure interactions for module administrators.</p>
<p>For this project, you&#x27;ll create three tables in the <code>loans</code> module:</p>
<ul>
<li>A <code>loans</code> table for storing loan holder information.</li>
<li>A <code>loan-history</code> table for tracking loan history.</li>
<li>A <code>loan-inventory</code> table for holding the loan inventory balance.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Loans project overview" src="/docs/assets/images/loans-overview-1ca0947bafd79621f072b835f50c26be.jpg" width="1070" height="640" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin">Before you begin<a href="#before-you-begin" class="hash-link" aria-label="Direct link to Before you begin" title="Direct link to Before you begin">​</a></h2>
<p>Before starting this project, verify your environment meets the following basic requirements:</p>
<ul>
<li>You have a GitHub account and can run <code>git</code> commands.</li>
<li>You have installed the <a href="/docs/smart-contracts/install">Pact</a> programming language and command-line interpreter.</li>
<li>You have installed the <a href="/docs/smart-contracts/install/tooling#kadena-command-line-interface"><code>kadena-cli</code></a> package and have a working directory with initial configuration settings.</li>
<li>You have a <a href="/docs/smart-contracts/install/local-dev-node">local development</a> node that you can connect to that runs the <code>chainweb-node</code> program, either in a Docker container or on a physical or virtual computer.</li>
<li>You must have at least one <a href="/docs/guides/accounts/howto-fund-accounts">account</a> that&#x27;s funded with KDA on at least one chain for deployment on the local development network or the Kadena test network.</li>
<li>You should be familiar with the basics for defining <a href="/docs/smart-contracts/modules">modules</a> and using keysets.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-starter-code">Get the starter code<a href="#get-the-starter-code" class="hash-link" aria-label="Direct link to Get the starter code" title="Direct link to Get the starter code">​</a></h2>
<p>To get started:</p>
<ol>
<li>
<p>Open a terminal shell on your computer.</p>
</li>
<li>
<p>Clone the <code>pact-coding-projects</code> repository by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/kadena-docs/pact-coding-projects.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Change to the <code>05-loans</code> directory by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd pact-coding-projects/05-loans</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you list the contents of this directory, you&#x27;ll see the following files:</p>
<ul>
<li><code>starter-loans.pact</code> provides a starting point with the framework for building the <code>loans</code> module.</li>
<li><code>project-steps</code> provides solutions and test cases for completing each part of the coding project.</li>
<li><code>finished-contracts</code> provides the final code for the <code>loans.pact</code> module and the final <code>loans.repl</code> test cases for verifying module functions.</li>
</ul>
</li>
<li>
<p>Open and review the <code>starter-loans.pact</code> file.</p>
<p>This file outlines the tasks you need to complete for the <em>Loans</em> project.
Follow the embedded instructions to work through the coding challenges on your own or use the detailed instructions and code provided in the next sections.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-module-and-keyset">Define the module and keyset<a href="#define-the-module-and-keyset" class="hash-link" aria-label="Direct link to Define the module and keyset" title="Direct link to Define the module and keyset">​</a></h2>
<p>As you might have seen in other coding projects, the first step in creating a new module requires defining or identifying a namespace and an administrative owner for the module.</p>
<p>To start the module declaration:</p>
<ol>
<li>
<p>Open the <code>starter-loans.pact</code> file in your code editor and save it as <code>loans.pact</code>.</p>
</li>
<li>
<p>Specify the namespace and a define a keyset for the module to use.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(namespace &quot;free&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-keyset &quot;free.loans-admin&quot; (read-keyset &quot;loan-admin-keyset&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Define the <code>loans</code> module governed by the <code>LOAN_ADMIN</code> capability and enforced to use the <code>free.loans-admin</code> keyset:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module loans LOAN_ADMIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (defcap LOAN_ADMIN ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (enforce-guard &quot;free.loans.loans-admin&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a <code>loans.repl</code> file in you code editor to prepare the environment for testing the <code>loans</code> module.</p>
<p>For example, add test keys and data to define the namespace in your working environment and to load the module:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-keys [&quot;loan-admin-keyset&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(env-data { &quot;loans-admin&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  { &quot;keys&quot;: [&quot;loan-admin-keyset&quot;], &quot;pred&quot;: &quot;keys-all&quot; } })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Define namespace&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (define-namespace &quot;free&quot; (read-keyset &quot;loans-admin&quot; ) (read-keyset &quot;loans-admin&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (load &quot;loans.pact&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-schemas-and-tables">Define the schemas and tables<a href="#define-the-schemas-and-tables" class="hash-link" aria-label="Direct link to Define the schemas and tables" title="Direct link to Define the schemas and tables">​</a></h2>
<p>To define the schemas and tables:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Define the <code>loan</code> schema and the table that uses the <code>loan</code> schema.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema loan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     loanName:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     entityName:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     loanAmount:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     status:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable loans:{loan})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Define the <code>loan-history</code> schema and the table that uses the <code>loan-history</code> schema.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema loan-history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     loanId:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     buyer:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     seller:string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     amount:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable loan-history-table:{loan-history})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Define the <code>loan-inventory</code> schema and the table that uses the <code>loan-inventory</code> schema.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defschema loan-inventory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    balance:integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (deftable loan-inventory-table:{loan-inventory})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-constants">Define constants<a href="#define-constants" class="hash-link" aria-label="Direct link to Define constants" title="Direct link to Define constants">​</a></h2>
<p>To define the constants for loan status:</p>
<ol>
<li>
<p>Define an <code>INITIATED</code> constant that contains the status description for loans that have been initiated using the &quot;initiated&quot; comment.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst INITIATED &quot;initiated&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Define an <code>ASSIGNED</code> constant that contains the status description for loans that have been assigned using the &quot;assigned&quot; comment.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst ASSIGNED &quot;assigned&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="define-functions">Define functions<a href="#define-functions" class="hash-link" aria-label="Direct link to Define functions" title="Direct link to Define functions">​</a></h2>
<p>For this coding project, the <code>loans</code> module provides nine functions to provide comprehensive features for loan management.
You can define them in any order.</p>
<ul>
<li><code>inventory-key</code> takes <code>loanId:string</code> and <code>owner:string</code>to create a composite key of <code>loanId:owner</code>.</li>
<li><code>create-a-loan</code> takes <code>loanId</code>, <code>loanName</code>, <code>entityName</code>, and <code>loanAmount</code> to create a loan entry.</li>
<li><code>assign-a-loan</code> takes <code>txid</code>, <code>loanId</code>, <code>buyer</code>, and <code>amount</code> to assign a loan.</li>
<li><code>sell-a-loan</code> takes <code>txid</code>, <code>loanId</code>, <code>buyer</code>, <code>seller</code>, and <code>amount</code> to sell a loan.</li>
<li><code>read-a-loan</code> takes <code>loanId</code> to read values from the <code>loans</code> table for a given <code>loanId</code>.</li>
<li><code>read-all-loans</code> select all values from the <code>loans</code> table with <code>constantly</code> set to true.</li>
<li><code>read-inventory-pair</code> takes <code>key</code> to set <code>inventory-key</code> and <code>balance</code> for the provided <code>key</code>.</li>
<li><code>read-loan-inventory</code> maps the value of <code>read-inventory-pair</code> to the keys of the <code>loan-inventory-table</code>.</li>
<li><code>read-loans-with-status</code> takes <code>status</code> to select all values from the <code>loans-table</code> where <code>status</code> equals the provided <code>status</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-inventory-key-function">Define the inventory-key function<a href="#define-the-inventory-key-function" class="hash-link" aria-label="Direct link to Define the inventory-key function" title="Direct link to Define the inventory-key function">​</a></h3>
<p>To define the <code>inventory-key</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>inventory-key</code> function definition with the keyword <code>defun</code> and add the parameters <code>loanId:string</code> <code>owner:string</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun inventory-key:string (loanId:string owner:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a composite key from the <code>owner</code> and <code>loanId</code> in the format <code>loanId:owner</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun inventory-key:string (loanId:string owner:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (format &quot;{}:{}&quot; [loanId owner])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-create-a-loan-function">Define the create-a-loan function<a href="#define-the-create-a-loan-function" class="hash-link" aria-label="Direct link to Define the create-a-loan function" title="Direct link to Define the create-a-loan function">​</a></h3>
<p>To define the <code>create-a-loan</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>create-a-loan</code> function with the parameters <code>loanId</code>, <code>loanName</code>, <code>entityName</code>, and <code>loanAmount</code>.</p>
</li>
<li>
<p>Insert the values for the new loan <code>loanId</code> into the <code>loans</code> table.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun create-a-loan:string (loanId:string loanName:string entityName:string loanAmount:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loans loanId {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;loanName&quot;:loanName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;entityName&quot;:entityName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;loanAmount&quot;:loanAmount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;status&quot;:INITIATED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Insert the values for a new loan into the <code>loan-inventory</code> table.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun create-a-loan:string (loanId:string loanName:string entityName:string loanAmount:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loans loanId {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;loanName&quot;:loanName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;entityName&quot;:entityName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;loanAmount&quot;:loanAmount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;status&quot;:INITIATED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loan-inventory-table (inventory-key:string loanId:string entityName:string){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;balance&quot;: loanAmount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-assign-a-loan-function">Define the assign-a-loan function<a href="#define-the-assign-a-loan-function" class="hash-link" aria-label="Direct link to Define the assign-a-loan function" title="Direct link to Define the assign-a-loan function">​</a></h3>
<p>To define the <code>assign-a-loan</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>assign-a-loan</code> function with the parameters <code>txid</code>, <code>loanId</code>, <code>buyer</code>, and <code>amount</code>.</p>
</li>
<li>
<p>Read from the <code>loans</code> table using <code>loanId</code> and bind variables to the column values.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun assign-a-loan:string (txid loanId buyer amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (with-read loans loanId {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;entityName&quot;:= entityName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;loanAmount&quot;:= issuerBalance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Insert values into <code>loan-history-table</code> using the value of the <code>txid</code> parameter.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loan-history-table txid {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;loanId&quot;:loanId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;buyer&quot;:buyer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;seller&quot;:entityName,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;amount&quot;:amount}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Insert values into the <code>loan-inventory-table</code> with the parameters <code>inventory-key</code>, <code>loanId</code>, and <code>buyer</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loan-inventory-table (inventory-key loanId buyer) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;balance&quot;:amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the <code>loan-inventory-table</code> for the row matching the parameters <code>inventory-key</code>, <code>loanId</code>, and <code>entityName</code> with the new balance of the issuer.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (update loan-inventory-table (inventory-key loanId entityName){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;balance&quot;: (- issuerBalance amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the <code>status</code> in the <code>loans</code> table for the specified <code>loanId</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (update loans-table loanId {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;status&quot;: ASSIGNED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>If you want to test the functions that you&#x27;ve defined so far, you can update the <code>loans.pact</code> file to create the tables and the <code>loans.repl</code> file with transactions that call the functions.
If you aren&#x27;t sure how to make these changes, continue defining the functions, then follow the steps in <a href="#test-functions-in-the-repl">Test functions in the REPL</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-sell-a-loan-function">Define the sell-a-loan function<a href="#define-the-sell-a-loan-function" class="hash-link" aria-label="Direct link to Define the sell-a-loan function" title="Direct link to Define the sell-a-loan function">​</a></h3>
<p>To define the <code>sell-a-loan</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>sell-a-loan</code> function with the parameters <code>txid</code>, <code>loanId</code>, <code>buyer</code>, <code>seller</code>, and <code>amount</code>.</p>
</li>
<li>
<p>Read from the <code>loan-inventory-table</code> table using the parameters <code>inventory-key</code>, <code>loanId</code>, and <code>seller</code> and bind <code>balance</code> to value of <code>prev-seller-balance</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun sell-a-loan:string (txid loanId buyer seller amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (with-read loan-inventory-table (inventory-key loanId seller)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;balance&quot;:= prev-seller-balance}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Read from the <code>loan-inventory-table</code> using the  parameters <code>inventory-key</code>, <code>loanId</code>, and <code>buyer</code>, assign balance to 0, and bind <code>balance</code> to value of <code>prev-buyer-balance</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (with-default-read loan-inventory-table (inventory-key loanId buyer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;balance&quot; : 0}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;balance&quot;:= prev-buyer-balance}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Insert values into the <code>loan-history-table</code> at the given <code>txid</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (insert loan-history-table txid {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;loanId&quot;:loanId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;buyer&quot;:buyer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;seller&quot;:seller,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;amount&quot;: amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the <code>loan-inventory-table</code> with the parameters <code>inventory-key</code>, <code>loanId</code>, and <code>seller</code>, and set the <code>balance</code> to the <code>previous-seller-balance</code> minus the <code>amount</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (update loan-inventory-table (inventory-key loanId seller)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;balance&quot;: (- prev-seller-balance amount)})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Write to the <code>loan-inventory-table</code> with the parameters <code>inventory-key</code>, <code>loanId</code>, and <code>buyer</code>, set the <code>balance</code> to the <code>previous-buyer-balance</code> plus the <code>amount</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (write loan-inventory-table (inventory-key loanId buyer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;balance&quot;: (+ prev-buyer-balance amount)})))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-read-a-loan-function">Define the read-a-loan function<a href="#define-the-read-a-loan-function" class="hash-link" aria-label="Direct link to Define the read-a-loan function" title="Direct link to Define the read-a-loan function">​</a></h3>
<p>To define the <code>read-a-loan</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>read-a-loan</code> function with the parameter <code>loanId</code>.</p>
</li>
<li>
<p>Read all of the values from the <code>loans</code> table at the given <code>loanId</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun read-a-loan:object (loanId:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (read loans loanId))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-read-all-loans-function">Define the read-all-loans function<a href="#define-the-read-all-loans-function" class="hash-link" aria-label="Direct link to Define the read-all-loans function" title="Direct link to Define the read-all-loans function">​</a></h3>
<p>To define the <code>read-all-loans</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>read-all-loans</code> function with no parameters.</p>
</li>
<li>
<p>Select all values from the <code>loans</code> table that have <code>constantly</code> set to true.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun read-all-loans:list ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (select loans (constantly true)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-read-inventory-pair-function">Define the read-inventory-pair function<a href="#define-the-read-inventory-pair-function" class="hash-link" aria-label="Direct link to Define the read-inventory-pair function" title="Direct link to Define the read-inventory-pair function">​</a></h3>
<p>To define the <code>read-inventory-pair</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>read-inventory-pair</code> function with the parameter <code>key</code>.</p>
</li>
<li>
<p>Set the <code>inventory-key</code> to the provided <code>key</code>.</p>
</li>
<li>
<p>Set the <code>balance</code> value of the balance in the <code>loan-inventory-table</code> to the value of the <code>key</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun read-inventory-pair:object (key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {&quot;inventory-key&quot;:key,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     &quot;balance&quot;: (at &#x27;balance (read loan-inventory-table key))}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-read-loan-inventory-function">Define the read-loan-inventory function<a href="#define-the-read-loan-inventory-function" class="hash-link" aria-label="Direct link to Define the read-loan-inventory function" title="Direct link to Define the read-loan-inventory function">​</a></h3>
<p>To define the <code>read-loan-inventory</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>read-loan-inventory</code> function with no parameters.</p>
</li>
<li>
<p>Map the value of the <code>read-inventory-pair</code> to the <code>keys</code> in the <code>loan-inventory-table</code>.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun read-loan-inventory:list ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (map (read-inventory-pair) (keys loan-inventory-table)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="define-the-read-loans-with-status-function">Define the read-loans-with-status function<a href="#define-the-read-loans-with-status-function" class="hash-link" aria-label="Direct link to Define the read-loans-with-status function" title="Direct link to Define the read-loans-with-status function">​</a></h3>
<p>To define the <code>read-loans-with-status</code> function:</p>
<ol>
<li>
<p>Open the <code>loans.pact</code> file in your code editor.</p>
</li>
<li>
<p>Start the <code>read-loans-with-status</code> function that takes the parameter <code>status</code>.</p>
</li>
<li>
<p>Select all values from the <code>loans</code> table where the status equals the <code>status</code> parameter.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defun read-loans-with-status:list (status)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (select loans-table (where &quot;status&quot; (= status)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-the-module-declaration">Complete the module declaration<a href="#complete-the-module-declaration" class="hash-link" aria-label="Direct link to Complete the module declaration" title="Direct link to Complete the module declaration">​</a></h2>
<p>Complete the <code>loans</code> module by closing the module declaration and create the tables.</p>
<p>To complete the <code>loans</code> module:</p>
<ol>
<li>
<p>Finish the module declaration with a closing parenthesis, if you haven&#x27;t already done so.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(create-table accounts-table)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create the tables defined for the module declaration, if you haven&#x27;t already done so.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(create-table loans)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(create-table loan-inventory-table)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(create-table loan-history-table)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-functions-in-the-repl">Test functions in the REPL<a href="#test-functions-in-the-repl" class="hash-link" aria-label="Direct link to Test functions in the REPL" title="Direct link to Test functions in the REPL">​</a></h2>
<p>To test the loans module, you need to add transactions to the <code>loans.repl</code> file.</p>
<p>To test the functions in the <code>loans.pact</code> file:</p>
<ol>
<li>
<p>Open the <code>loans.repl</code> file.</p>
</li>
<li>
<p>Add a transaction that loads the <code>loans.pact</code> file and then calls the functions that update the loan tables similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Call functions that update loan tables&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (load &quot;loans.pact&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (inventory-key &quot;loanId-1&quot; &quot;Las Pistolas&quot;) ;; loanId, owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (create-a-loan &quot;loanId-1&quot; &quot;Ponderosa&quot; &quot;Valley Credit&quot; 16000) ;; loanId, loanName, entity, amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (assign-a-loan &quot;txid-1&quot; &quot;loanId-1&quot; &quot;Studio Funding&quot; 10000) ;; loanId, buyer, amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (sell-a-loan &quot;txid-2&quot; &quot;loanId-1&quot; &quot;buyer2&quot; &quot;Studio Funding&quot; 2000) ;; loanId, seller, buyer, amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because you&#x27;re loading the module and calling the functions in the same transaction, you don&#x27;t need to include the namespace and module name to call the functions.</p>
</li>
<li>
<p>Add a transaction that calls the functions that read loan information from the loan tables similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Call functions that read loan information&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (use free.loans)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (create-a-loan &quot;loanId-2&quot; &quot;Renovation&quot; &quot;RiverBank&quot; 140000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (read-a-loan &quot;loanId-1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (read-all-loans)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (read-loan-inventory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (read-loans-with-status INITIATED)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (read-loans-with-status ASSIGNED)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, you first specify that you want to use the module where the functions are defined using its namespace and module name.
Similar to loading the module, you can then call individual function without including the namespace and module name.</p>
</li>
<li>
<p>Add transactions that call the individual functions similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test inventory-key function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.inventory-key &quot;loanId-3&quot; &quot;Pistolas&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test create-a-loan function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.create-a-loan &quot;loanId-3&quot; &quot;Pistolas&quot; &quot;Capital Bank&quot; 11000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test assign-a-loan function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.assign-a-loan &quot;txid-3&quot; &quot;loanId-3&quot; &quot;Buyer 1&quot; 10000) ;; loanId, buyer, amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, you must specify the module where the functions are defined using the namespace and module name.</p>
</li>
<li>
<p>Open a terminal shell on your computer and test execution by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact --trace loans.repl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that the transactions are successful with output similar to the following:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.pact:4:3:Trace: Loaded module free.loans, hash 6SCj9hDm0ANSVOqbmY3gwF4SXg9BaRi-7cV8-FbqJDY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.pact:162:0:Trace: TableCreated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.pact:163:0:Trace: TableCreated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.pact:164:0:Trace: TableCreated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:11:2:Trace: loanId-1:Las Pistolas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:12:2:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:13:2:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:14:2:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:15:0:Trace: Commit Tx 1: Call functions that update loan tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:17:0:Trace: Begin Tx 2: Call functions that read loan information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:18:3:Trace: Using free.loans</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:19:3:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:20:3:Trace: {&quot;entityName&quot;: &quot;Valley Credit&quot;,&quot;loanAmount&quot;: 16000,&quot;loanName&quot;: &quot;Ponderosa&quot;,&quot;status&quot;: &quot;assigned&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:21:3:Trace: [{&quot;entityName&quot;: &quot;Valley Credit&quot;,&quot;loanAmount&quot;: 16000,&quot;loanName&quot;: &quot;Ponderosa&quot;,&quot;status&quot;: &quot;assigned&quot;} {&quot;entityName&quot;: &quot;RiverBank&quot;,&quot;loanAmount&quot;: 140000,&quot;loanName&quot;: &quot;Renovation&quot;,&quot;status&quot;: &quot;initiated&quot;}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:22:3:Trace: [{&quot;inventory-key&quot;: &quot;loanId-1:Studio Funding&quot;,&quot;balance&quot;: 8000} {&quot;inventory-key&quot;: &quot;loanId-1:Valley Credit&quot;,&quot;balance&quot;: 6000} {&quot;inventory-key&quot;: &quot;loanId-1:buyer2&quot;,&quot;balance&quot;: 2000} {&quot;inventory-key&quot;: &quot;loanId-2:RiverBank&quot;,&quot;balance&quot;: 140000}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:23:3:Trace: [{&quot;entityName&quot;: &quot;RiverBank&quot;,&quot;loanAmount&quot;: 140000,&quot;loanName&quot;: &quot;Renovation&quot;,&quot;status&quot;: &quot;initiated&quot;}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:24:3:Trace: [{&quot;entityName&quot;: &quot;Valley Credit&quot;,&quot;loanAmount&quot;: 16000,&quot;loanName&quot;: &quot;Ponderosa&quot;,&quot;status&quot;: &quot;assigned&quot;}]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:25:0:Trace: Commit Tx 2: Call functions that read loan information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:27:0:Trace: Begin Tx 3: Test inventory-key function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:28:2:Trace: loanId-3:Pistolas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:29:0:Trace: Commit Tx 3: Test inventory-key function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:31:0:Trace: Begin Tx 4: Test create-a-loan function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:32:2:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:33:0:Trace: Commit Tx 4: Test create-a-loan function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:35:0:Trace: Begin Tx 5: Test assign-a-loan function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:36:2:Trace: Write succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loans.repl:37:0:Trace: Commit Tx 5: Test assign-a-loan function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Load successful</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Ensure that the REPL output aligns with expected results.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="review">Review<a href="#review" class="hash-link" aria-label="Direct link to Review" title="Direct link to Review">​</a></h2>
<p>You have now built and tested a smart contract that manipulates loan information in three tables with a robust set of functions.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/coding-projects/loans.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/coding-projects/gas-station"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Gas station accounts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/coding-projects/local-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Local testing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin" class="table-of-contents__link toc-highlight">Before you begin</a></li><li><a href="#get-the-starter-code" class="table-of-contents__link toc-highlight">Get the starter code</a></li><li><a href="#define-the-module-and-keyset" class="table-of-contents__link toc-highlight">Define the module and keyset</a></li><li><a href="#define-the-schemas-and-tables" class="table-of-contents__link toc-highlight">Define the schemas and tables</a></li><li><a href="#define-constants" class="table-of-contents__link toc-highlight">Define constants</a></li><li><a href="#define-functions" class="table-of-contents__link toc-highlight">Define functions</a></li><li><a href="#complete-the-module-declaration" class="table-of-contents__link toc-highlight">Complete the module declaration</a></li><li><a href="#test-functions-in-the-repl" class="table-of-contents__link toc-highlight">Test functions in the REPL</a></li><li><a href="#review" class="table-of-contents__link toc-highlight">Review</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>