<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-coding-projects/conditions-control" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Conditions and control flow | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/coding-projects/conditions-control"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Conditions and control flow | Kadena Docs"><meta data-rh="true" name="description" content="This coding project demonstrates how to write conditional statements and control the order in which statements and instructions are evaluated and executed in Pact smart contracts."><meta data-rh="true" property="og:description" content="This coding project demonstrates how to write conditional statements and control the order in which statements and instructions are evaluated and executed in Pact smart contracts."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/coding-projects/conditions-control"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/conditions-control" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/conditions-control" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/smart-contract-dev">Smart contracts</a><button aria-label="Expand sidebar category &#x27;Smart contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/coding-projects/coding-projects">Coding projects</a><button aria-label="Collapse sidebar category &#x27;Coding projects&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/hello-world">Hello world, revisited</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/transfers">Simple payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/rotate-auth">Rotate authorized keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/contract-interactions">Contract interactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/gas-station">Gas station accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/loans">Loans in multiple tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/local-testing">Local testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/estimate-gas">Estimate gas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/pact-server-api">Pact built-in server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/coding-projects/conditions-control">Conditions and control flow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/coding-projects/coding-projects"><span itemprop="name">Coding projects</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Conditions and control flow</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Conditions and control flow</h1></header>
<p>Most programming languages provide several ways you can control how operations are executed in a program.
For example, you can use <strong>conditional expressions</strong> to execute a specific set of instructions only if a specific condition is met or to iterate through a set of instructions a given number of times, until some condition is met.
The most common control structures include the following:</p>
<ul>
<li>
<p>Conditional statements that use <code>if</code> to evaluate a condition and execute one set of instructions if the condition is true, and, optionally, a different set of instructions if the condition is false.</p>
</li>
<li>
<p>Conditional statements that use <code>switch</code> to execute different sets of instructions based on the value of a variable or expression.</p>
</li>
<li>
<p>Loops that use <code>for</code> to execute a block of code a fixed number of times.</p>
</li>
<li>
<p>Loops that use <code>while</code> to execute a block of code as long as a specified condition remains true.</p>
</li>
</ul>
<p>Many programming languages also support control flow keywords—such as the <code>break</code>, <code>continue</code>, and <code>return</code> keywords—that enable you to stop execution, skip program statements, or return a value to a calling function.
However, conditional statements, loops, and other patterns that you can use to control the execution of a program&#x27;s logic also often increase the complexity of the program and the additional complexity can result in unexpected consequences or programming errors.</p>
<p>To make smart contracts simpler and safer to write, Pact only supports bounded loops and a limited set of conditional control structures.
In Pact, you can write conditional logic to control program execution using the following language features:</p>
<ul>
<li><code>if</code> expressions</li>
<li><code>enforce</code> expressions</li>
<li><code>cond</code> expressions</li>
</ul>
<p>This coding project illustrates how to write simpler and safer smart contracts using these conditional expressions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin">Before you begin<a href="#before-you-begin" class="hash-link" aria-label="Direct link to Before you begin" title="Direct link to Before you begin">​</a></h2>
<p>Before starting this project, verify your environment meets the following basic requirements:</p>
<ul>
<li>You have a GitHub account and can run <code>git</code> commands.</li>
<li>You have installed the <a href="/docs/smart-contracts/install">Pact</a> programming language and command-line interpreter.</li>
<li>You have installed the <a href="/docs/smart-contracts/install/tooling#kadena-command-line-interface"><code>kadena-cli</code></a> package and have a working directory with initial configuration settings.</li>
<li>You have a <a href="/docs/smart-contracts/install/local-dev-node">local development</a> node that you can connect to that runs the <code>chainweb-node</code> program, either in a Docker container or on a physical or virtual computer.</li>
<li>You should be familiar with defining <a href="/docs/smart-contracts/modules">modules</a> and using keysets.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-starter-code">Get the starter code<a href="#get-the-starter-code" class="hash-link" aria-label="Direct link to Get the starter code" title="Direct link to Get the starter code">​</a></h2>
<p>To get started:</p>
<ol>
<li>
<p>Open a terminal shell on your computer.</p>
</li>
<li>
<p>Clone the <code>pact-coding-projects</code> repository by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/kadena-docs/pact-coding-projects.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Change to the <code>08-control-flow</code> directory by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd pact-coding-projects/08-control-flow</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you list the contents of this directory, you&#x27;ll see the following files:</p>
<ul>
<li><code>starter-control-flow.pact</code> provides a starting point with the framework for the project code and comments for every challenge.</li>
<li><code>final-control-flow.pact</code> contains the final solution code with examples of using <code>if</code>, <code>enforce</code>, and c<code>ond</code> expressions.</li>
<li><code>final-control-flow.repl</code> provides test cases for testing the functions defined in the my-coin module and for comparing the results from testing <code>if</code> expressions and <code>enforce</code> expressions.</li>
</ul>
</li>
<li>
<p>Open and review the <code>starter-control-flow</code> file.</p>
<p>This file describes all of the tasks that you need to complete for the <em>Conditions and control flow</em> coding project.
You can follow the instructions embedded in the file to try to tackle this coding project on your own without looking at the solutions to each step, or follow the instructions in the next sections if you need additional guidance.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-if-expressions">Using if expressions<a href="#using-if-expressions" class="hash-link" aria-label="Direct link to Using if expressions" title="Direct link to Using if expressions">​</a></h2>
<p>In general, you should only use <code>if</code> expressions when you want to invoke conditional branches depending on whether a certain condition is true or false.
For example, you might have an application that allows users to collect points and unlock a VIP access code when they&#x27;ve collect a required number of points, that is, the required number of points evaluates to true.
For users who don&#x27;t have the required number of points, you might want to display a message indicating the number of points still needed to unlock the VIP access code.
In this example, there are two possible code paths:</p>
<ul>
<li>If <code>points =&gt; required_points</code> is <code>true</code>, display a &quot;Congratulations!&quot; message if a user has unlocked the VIP access code.</li>
<li>If <code>points =&gt; required_points</code> is <code>false</code>, display a &quot;Sorry, you need more points&quot; message and the number of points still needed for VIP access.</li>
</ul>
<p>For this application, you don&#x27;t want to stop execution because a condition is false.
Instead, you want provide different messages and, potentially, different behaviors based on whether the <code>if</code> condition evaluates to true or false.
The following code snippet illustrates how you might write a function that uses an <code>if</code> statement to provide similar behavior in Pact:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(defconst VIP_UNLOCK 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(defun unlock-access:string (user:string contribution:integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (with-read my-points-table user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;balance&quot; := access-points }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (update my-points-table user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { &quot;balance&quot; : (+ access-points contribution)})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (if (&gt;= access-points VIP_UNLOCK)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (format &quot;Congratulations! You have {} points and unlocked VIP access.&quot; [access-points])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (format &quot;Sorry, you need {} more points to unlock!&quot; [(- VIP_UNLOCK access-points)])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-enforce-expressions">Using enforce expressions<a href="#using-enforce-expressions" class="hash-link" aria-label="Direct link to Using enforce expressions" title="Direct link to Using enforce expressions">​</a></h2>
<p>You should use <code>enforce</code> statements when you want to ensure a specific condition is met and <strong>stop any further execution</strong> if the condition is false.
Because <code>enforce</code> statements prevent transactions from continuing instead of providing a conditional branch, they can provide a safer alternative to <code>if</code> statements in smart contracts that execute business transactions.
For example, if you&#x27;re writing a <code>debit</code> function to subtract a specified <code>amount</code> from the <code>balance</code> for a specified <code>account</code>, you could use an <code>if</code> statement to check whether the <code>balance</code> is sufficient for the operation to continue.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ;; Debit using if</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun debit:string (account:string amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Debit amount from account balance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;; Read the &quot;balance&quot; for the account and bind the value to a variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (with-read my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { &quot;balance&quot; := balance }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;; Check if &quot;balance&quot; is sufficient for the amount to debit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (if (&gt; balance amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ;; If condition is true, update my-coin-table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (update my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { &quot;balance&quot; : (- balance amount) })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ;; If condition is false, print message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;Balance is not sufficient for transfer&quot; )))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can simplify this code by refactoring with an <code>enforce</code> statement.
By using <code>enforce</code>, you no longer need to create branching logic dependent on the outcome of the <code>if</code> statement.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ;; Refactor with enforce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun debit:string (account:string amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @doc &quot;Debit amount from account balance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (with-read my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { &quot;balance&quot; := balance }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;; Use enforce to exit the transaction if the condition isn&#x27;t met.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (enforce (&gt; balance amount) &quot;Balance is not sufficient for transfer&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ;; Update the balance if the condition is met.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (update my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          { &quot;balance&quot; : (- balance amount) })))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The advantage to using <code>enforce</code> is that the transaction execution ends immediately if the required condition isn&#x27;t met.
The code doesn&#x27;t require a conditional branch to handle the enforcement failure.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-cond-expressions">Using cond expressions<a href="#using-cond-expressions" class="hash-link" aria-label="Direct link to Using cond expressions" title="Direct link to Using cond expressions">​</a></h2>
<p>You can use <code>cond</code> expressions to evaluate a series of expressions one after another.
With <code>cond</code> expressions, you specify a series of conditions to evaluate and operations to perform in the order you want them executed.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun check-condition:string (user:string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (with-read my-points-table user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       { &quot;balance&quot; := points }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         (cond ((= 0 points) &quot;New user&quot;) ((&lt; points 10) &quot;Play again&quot;) (do (+ 1 points) &quot;Bonus points&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the first condition evaluated is true, then first code branch is executed.
In this simplified example, if the <code>(= 0 points)</code> condition is true, then the <code>&quot;New user&quot;</code> string is returned.
If the first condition isn&#x27;t met, the second condition is evaluated and, if that condition is true, then the second code branch is executed.</p>
<p>The final <code>else-branch</code> is only evaluated if all other conditions fail.
For example:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (cond ((= &quot;a&quot; &quot;b&quot;) &quot;strings test&quot;) ((= 1 2) &quot;numbers test&quot;) ((= true false) &quot;boolean test&quot;) &quot;no conditions are met&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;no conditions are met&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparing-if-and-enforce-expressions">Comparing if and enforce expressions<a href="#comparing-if-and-enforce-expressions" class="hash-link" aria-label="Direct link to Comparing if and enforce expressions" title="Direct link to Comparing if and enforce expressions">​</a></h2>
<p>There are often subtle differences between using <code>if</code> and <code>enforce</code> expressions that can make smart contract code unsafe.
In the following example, the code uses <code>if</code> statements to do the following:</p>
<ul>
<li>Check whether a specified account exists.</li>
<li>Update the account balance if the row exists and the keyset matches the account keyset.</li>
<li>Insert a new row if the account doesn&#x27;t exist.</li>
</ul>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ;; TEMPTING USE of &quot;IF&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (defun credit-if:string (account:string keyset:keyset amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;; STEP 1: Fetch all keys in &quot;my-coin-table&quot; and see if &quot;account&quot; exists.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (if (contains account (keys my-coin-table))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;; STEP 2: if the row exists, check the keyset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (with-read my-coin-table account </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       { &quot;balance&quot;:= balance,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;keyset&quot;:= retk }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;; STEP 3: If the keysets match, update the balance.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;; Otherwise, print an error message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (if (= retk keyset)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (update my-coin-table account {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;balance&quot;: (+ amount balance)})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;The keysets do not match&quot; ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ;; STEP 4: if the row doesn&#x27;t exist, insert a row into the table.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (insert my-coin-table account{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;balance&quot;: amount,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;keyset&quot;: keyset}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, the nested <code>if</code> statements make this code more difficult to follow and more complicated than necessary.</p>
<p>You can simplify this code by refactoring to use <code>with-default-read</code>, <code>write</code>, and <code>enforce</code> expressions instead of the <code>if</code> statements.
To simplify the code, you can start by setting the default row balance to 0.0 and taking the keyset as an input value.
If the row exists, you can then bind the <code>balance</code> and <code>keyset</code> value from the table.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  (defun credit:string (account:string keyset:guard amount:decimal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;; STEP 1: Set the default balance to 0.0 and get the keyset as an input value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;; If row exists, then bind &quot;balance&quot; and &quot;keyset&quot; values from the table.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (with-default-read my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;balance&quot;: 0.0, &quot;keyset&quot;: keyset }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;balance&quot;:= balance, &quot;keyset&quot;:= retg }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;; STEP 2: Check that the input keyset is the same as the row&#x27;s keyset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (enforce (= retg keyset)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;account guards do not match&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ;; STEP 3: Write the row to the table.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (write my-coin-table account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { &quot;balance&quot; : (+ balance amount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        , &quot;keyset&quot;   : retg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see from this example, the code now combines steps to look up the account and check its keyset.
By simplifying the logic to remove <code>if</code> statements, you can write functions that are more straightforward to read and safer to execute.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-contract-functions">Testing contract functions<a href="#testing-contract-functions" class="hash-link" aria-label="Direct link to Testing contract functions" title="Direct link to Testing contract functions">​</a></h2>
<p>The <code>final-control-flow.repl</code> file provides test cases for executing the functions defined in the <code>my-coin</code> Pact module.
The <code>final-control-flow.repl</code> file includes both successful and failing test cases for the <code>debit-if</code> and <code>credit-if</code> functions and for the <code>debit</code> and <code>credit</code> functions that use <code>enforce</code>.
You should note that the <code>final-control-flow.repl</code> file uses the <code>expect-failure</code> function to check the expected failure messages for the <code>debit</code> and <code>credit</code> functions.</p>
<p>Because the <code>debit</code> and <code>credit</code> functions use the <code>enforce</code> function, those functions fail transactions if the enforced condition isn&#x27;t met.
For example, the <code>expect-failure</code> tests return results for the refactored <code>debit</code> and <code>credit</code> functions that look like this:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Expect failure: Success: Balance is not sufficient for transfer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Expect failure: Success: Keysets do not match&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>if</code> statements in the <code>debit-if</code> and <code>credit-if</code> functions don&#x27;t fail the transaction when the condition evaluated is false.
Because those function return an error message without causing the transaction to fail, the <code>expect-failure</code> test is less predictable when the condition is evaluated.</p>
<p>If you test<code>debit-if</code> and <code>credit-if</code> functions, you&#x27;ll see the expected error messages.
However, if you use the <code>expect-failure</code> function with the <code>debit-if</code> and <code>credit-if</code> functions, you&#x27;ll see that the test itself fails:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Balance is not sufficient for transfer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;FAILURE: Balance is not sufficient for transfer: expected failure, got result&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Keysets do not match&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;FAILURE: Keysets do not match: expected failure, got result&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/coding-projects/conditions-control.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/coding-projects/pact-server-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Pact built-in server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Resources</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin" class="table-of-contents__link toc-highlight">Before you begin</a></li><li><a href="#get-the-starter-code" class="table-of-contents__link toc-highlight">Get the starter code</a></li><li><a href="#using-if-expressions" class="table-of-contents__link toc-highlight">Using if expressions</a></li><li><a href="#using-enforce-expressions" class="table-of-contents__link toc-highlight">Using enforce expressions</a></li><li><a href="#using-cond-expressions" class="table-of-contents__link toc-highlight">Using cond expressions</a></li><li><a href="#comparing-if-and-enforce-expressions" class="table-of-contents__link toc-highlight">Comparing if and enforce expressions</a></li><li><a href="#testing-contract-functions" class="table-of-contents__link toc-highlight">Testing contract functions</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>