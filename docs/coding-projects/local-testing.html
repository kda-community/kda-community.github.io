<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-coding-projects/local-testing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Local testing | Kadena Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://kda-chain.org/docs/img/kadena-opengraph.png"><meta data-rh="true" property="og:url" content="https://kda-chain.org/docs/coding-projects/local-testing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Local testing | Kadena Docs"><meta data-rh="true" name="description" content="This coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL."><meta data-rh="true" property="og:description" content="This coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL."><link data-rh="true" rel="icon" href="/docs/img/kadena-favicon.png"><link data-rh="true" rel="canonical" href="https://kda-chain.org/docs/coding-projects/local-testing"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/local-testing" hreflang="en"><link data-rh="true" rel="alternate" href="https://kda-chain.org/docs/coding-projects/local-testing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6UVWQF4IS8-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Kadena Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.01d78354.css">
<script src="/docs/assets/js/runtime~main.2ef1040c.js" defer="defer"></script>
<script src="/docs/assets/js/main.9cf849d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/kadena-docs-light.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="196"><img src="/docs/img/kadena-docs-dark.png" alt="Kadena Documentation" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="196"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart">Get Started</a><a href="https://discord.com/invite/kadena" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kda-community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link-icon"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quickstart">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/smart-contract-dev">Smart contracts</a><button aria-label="Expand sidebar category &#x27;Smart contracts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/guides">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api">API</a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/reference">Reference</a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/coding-projects/coding-projects">Coding projects</a><button aria-label="Collapse sidebar category &#x27;Coding projects&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/hello-world">Hello world, revisited</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/transfers">Simple payments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/rotate-auth">Rotate authorized keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/contract-interactions">Contract interactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/gas-station">Gas station accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/loans">Loans in multiple tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/coding-projects/local-testing">Local testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/estimate-gas">Estimate gas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/pact-server-api">Pact built-in server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/coding-projects/conditions-control">Conditions and control flow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/resources">Resources</a><button aria-label="Expand sidebar category &#x27;Resources&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/coding-projects/coding-projects"><span itemprop="name">Coding projects</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Local testing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Local testing</h1></header>
<p>The <em>Local testing</em> coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL.
If you&#x27;ve explored other coding projects, you might be familiar with some of the most basic functions, such as the <code>begin-tx</code> and <code>commit-tx</code> built-in functions.
This coding project introduces a more complete set of common functions for testing smart contracts in your local development environment.
For this project, you&#x27;ll use the <code>loans.pact</code> module as the sample smart contract to test.
The <code>loans</code> module defines three tables and ten functions, making it a good candidate for learning about writing test cases.</p>
<p>In this coding project, you&#x27;ll learn about:</p>
<ul>
<li>Using the Pact read-evaluate-print-loop (REPL) for interactive testing.</li>
<li>Using Pact REPL-only built-in functions.</li>
<li>Loading and resetting environment data.</li>
<li>Defining transaction blocks</li>
<li>Loading and using Pact modules.</li>
<li>Testing success and failure cases.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin">Before you begin<a href="#before-you-begin" class="hash-link" aria-label="Direct link to Before you begin" title="Direct link to Before you begin">​</a></h2>
<p>Before starting this project, verify your environment meets the following basic requirements:</p>
<ul>
<li>You have a GitHub account and can run <code>git</code> commands.</li>
<li>You have installed the Pact programming language and command-line interpreter.</li>
<li>You have installed the <code>kadena-cli</code> package and have a working directory with initial configuration settings.</li>
<li>You have a local development node that you can connect to that runs the <code>chainweb-node</code> program, either in a Docker container or on a physical or virtual computer.</li>
<li>You should be familiar with defining modules and using keysets.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-the-starter-code">Get the starter code<a href="#get-the-starter-code" class="hash-link" aria-label="Direct link to Get the starter code" title="Direct link to Get the starter code">​</a></h2>
<p>To get started:</p>
<ol>
<li>
<p>Open a terminal shell on your computer.</p>
</li>
<li>
<p>Clone the <code>pact-coding-projects</code> repository by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/kadena-docs/pact-coding-projects.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Change to the <code>06-local-testing</code> directory by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd pact-coding-projects/06-local-testing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you list the contents of this directory, you&#x27;ll see the following files:</p>
<ul>
<li><code>starter-testing-loans.repl</code> provides a starting point with the framework for building the <code>loans</code> module.</li>
<li><code>project-steps</code> provides test cases for completing each part of the coding project.</li>
<li><code>final-testing-loans.repl</code> provides the final version of the test cases for verifying the <code>loans</code> module.</li>
</ul>
</li>
<li>
<p>Open and review the <code>starter-testing-loans.repl</code> file.</p>
<p>This file outlines the tasks you need to complete for the <em>Local testing</em> project.
Follow the embedded instructions to work through the coding challenges on your own or use the detailed instructions and code provided in the next sections.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-pact-repl">Using the Pact REPL<a href="#using-the-pact-repl" class="hash-link" aria-label="Direct link to Using the Pact REPL" title="Direct link to Using the Pact REPL">​</a></h2>
<p>The Pact command-line interpreter provides a read-evaluate-print-loop (REPL) terminal for interactive Pact modules.
With this terminal, you can use built-in REPL functions to load and run Pact files to test the functions defined in them.
The REPL file is responsible for reading, evaluating, printing, and looping through the Pact code and returning the results to the terminal.
By using REPL files, you can test and iterate on the smart contracts code efficiently.</p>
<p>To use the Pact REPL:</p>
<ol>
<li>
<p>Create a REPL (<code>.repl)</code>) file that loads the Pact module (.pact) that you want to test.</p>
</li>
<li>
<p>Open a new terminal shell on your computer.</p>
</li>
<li>
<p>Start the <code>pact</code> command-line interpreter and specify the <code>.repl</code> file that loads the <code>.pact</code> that you want to test.</p>
<p>The <code>.repl</code> file loads the <code>.pact</code> file.
The interpreter executes the code in the <code>.pact</code> file, returns data to the <code>.repl</code> file which, in turn, sends the output to your terminal.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-built-in-functions">Using built-in functions<a href="#using-built-in-functions" class="hash-link" aria-label="Direct link to Using built-in functions" title="Direct link to Using built-in functions">​</a></h2>
<p>Pact includes many built-in functions for testing module code using <code>.repl</code> files and the Pact command-line interpreter.</p>
<p>Most of these functions are <a href="/docs/pact-5/repl">REPL-only functions</a>.
They can only be used in <code>.repl</code> files and can&#x27;t be called directly in <code>.pact</code> files.
The following functions are some of the most commonly used REPL-only functions:</p>
<table><thead><tr><th>Function</th><th>Purpose</th></tr></thead><tbody><tr><td><a href="/docs/pact-5/repl/begin-tx">begin-tx</a></td><td>Begin a transaction.</td></tr><tr><td><a href="/docs/pact-5/repl/commit-tx">commit-tx</a></td><td>Commit a transaction.</td></tr><tr><td><a href="/docs/pact-5/repl/env-chain-data">env-chain-data</a></td><td>Define the chain information to use for transactions in your testing environment.</td></tr><tr><td><a href="/docs/pact-5/repl/env-data">env-data</a></td><td>Set transaction data.</td></tr><tr><td><a href="/docs/pact-5/repl/env-sigs">env-sigs</a></td><td>Set transaction signature keys.</td></tr><tr><td><a href="/docs/pact-5/repl/expect">expect</a></td><td>Evaluate expression and verify that it equals what is expected.</td></tr><tr><td><a href="/docs/pact-5/repl/expect-failure">expect-failure</a></td><td>Evaluate an expression and succeed only if the expression results in an error.</td></tr><tr><td><a href="/docs/pact-5/repl/load">load</a></td><td>Load and evaluate a file.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-environment-data">Load environment data<a href="#load-environment-data" class="hash-link" aria-label="Direct link to Load environment data" title="Direct link to Load environment data">​</a></h2>
<p>Most smart contracts require some information to be available in the environment so that it can be used by the functions defined in the module.
For example, keyset information must be available to authorize access to some operations.
In a <code>.repl</code> file, you can use use the built in functions <strong>env-data</strong> and <strong>env-sigs</strong> to specify keysets and keys to use for testing.
One of the unique features of using these REPL-only functions in a <code>.repl</code> file is that you can simulate keys and accounts without having to generate and use actual keys and signatures to authorize operations or sign transactions.
For example, you can use the <code>env-data</code> function to simulate the keyset named <code>loans-admin</code> like this:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(env-data {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;loans-admin&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      { &quot;keys&quot;: [&quot;loan-admin-keyset&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;pred&quot;: &quot;keys-all&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Similarly, you can use the <code>env-sigs</code> function simulate a signing key and capabilities.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   (env-sigs [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     { &quot;key&quot;: &quot;marmalade-admin&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ,&quot;caps&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="defining-transaction-blocks">Defining transaction blocks<a href="#defining-transaction-blocks" class="hash-link" aria-label="Direct link to Defining transaction blocks" title="Direct link to Defining transaction blocks">​</a></h2>
<p>In <code>.repl</code> files, you define tests within transaction blocks that start with the <code>begin-tx</code> function and end with the <code>commit-tx</code> function.
Within a transaction block that starts with the <code>begin-tx</code> function and ends with the <code>commit-tx</code> function, you can make as many calls to the Pact code as you like.
Any command sent to the blockchain is a transaction, but a <em>command</em> can have multiple <em>function calls</em>.
For example, a single transaction block is treated as one command, but it can include the code used to define a module with <code>module</code> and create module tables with with one or more <code>create-table</code> calls.</p>
<p>Transaction blocks enable you to group function calls into smaller logical units, making it easier to identify errors and resolve test failures.
Although it&#x27;s possible to place all of the function calls in a single transaction, in practice, it&#x27;s better to break test files up to make function calls into several smaller transactions.</p>
<p>For example, you can make each function call a separate transaction similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test the inventory-key function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.inventory-key &quot;loanId-3&quot; &quot;Pistolas&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test the create-a-loan function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.create-a-loan &quot;loanId-3&quot; &quot;Pistolas&quot; &quot;Capital Bank&quot; 11000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx &quot;Test the assign-a-loan function&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (free.loans.assign-a-loan &quot;txid-3&quot; &quot;loanId-3&quot; &quot;Buyer 1&quot; 10000) ;; loanId, buyer, amount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Transactions can be grouped together however is most convenient for your testing.
However, you should try to maintain a logical order in your transactions for maintenance and readability.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-a-module-from-a-pact-file">Load a module from a Pact file<a href="#load-a-module-from-a-pact-file" class="hash-link" aria-label="Direct link to Load a module from a Pact file" title="Direct link to Load a module from a Pact file">​</a></h2>
<p>Pact files are not run by your computer directly.
Instead, they’re loaded into the <code>.repl</code> file and run from there.
After you have defined environment data, such as the namespace and keyset for a module, you must load the <code>.pact</code> file into the <code>.repl</code> file using a <strong>load</strong> statement.</p>
<p>For example, type <code>load</code> then specify the file path as a string:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(load &quot;loans.pact&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Typically, <code>.pact</code> and <code>.repl</code> file are located in the same folder, so you only need to specify the name of the <code>.pact</code> file.
However, if you place the files in different file locations, you must provide an absolute or relative path to the <code>.pact</code> file you want to load.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="call-module-functions">Call module functions<a href="#call-module-functions" class="hash-link" aria-label="Direct link to Call module functions" title="Direct link to Call module functions">​</a></h2>
<p>After the <code>.pact</code> file is loaded in the <code>.repl</code> file, you are ready to start calling module functions.
Depending on how you define your transaction blocks, there are a few possible ways to call the functions.
The most common approach is to import the module with a <strong>use</strong> statement, then call the functions that are defined in the imported module.
For example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(begin-tx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (use free.loans)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   (create-a-loan &quot;loanId-2&quot; &quot;Renovation&quot; &quot;RiverBank&quot; 140000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(commit-tx)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For this coding project, edit the <code>.repl</code> file to call the following functions defined in the <code>loans</code> module:</p>
<table><thead><tr><th>Function</th><th>Purpose</th></tr></thead><tbody><tr><td>create-a-loan</td><td>Accepts parameters to add the appropriate information to each table</td></tr><tr><td>assign-a-loan</td><td>Assigns a loan to an entity.</td></tr><tr><td>sell-a-loan</td><td>Sell a loan and log details in the loan history table.</td></tr></tbody></table>
<p>After calling the functions used to create, assign, and sell a loan, add tests to read some of the data that you created.
For example, edit the <code>.repl</code> file to call the following functions defined in the <code>loans</code> module:</p>
<table><thead><tr><th>Function</th><th>Purpose</th></tr></thead><tbody><tr><td>read-loan-inventory</td><td>Reads all loans in the loan inventory table.</td></tr><tr><td>read-loans-with-status</td><td>Reads all loans with a specific status.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execute-the-tests">Execute the tests<a href="#execute-the-tests" class="hash-link" aria-label="Direct link to Execute the tests" title="Direct link to Execute the tests">​</a></h2>
<p>At this point, you have a completed <code>.repl</code> file that tests code defined in the <code>loans</code> module.
The final step is to execute the tests by running the file from a terminal shell to view the output.</p>
<p>To execute the <code>.repl</code> file tests:</p>
<ol>
<li>
<p>Open a terminal shell and navigate to the directory that contains the <code>loans.repl</code> and <code>loans.pact </code>files.</p>
</li>
<li>
<p>Start the Pact command-line interpreter:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Load the <code>loans.repl</code> file</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (load &quot;loans.repl&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see output for the tests you defined in the <code>.repl</code> file displayed in the terminal.
For example, you should see output similar to the following excerpt:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Loading loans.repl...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Setting transaction keys&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Setting transaction data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Begin Tx 0: Define namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Namespace defined: free&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Commit Tx 0: Define namespace&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Begin Tx 1: Call functions that update loan tables&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Loading loans.pact...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Namespace set to free&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Keyset defined&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Loaded module free.loans, hash Js_byz9rB57F6Ip3UqTXIzraNw0a3QiPvzs2F0dMr5c&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TableCreated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TableCreated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;TableCreated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Begin Tx 3: Test inventory-key function&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;loanId-3:Pistolas&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Commit Tx 3: Test inventory-key function&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Begin Tx 4: Test create-a-loan function&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Commit Tx 4: Test create-a-loan function&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Begin Tx 5: Test assign-a-loan function&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Write succeeded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Commit Tx 5: Test assign-a-loan function&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-success-and-failure-use-cases">Testing success and failure use cases<a href="#testing-success-and-failure-use-cases" class="hash-link" aria-label="Direct link to Testing success and failure use cases" title="Direct link to Testing success and failure use cases">​</a></h2>
<p>Pact also provides built-in functions to test for expected results, including code that you expect to succeed, code that you expect to fail, and code that returns an expected result from an evaluated expression.</p>
<table><thead><tr><th style="text-align:left">Function</th><th style="text-align:left">Purpose</th></tr></thead><tbody><tr><td style="text-align:left"><a href="/docs/pact-5/repl/expect">expect</a></td><td style="text-align:left">Evaluates an expression and returns a specified string is the result from the evaluation is what is expected.</td></tr><tr><td style="text-align:left"><a href="/docs/pact-5/repl/expect-failure">expect-failure</a></td><td style="text-align:left">Evaluates an expression and returns a specified string only if the expression evaluated returns an error.</td></tr><tr><td style="text-align:left"><a href="/docs/pact-5/repl/expect-that">expect-that</a></td><td style="text-align:left">Evaluates an expression and returns true if the expression evaluated returns the expected result or false if the expression evaluated doesn&#x27;t return the expected result.</td></tr></tbody></table>
<p>The following example demonstrates how to use the <code>expect</code> function to evaluate whether an expression returns an expected result:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (expect &quot;Test that addition is correct&quot; 4 (+ 2 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Expect: success: Test that addition is correct&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (expect &quot;Test that addition is correct&quot; 4 (+ 3 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;FAILURE: Test that addition is correct: expected 4:integer, received 5:integer&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example demonstrates how to use the <code>expect-failure</code> function to evaluate whether an expression fails as an expected result:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (expect-failure &quot;Enforce fails on false&quot; (enforce false &quot;Expected error&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Expect failure: success: Enforce fails on false&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example demonstrates how to use the <code>expect-that</code> function to evaluate whether an expression returns the expected result:</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (expect-that &quot;addition result is greater than 2&quot; (&lt; 2) (+ 1 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Expect-that: success: addition result is greater than 2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pact&gt; (expect-that &quot;addition result is greater than 2&quot; (&gt; 2) (+ 1 2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;FAILURE: Expect-that: Did not satisfy condition: addition result is greater than 2&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can find additional examples of <code>.pact</code> and <code>.repl</code> test files in the <a href="https://github.com/kadena-io/pact-examples.git" target="_blank" rel="noopener noreferrer">pact-examples</a> repository.
Both the <code>expect</code> and <code>expect-failure</code> functions enable you to test whether the outcome of an expression is what you expect it to be.
For example, the <a href="https://github.com/kadena-io/pact-examples/blob/master/atoz/01-keysets/keysets.repl" target="_blank" rel="noopener noreferrer">keysets.repl</a> demonstrates using the <code>env-data</code> function and <code>expect-failure</code> function to test use cases that are expected to fail.</p>
<div class="language-pact codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pact codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(expect-failure &quot;real keyset should fail&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (enforce-keyset &quot;keyset-real&quot;))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review">Review<a href="#review" class="hash-link" aria-label="Direct link to Review" title="Direct link to Review">​</a></h3>
<p>In this coding project, you learned the basics of testing by creating transaction blocks in <code>.repl</code> files.
Defining tests in <code>.repl </code>files is the most common approach to testing smart contracts locally.
From these basic building blocks, you can experiment with adding and modifying tests and function calls in <code>.repl</code> or <code>.pact</code> files to learn more.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kda-community/kadena-docs-new/blob/master/docs/coding-projects/local-testing.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/coding-projects/loans"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Loans in multiple tables</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/coding-projects/estimate-gas"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Estimate gas</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin" class="table-of-contents__link toc-highlight">Before you begin</a></li><li><a href="#get-the-starter-code" class="table-of-contents__link toc-highlight">Get the starter code</a></li><li><a href="#using-the-pact-repl" class="table-of-contents__link toc-highlight">Using the Pact REPL</a></li><li><a href="#using-built-in-functions" class="table-of-contents__link toc-highlight">Using built-in functions</a></li><li><a href="#load-environment-data" class="table-of-contents__link toc-highlight">Load environment data</a></li><li><a href="#defining-transaction-blocks" class="table-of-contents__link toc-highlight">Defining transaction blocks</a></li><li><a href="#load-a-module-from-a-pact-file" class="table-of-contents__link toc-highlight">Load a module from a Pact file</a></li><li><a href="#call-module-functions" class="table-of-contents__link toc-highlight">Call module functions</a></li><li><a href="#execute-the-tests" class="table-of-contents__link toc-highlight">Execute the tests</a></li><li><a href="#testing-success-and-failure-use-cases" class="table-of-contents__link toc-highlight">Testing success and failure use cases</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 - Kadena LLC (<a href="https://www.kadena.io/privacy-policy" target="_blank">Privacy</a>)</div></div></div></footer><div class="footer-consent-link"><button>Analytics Consent</button></div></div>
</body>
</html>