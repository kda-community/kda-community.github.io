"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[325],{65374:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"reference/dex-integration","title":"Exchange integration guide","description":"Quick reference for common tasks that enable an exchange to interact with the Kadena blockchain.","source":"@site/docs/reference/exchange-integration.md","sourceDirName":"reference","slug":"/reference/dex-integration","permalink":"/docs/reference/dex-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/exchange-integration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Exchange integration guide","description":"Quick reference for common tasks that enable an exchange to interact with the Kadena blockchain.","id":"dex-integration","sidebar_position":5},"sidebar":"default","previous":{"title":"Guard JSON representation","permalink":"/docs/reference/guard-json"},"next":{"title":"Foundry Chainweb EVM","permalink":"/docs/reference/evm-integration/foundry-chainweb-ref"}}');var i=t(74848),s=t(28453);const c={title:"Exchange integration guide",description:"Quick reference for common tasks that enable an exchange to interact with the Kadena blockchain.",id:"dex-integration",sidebar_position:5},r="Exchange integration guide",o={},l=[{value:"Connect to specific chains",id:"connect-to-specific-chains",level:2},{value:"Generate an account on the blockchain",id:"generate-an-account-on-the-blockchain",level:2},{value:"Using Chainweaver",id:"using-chainweaver",level:3},{value:"Using mnemonic phrases",id:"using-mnemonic-phrases",level:3},{value:"Using client utilities",id:"using-client-utilities",level:3},{value:"Retrieve balances",id:"retrieve-balances",level:2},{value:"Create, sign, and send a transaction",id:"create-sign-and-send-a-transaction",level:2},{value:"Check the status of a transaction",id:"check-the-status-of-a-transaction",level:2},{value:"Single check",id:"single-check",level:3},{value:"Polling check",id:"polling-check",level:3},{value:"Estimate gas usage",id:"estimate-gas-usage",level:2},{value:"Listen for events",id:"listen-for-events",level:2},{value:"Monitoring and incident management",id:"monitoring-and-incident-management",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"exchange-integration-guide",children:"Exchange integration guide"})}),"\n",(0,i.jsx)(n.p,{children:"This guide provides a quick reference for how to perform the most common tasks when an exchange or a similar application needs to interact with the Kadena blockchain.\nThe information in this guide is similar to topics covered elsewhere in the documentation.\nFor example, you can see similar information in the following topics:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/howto-quick-ref",children:"Common task quick reference"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/accounts/howto-create-accounts",children:"Create new accounts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/accounts/howto-get-balances",children:"Check account balances"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/transactions/howto-sign-submit-tx",children:"Sign and submit transactions"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"However, this guide assumes that you are operating an exchange and need to interact with the Kadena blockchain programmatically using scripts and, potentially, automation."}),"\n",(0,i.jsx)(n.p,{children:"This guide also assumes the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You host one or more Chainweb nodes that you control and monitor."}),"\n",(0,i.jsx)(n.li,{children:"You have one or more Chainweb nodes that connect to the Kadena test network or main production network."}),"\n",(0,i.jsxs)(n.li,{children:["You are familiar with Kadena single-key and multi-key ",(0,i.jsx)(n.a,{href:"/resources/glossary#account",children:"accounts"}),", account naming conventions, and the use of ",(0,i.jsx)(n.a,{href:"/resources/glossary#keyset",children:"keysets"}),".\nFor more information about working with accounts and keys, see ",(0,i.jsx)(n.a,{href:"/smart-contracts/accounts",children:"Accounts, keys, and principals"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"You want to use the Kadena client libraries to write scripts that perform common tasks, like creating transactions and listening for events."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This guide includes code examples written in TypeScript for all of the common exchange-related activity.\nIf you aren't already hosting your own Chainweb node, see ",(0,i.jsx)(n.a,{href:"/guides/nodes/howto-node-operator",children:"Get started running a node"})," for an introduction to setting up a Chainweb node."]}),"\n",(0,i.jsx)(n.h2,{id:"connect-to-specific-chains",children:"Connect to specific chains"}),"\n",(0,i.jsx)(n.p,{children:"You can interact with the Kadena network through any of its separate chains.\nThe chains\u2014with chain identifiers 0 through 19\u2014share a common view of blockchain history through consensus, but operate independently and in parallel."}),"\n",(0,i.jsxs)(n.p,{children:["Because the chains operate independently and you must specify the chain identifier that you want to send transactions to, you can write a custom ",(0,i.jsx)(n.strong,{children:"host generator"})," function that specifies the node host name or IP address of the node you manage and the specific chains you want to interact with."]}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates creating a Kadena ",(0,i.jsx)(n.strong,{children:"client"})," connection that connects the host ",(0,i.jsx)(n.code,{children:"kadena-node.my-exchange.tld"})," but only interacts with chains 0, 1, and 2:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Import the createClient function from the library.\nimport { createClient } from '@kadena/client';\n\n// This customHostGeneratorFunction specifies the chainweb-node hostname\n// and specific chains for API calls.\nconst customHostGeneratorFunction = ({ networkId, chainId }) => {\n  if (![0, 1, 2].includes(chainId)) {\n    throw new Error('Exchange only conducts business on chains 0, 1, and 2.');\n  }\n\n  const hostname = 'kadena-node.my-exchange.tld';\n  return `https://${hostname}/chainweb/0.0/${networkId}/chain/${chainId}/pact`;\n};\n\n// This call creates a client that can connect to the blockchain.\nconst client = createClient(customHostGeneratorFunction, {\n  // Exchanges typically wait for more blocks to be confirmed by consensus.\n  confirmationDepth: 10, \n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more information about the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," libraries, see ",(0,i.jsx)(n.a,{href:"/reference/kadena-client#get-started-with-kadena-client",children:"Get started with Kadena client"}),".\nFor more information about interacting with the Kadena ",(0,i.jsx)(n.code,{children:"coin"})," contract and developing custom interfaces, see the ",(0,i.jsx)(n.a,{href:"https://github.com/kadena-community/kadena.js/tree/main/packages/libs/client-utils",children:"client-utils"})," repository and ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/client-utils",children:"npm package"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"generate-an-account-on-the-blockchain",children:"Generate an account on the blockchain"}),"\n",(0,i.jsxs)(n.p,{children:["For exchanges, the recommended best practice is to use a ",(0,i.jsx)(n.strong,{children:"multi-signature account"})," to manage the funds that are owned by the exchange.\nWith a multi-signature account, you can apply the ",(0,i.jsx)(n.strong,{children:"four-eyes"})," principle to require transactions to be approved by at least two people."]}),"\n",(0,i.jsx)(n.p,{children:"The four-eyes principle, sometimes referred to as the two-person rule, is a broadly-accepted security method that ensures certain activities\u2014such as the transfer of assets\u2014are approved by at least two authorized individuals.\nExchanges can apply this principle to prevent errors, fraud, or malicious behavior using the built-in\npredicates for multi-signature accounts:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"keys-all"})," requires all authorized account keys to sign every transaction."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"keys-2"})," requires at least two of any number of authorized account keys to sign every transaction."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"keys-any"})," requires that any single authorized account key signs every transaction."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Typically, exchanges use the ",(0,i.jsx)(n.code,{children:"keys-2"})," predicate for the account that manages funds owned by the exchange and two or more authorized account keys."]}),"\n",(0,i.jsx)(n.p,{children:"You can create a multi-signature account and associated keys by using any wallet that supports the Kadena network and native KDA currency.\nFor example, you can create keys and accounts by using any of the following wallets:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://wallet.kadena.io",children:"Chainweaver v3"})," (built by Kadena).\nYou can also import accounts and keys from previous versions of Chainweaver."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://docs.kadena.io/reference/cli/cli-wallet",children:"Kadena CLI Wallet"})," (built by Kadena).\nYou can also use ",(0,i.jsx)(n.code,{children:"@kadena/kadena-cli"})," to import accounts and keys from previous versions of Chainweaver, from other wallets, or from public and private key pairs you've generated using other tools."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.kadena.io/defi/wallets?topic=Wallets",children:"Other Kadena ecosystem wallets"}),".\nYou can also create an account using any of the wallets developed by third parties that support the Kadena network."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Kadena ecosystem wallets",src:t(65243).A+"",width:"2724",height:"1528"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"using-chainweaver",children:"Using Chainweaver"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.a,{href:"https://wallet.kadena.io",children:"Chainweaver v3"})," and click ",(0,i.jsx)(n.strong,{children:"Add new profile"})," to create a wallet or ",(0,i.jsx)(n.strong,{children:"Recover your wallet"})," to import information from a backup file or recovery phrase."]}),"\n",(0,i.jsxs)(n.p,{children:["If creating a new wallet, type a ",(0,i.jsx)(n.strong,{children:"Profile name"})," and select a security method.\nIf recovering a wallet, provide the backup file or recovery phrase to import keys and accounts."]}),"\n",(0,i.jsxs)(n.p,{children:["After creating or importing the wallet, the list of your assets on the Kadena ",(0,i.jsx)(n.strong,{children:"Mainnet"})," network is displayed by default.\nYou can change the current network to ",(0,i.jsx)(n.strong,{children:"Testnet"})," or add another network by clicking ",(0,i.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Chainweaver network selection",src:t(67552).A+"",width:"2864",height:"998"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"+ Account"}),", then select ",(0,i.jsx)(n.strong,{children:"Create Multi-Sig"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Type an account alias name, select or enter the public keys for the account, and select a predicate, then click ",(0,i.jsx)(n.strong,{children:"Create account"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fungible Contract"}),": Select KDA (coin)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Alias"}),": Type an alias for the ",(0,i.jsx)(n.code,{children:"w:"})," account name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Key"}),": Select or enter each public key for the multi-signature account."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Predicate"}),": Select one of the built-in predicates to use for the multi-signature account."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Verify the new account is listed with a ",(0,i.jsx)(n.code,{children:"w:"})," prefix in the list of assets."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Multi-signature account",src:t(73830).A+"",width:"2332",height:"510"})}),"\n",(0,i.jsx)(n.p,{children:"Note that the account has no funds.\nAt this point, the account isn't associated with any of the chains in the network.\nYou must add funds on at least one specific chain in the network  you've selected for the account to become active and available for use."}),"\n",(0,i.jsxs)(n.p,{children:["If you are setting up this multi-signature account on the Testnet network, you can fund the account directly from Chainweaver by clicking ",(0,i.jsx)(n.strong,{children:"Fund on Testnet"})," in the account details, or by using the ",(0,i.jsx)(n.a,{href:"https://tools.kadena.io/faucet/new",children:"Developer Tools Testnet faucet"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click the multi-signature account alias to view its details, then click ",(0,i.jsx)(n.strong,{children:"Fund on Testnet"})," to fund the account."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Fund on Testnet in Chainweaver v3",src:t(46742).A+"",width:"1772",height:"156"})}),"\n",(0,i.jsxs)(n.p,{children:["After the transaction is mined into a block, you can click ",(0,i.jsx)(n.strong,{children:"Chain Distribution"})," to see the chain that received funds on the Testnet network.\nIf needed, you can transfer funds to your account on another chain."]}),"\n",(0,i.jsx)(n.p,{children:"If you're funding an account on the Mainnet network, you must acquire funds through another exchange."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"using-mnemonic-phrases",children:"Using mnemonic phrases"}),"\n",(0,i.jsxs)(n.p,{children:["To use mnemonic phrases programmatically, you can use the ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/hd-wallet",children:(0,i.jsx)(n.code,{children:"@kadena/hd-wallet"})})," library.\nFor more information about this library, see the ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/hd-wallet",children:"npm package"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"using-client-utilities",children:"Using client utilities"}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to create a Kadena account with two public keys and the ",(0,i.jsx)(n.code,{children:"keys-2"})," predicate requiring both signatures to sign transaction on the Kadena main network and chain 0:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { createAccount } from '@kadena/client-utils/coin';\n\nconst result = await createAccount(\n  {\n    account: 'k:' + publicKey,\n    keyset: {\n      pred: 'keys-2',\n      keys: [publicKeyA, publicKeyB], // two public keys for a 2-of-2 multisig\n      // keys: [publicKeyA, publicKeyB, publicKeyC], // three public keys for a 2-of-3 multisig\n    },\n    gasPayer: { account: 'gasPayer', publicKeys: [''] },\n    chainId: '0',\n  },\n  {\n    host: customHostGeneratorFunction,\n    defaults: {\n      networkId: 'mainnet01',\n    },\n    sign: signWithChainweaver,\n  },\n)\n  // signed Tx\n  .on('sign', (data) => console.log(data))\n  // preflight result\n  .on('preflight', (data) => console.log(data))\n  // submit result\n  .on('submit', (data) => console.log(data))\n  // listen result\n  .on('listen', (data) => console.log(data))\n  .execute();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"retrieve-balances",children:"Retrieve balances"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates using the ",(0,i.jsx)(n.code,{children:"getBalance"})," function from the ",(0,i.jsx)(n.code,{children:"@kadena/client-utils"})," library:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { getBalance } from '@kadena/client-utils/coin';\n\nconst balance = await getBalance(\n  'k:my-wallet-address',\n  'mainnet01',\n  '0', // chainId\n  customHostGeneratorFunction, // You can pass the hostname or a generator function.\n);\nconsole.log(`Balance: ${balance}`);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"create-sign-and-send-a-transaction",children:"Create, sign, and send a transaction"}),"\n",(0,i.jsxs)(n.p,{children:["To create a transaction manually, you can combine the ",(0,i.jsx)(n.code,{children:"Pact.builder"})," and ",(0,i.jsx)(n.code,{children:"Pact.modules"})," functions:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Pact.builder"})," to create an unsigned transaction request to execute in the transaction request."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Pact.modules.<module>.<function>"})," to create a Pact expression."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how create, sign, and send a ",(0,i.jsx)(n.code,{children:"transfer"})," transaction manually using the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"async function transfer(\n  sender: string,\n  senderAPublicKey: string,\n  senderBPublicKey: string,\n  receiver: string,\n  amount: IPactDecimal,\n): Promise<void> {\n  const transaction = Pact.builder\n    .execution(\n      // pact expression\n      Pact.modules.coin.transfer(sender, receiver, amount),\n    )\n    // add signers\n    .addSigner(senderAPublicKey, (signFor) => [\n      // add capabilities\n      signFor('coin.GAS'),\n      signFor('coin.TRANSFER', sender, receiver, amount),\n    ])\n    // if second signer is needed due to `keys-2` predicate on the `sender` account\n    .addSigner(senderBPublicKey, (signFor) => [\n      signFor('coin.TRANSFER', sender, receiver, amount),\n    ])\n    // set chainId and sender\n    .setMeta({ chainId: '0', senderAccount: sender })\n    .setNetworkId('mainnet01')\n    // will create a IUnsignedTransaction { cmd, hash, sigs }\n    .createTransaction();\n\n  const signedTx = await signWithChainweaver(transaction);\n\n  // create client\n  const client = createClient(customHostGeneratorFunction, {\n    confirmationDepth: 10,\n  });\n\n  // check if all necessary signatures are added\n  if (isSignedTransaction(signedTx)) {\n    const transactionDescriptor = await client.submit(signedTx);\n    const response = await client.listen(transactionDescriptor, {});\n    if (response.result.status === 'failure') {\n      throw response.result.error;\n    } else {\n      console.log(response.result);\n    }\n  }\n}\n\n// run the function\ntransfer(senderAccount, senderPublicKey, receiverAccount, {\n  decimal: '13.37',\n}).catch(console.error);\n"})}),"\n",(0,i.jsx)(n.p,{children:"The following code illustrates signing with a known public and secret keypair:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { Pact, createClient, isSignedTransaction, createSignWithKeypair } from '@kadena/client';\nimport { IKeyPair } from '@kadena/client';\n\nasync function transfer(\n  sender: string,\n  senderAPublicKey: string,\n  senderBPublicKey: string,\n  receiver: string,\n  amount: IPactDecimal,\n): Promise<void> {\n  const unsignedTransaction = Pact.builder\n    .execution(\n      // pact expression\n      Pact.modules.coin.transfer(sender, receiver, amount),\n    )\n    // add signers\n    .addSigner(senderPublicKey, (signFor) => [\n      // add capabilities\n      signFor('coin.GAS'),\n      signFor('coin.TRANSFER', sender, receiver, amount),\n    ])\n    \n    // set chainId and sender\n    .setMeta({ chainId: '0', senderAccount: sender })\n    .setNetworkId('mainnet01')\n    // will create a IUnsignedTransaction { cmd, hash, sigs }\n    .createTransaction();\n\n    const knownKeyPair:IKeyPair = {\n      publicKey:\n        \"02b055c8be0eeaa659d0927f3e2399080c91f3fdf94d079498b04d6987acbd46\",\n      secretKey:\n        '5a02489796c9ec2ec74edf15b63140224d0516ce6cd8f62303ac63b56a45c336',\n    };\n\n    // create client\n    const client = createClient(customHostGeneratorFunction, {\n      confirmationDepth: 10,\n    });\n\n    const signWithKeypair = createSignWithKeypair([knownKeyPair]);\n    const signedTx = await signWithKeypair(unsignedTransaction);\n\n    const preflightResponse = await client.preflight(signedTx);\n\n  if (preflightResponse.result.status === 'failure') {\n    throw preflightResponse.result.error;\n  }\n\n  if (isSignedTransaction(signedTx)) {\n    const transactionDescriptor = await client.submit(signedTx);\n    const response = await client.listen(transactionDescriptor);\n    if (response.result.status === 'failure') {\n      throw response.result.error;\n    } else {\n      console.log(response.result);\n    }\n  }\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that you can also use transaction templates and ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/kadena-cli",children:"@kadena/kadena-cli"})," to create, sign, and send transactions.\nYou can automate the flow by using command-line options to execute transactions without interactive prompts.\nFor more information about using ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/kadena-cli",children:"@kadena/kadena-cli"})," to automate transaction processing, see ",(0,i.jsx)(n.a,{href:"/reference/kadena-cli-ref",children:"Kadena-cli commands"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"check-the-status-of-a-transaction",children:"Check the status of a transaction"}),"\n",(0,i.jsx)(n.p,{children:"There are two primary ways to check the status of a transaction programmatically:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You can check the status of a single transaction by passing the ",(0,i.jsx)(n.code,{children:"requestKey"})," hash for the transaction when calling the ",(0,i.jsx)(n.code,{children:"getStatus"})," function."]}),"\n",(0,i.jsx)(n.li,{children:"You can poll for the status of one or more transactions until the transaction request returned a result."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"single-check",children:"Single check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'const client = createClient(/* omitted options, see "Low Level Client"*/);\n// requestKey is the hash of the submitted transaction\nclient.getStatus({ chainId, networkId, requestKey });\n'})}),"\n",(0,i.jsx)(n.h3,{id:"polling-check",children:"Polling check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"client.pollStatus(\n  { networkId: 'mainnet01', chainId: '0', requestKey: 'tx-hash' },\n  { confirmationDepth: 10 },\n);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"estimate-gas-usage",children:"Estimate gas usage"}),"\n",(0,i.jsxs)(n.p,{children:["To get an estimation of the gas usage, you can execute a ",(0,i.jsx)(n.code,{children:"local"})," call."]}),"\n",(0,i.jsx)(n.p,{children:"Note that the gas estimation can be different from the actual gas by a transaction when the transaction is executed on the blockchain.\nState changes that are recorded on the blockchain can influence the branches the code takes, and, as a result, affect the gas required to execute the transaction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// We do not need to send signatures to check gas estimation.\n// However, signatures can influence the direction of the code, thus gas usage.\nconst response = await client.local(unsignedTx, {\n  preflight: true,\n  signatureVerification: false,\n});\n\nif (response.result.status === 'failure') {\n  throw response.result.error;\n}\n\nconst gasEstimation = response.gas;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"listen-for-events",children:"Listen for events"}),"\n",(0,i.jsxs)(n.p,{children:["There are several ways you can listen for events emitted by transactions that are executed on the blockchain.\nFor example, you can listen for ",(0,i.jsx)(n.code,{children:"coin.TRANSFER"})," events in the following ways:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-stream",children:(0,i.jsx)(n.code,{children:"chainweb-stream"})})," server package with the\n",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/chainweb-stream-client",children:(0,i.jsx)(n.code,{children:"@kadena/chainweb-stream-client"})})," to listen for specific events."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use third-party indexing services such as ",(0,i.jsx)(n.a,{href:"https://www.kadindexer.io/",children:"Kadindexer"})," or ",(0,i.jsx)(n.a,{href:"https://www.tatum.io/chain/kadena",children:"Tatum"})," to listen for specific events."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Implement a custom listener using the ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@kadena/chainwebjs",children:(0,i.jsx)(n.code,{children:"@kadena/chainwebjs"})}),"\npackage."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-and-incident-management",children:"Monitoring and incident management"}),"\n",(0,i.jsx)(n.p,{children:"As an exchange, it is particularly important for you to monitor node operations and network activity.\nIf you notice suspicious transactions or are informed about unusual transaction activity, you should work with mining node operators and pool node operators to determine if the transaction is preventing other transactions from being processed, consuming excessive resources, or causing any nodes to fail.\nOften, adjusting transaction fees can mitigate transaction processing delays and minimize the effect for end users who are submitting transactions."}),"\n",(0,i.jsx)(n.p,{children:"If the network experiences an incident affecting transaction processing, you should pause all deposit and withdrawal activity until normal operations resume."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},67552:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/chainweaver-your-assets-a794524397bf922909ae24df662520d7.jpg"},46742:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/fund-on-testnet-38fc842f56949b5846c405210838f0d1.jpg"},73830:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/w-multi-sig-542b1d5560d1db422b6bc7081c19275b.jpg"},65243:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/wallets-website-47924a7eeb18b2d488a048c1b29e0218.jpg"},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>r});var a=t(96540);const i={},s=a.createContext(i);function c(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);