"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[1389],{10504:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>h,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"api/peer-to-peer/get-cut","title":"Query the current state","description":"Use the GET /cut endpoint to return the cut height for a Chainweb node.","source":"@site/docs/api/peer-to-peer/get-cut.md","sourceDirName":"api/peer-to-peer","slug":"/api/peer-to-peer/get-cut","permalink":"/docs/api/peer-to-peer/get-cut","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/api/peer-to-peer/get-cut.md","tags":[{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"node api","permalink":"/docs/tags/node-api"},{"inline":true,"label":"chainweb api","permalink":"/docs/tags/chainweb-api"},{"inline":true,"label":"api reference","permalink":"/docs/tags/api-reference"},{"inline":true,"label":"block height cut","permalink":"/docs/tags/block-height-cut"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Query the current state","description":"Use the GET /cut endpoint to return the cut height for a Chainweb node.","id":"get-cut","sidebar_position":2,"tags":["chainweb","node api","chainweb api","api reference","block height cut"]},"sidebar":"default","previous":{"title":"Peer-to-peer endpoints","permalink":"/docs/api/peer-to-peer/"},"next":{"title":"Publish the current state","permalink":"/docs/api/peer-to-peer/publish-cut"}}');var r=n(74848),i=n(28453);const h={title:"Query the current state",description:"Use the GET /cut endpoint to return the cut height for a Chainweb node.",id:"get-cut",sidebar_position:2,tags:["chainweb","node api","chainweb api","api reference","block height cut"]},c="Query the current state",a={},d=[{value:"Request format",id:"request-format",level:2},{value:"Responses",id:"responses",level:2},{value:"Response header",id:"response-header",level:3},{value:"Response schema",id:"response-schema",level:3},{value:"Examples",id:"examples",level:2}];function o(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"query-the-current-state",children:"Query the current state"})}),"\n",(0,r.jsxs)(t.p,{children:["In the Kadena network, a ",(0,r.jsx)(t.strong,{children:"cut height"})," represents the distributed state from a Chainweb node.\nEach cut height\u2014much like a database snapshot or a block height\u2014references one block header for each chain, compared with concurrent blocks on other chains."]}),"\n",(0,r.jsx)(t.p,{children:"Two blocks from two different chains are considered concurrent if either block is an adjacent parent and a direct dependency of the other or if the blocks do not depend at all on each other."}),"\n",(0,r.jsx)(t.h2,{id:"request-format",children:"Request format"}),"\n",(0,r.jsxs)(t.p,{children:["Use ",(0,r.jsx)(t.code,{children:"GET https://{baseURL}/cut"})," to query a Chainweb node for the current cut height on all chains."]}),"\n",(0,r.jsx)(t.p,{children:"You can specify the following optional query parameter for the request:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"maxheight"}),(0,r.jsx)(t.td,{children:"integer >= 0"}),(0,r.jsx)(t.td,{children:"Maximum cut height of the returned cut."})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"responses",children:"Responses"}),"\n",(0,r.jsxs)(t.p,{children:["Requests to ",(0,r.jsx)(t.code,{children:"GET https://{baseURL}/cut"})," return the following response code:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"200 OK"})," indicates that the request succeeded and the response body returns the blockchain state for each chain at the specified block height."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"response-header",children:"Response header"}),"\n",(0,r.jsx)(t.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"x-peer-addr"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(t.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(t.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(t.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(t.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(t.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"response-schema",children:"Response schema"}),"\n",(0,r.jsxs)(t.p,{children:["The response returns ",(0,r.jsx)(t.code,{children:"application/json"})," content with the following information:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"origin"}),(0,r.jsx)(t.td,{children:"object"}),(0,r.jsxs)(t.td,{children:["Describes a peer information object that consists of an ",(0,r.jsx)(t.code,{children:"id"})," string and an ",(0,r.jsx)(t.code,{children:"address"})," object for a Chainweb node. The ",(0,r.jsx)(t.code,{children:"origin"})," parameter is required to use the ",(0,r.jsx)(t.code,{children:"PUT /cut"})," endpoint. For more information, see the ",(0,r.jsx)(t.a,{href:"/api/data-models#peer-information-model",children:"Peer information"})," data model."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"height\xa0(required)"}),(0,r.jsx)(t.td,{children:"integer\xa0>=\xa00"}),(0,r.jsx)(t.td,{children:"Specifies the cut height. The cut height is the sum of the height for all of the blocks included in the cut. You should avoid using this value because its semantics may change in the future."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"weight\xa0(required)"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["Specifies the cut weight. The cut weight is the sum of the weights from all of the blocks included in the cut. The weight string consists of 43 characters from the [",(0,r.jsx)(t.code,{children:"a-zA-Z0-9_-"}),"] character set."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"hashes\xa0(required)"}),(0,r.jsx)(t.td,{children:"object"}),(0,r.jsx)(t.td,{children:"Specifies an object that maps chain identifiers 0-19 to their respective block hash and block height for the cut."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"instance"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"Specifies the network identifier for the cut."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"id"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsxs)(t.td,{children:["Specifies a cut identifier. The id string consists of 43 characters from the [",(0,r.jsx)(t.code,{children:"a-zA-Z0-9_-"}),"] character set."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.p,{children:"You can send a request to a bootstrap node for the Kadena main network with a call like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-Postman",children:"GET https://us-e1.chainweb.com/chainweb/0.0/mainnet01/cut?maxheight=4833114\n"})}),"\n",(0,r.jsx)(t.p,{children:"The response header for this request looks like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-text",children:"X-Server-Timestamp: 1717448611\nX-Peer-Addr: 54.86.50.139:49795\nX-Chainweb-Node-Version: 2.24\nContent-Type: application/json;charset=utf-8\n"})}),"\n",(0,r.jsx)(t.p,{children:"The response body for this request returns the state for each chain with the maximum block height of 483314:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "hashes":\n  {\n    "5":{\n      "height":483311,\n      "hash":"3uC7pcfNDQLBnkSEXak5-SJDTQDzOcCu-hzLdZB5SZY"\n    },\n    "4":{\n      "height":483311,\n      "hash":"-J7wrfvBhTV_4FMEwzcUczchURV3vR8X1Iw6_70Vdcw"\n    },\n    "7":{\n      "height":483311,\n      "hash":"Th5sqaG-czuzwwqJplj_tqJrp9C09mFFESqpxZ_n5TM"\n    },\n    "6":{\n      "height":483311,\n      "hash":"jGXtsEywkJiDd0QdTou3vP-7-s_5tf49DFq0BP0roBs"\n    },\n    "1":{\n      "height":483311,\n      "hash":"-v_J5dWJIsBa760sVDXg69OizfWvhK10VRtDDlGq4-M"\n    },\n    "0":{\n      "height":483311,\n      "hash":"pG1qqlfEaCkCcIw1cPMcFt4ELRbHVsFqtmx287DZzfw"\n    },\n    "3":{\n      "height":483311,\n      "hash":"_dZeAaGioNKP3eEMfI7yLw49RGaiSc57L7bKged_Uf0"\n    },\n    "2":{\n      "height":483311,\n      "hash":"belGw7zEJah0nNrP-jw7LarZSTt_NMlqAzvIDS40Fgo"\n    },\n    "9":{\n      "height":483311,\n      "hash":"--PHSuDXqCIXnGDXc0w49VT9yA-BJ_vwLil2IIAkrk4"\n    },\n    "8":{\n      "height":483311,\n      "hash":"1kDMHN7wEE51E1yDew16WE8GFWfSXBCpmV5Koy00Mjg"\n    }\n  },\n  "origin":null,\n  "weight":"yQadPJMTi0wrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",\n  "height":4833110,\n  "instance":"mainnet01",\n  "id":"unhwBpXkw-Pa9hulGzExDev40Ju7VelHTg1zArwsoOU"\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Note that this sample request was sent to a bootstrap node for the Kadena public blockchain, so the ",(0,r.jsx)(t.code,{children:"origin"})," is ",(0,r.jsx)(t.code,{children:"null"}),".\nIf you want to publish a cut, you must send the request to a Chainweb node that returns a value for the ",(0,r.jsx)(t.code,{children:"origin"})," property."]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>h,x:()=>c});var s=n(96540);const r={},i=s.createContext(r);function h(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:h(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);