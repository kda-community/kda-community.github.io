"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[5127],{72947:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>d,default:()=>l,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"api/service-api/make-db-backup","title":"Start a database backup","description":"Send an API request to start a database backup job if you have enabled the backup API for a node.","source":"@site/docs/api/service-api/start-db-backup-job.md","sourceDirName":"api/service-api","slug":"/api/service-api/make-db-backup","permalink":"/docs/api/service-api/make-db-backup","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/api/service-api/start-db-backup-job.md","tags":[{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"node api","permalink":"/docs/tags/node-api"},{"inline":true,"label":"chainweb api","permalink":"/docs/tags/chainweb-api"},{"inline":true,"label":"api reference","permalink":"/docs/tags/api-reference"}],"version":"current","sidebarPosition":11,"frontMatter":{"title":"Start a database backup","description":"Send an API request to start a database backup job if you have enabled the backup API for a node.","id":"make-db-backup","sidebar_position":11,"tags":["chainweb","node api","chainweb api","api reference"]},"sidebar":"default","previous":{"title":"Stream block header events","permalink":"/docs/api/service-api/api-update-event-stream"},"next":{"title":"Check a database backup","permalink":"/docs/api/service-api/check-db-backup"}}');var r=n(74848),a=n(28453);const i={title:"Start a database backup",description:"Send an API request to start a database backup job if you have enabled the backup API for a node.",id:"make-db-backup",sidebar_position:11,tags:["chainweb","node api","chainweb api","api reference"]},d="Start a database backup job",h={},c=[{value:"Enable backups",id:"enable-backups",level:2},{value:"Select a backup directory",id:"select-a-backup-directory",level:3},{value:"Back up the Pact database",id:"back-up-the-pact-database",level:3},{value:"Define a retention policy",id:"define-a-retention-policy",level:3},{value:"Request format",id:"request-format",level:2},{value:"Query parameters",id:"query-parameters",level:3},{value:"Responses",id:"responses",level:2},{value:"Response header",id:"response-header",level:3},{value:"Response schema",id:"response-schema",level:3},{value:"Check the status of a backup job",id:"check-the-status-of-a-backup-job",level:2},{value:"Path parameters",id:"path-parameters",level:3},{value:"Responses",id:"responses-1",level:3},{value:"Response header",id:"response-header-1",level:4},{value:"Response schema",id:"response-schema-1",level:4},{value:"Check node health",id:"check-node-health",level:2},{value:"Responses",id:"responses-2",level:3},{value:"Response header",id:"response-header-2",level:4},{value:"Response schema",id:"response-schema-2",level:4},{value:"Examples",id:"examples",level:3},{value:"Get general node information",id:"get-general-node-information",level:2},{value:"Responses",id:"responses-3",level:3},{value:"Response header",id:"response-header-3",level:4},{value:"Response schema",id:"response-schema-3",level:4},{value:"Examples",id:"examples-1",level:3},{value:"Blocks event stream",id:"blocks-event-stream",level:2},{value:"Responses",id:"responses-4",level:3},{value:"Response header",id:"response-header-4",level:4},{value:"Response schema",id:"response-schema-4",level:4},{value:"Examples",id:"examples-2",level:3}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"start-a-database-backup-job",children:"Start a database backup job"})}),"\n",(0,r.jsx)(s.p,{children:"You can configure a Chainweb node to support database backup jobs.\nIf you enable the backup API for a node, you can use the backup endpoints to a start backup job and check the status of a previously started backup job."}),"\n",(0,r.jsx)(s.h2,{id:"enable-backups",children:"Enable backups"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"/make-backup"})," and ",(0,r.jsx)(s.code,{children:"/check-backup"})," endpoints are only valid if you enable the backup API for a node.\nYou can enable the backup API by starting the node with the ",(0,r.jsx)(s.code,{children:"--enable-backup-api"})," and ",(0,r.jsx)(s.code,{children:"--backup-directory"})," command-line options or by specifying the following configuration settings in the node configuration file:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"backup:\n  api:\n    enabled: true\n  directory: path-to-backups-directory\n"})}),"\n",(0,r.jsx)(s.h3,{id:"select-a-backup-directory",children:"Select a backup directory"}),"\n",(0,r.jsxs)(s.p,{children:["If you enable the backup API, sending a request the ",(0,r.jsx)(s.code,{children:"POST http://{baseURL}/make-backup"})," endpoint always backs up the RocksDB portion of the Chainweb database."]}),"\n",(0,r.jsx)(s.p,{children:"In most cases, you should locate the backup directory in the same partition as the active RocksDB database.\nStoring RocksDB backups in the same partition as the active RocksDB database minimizes the space required and the time it takes to complete backups initially.\nOver time\u2014as the active database diverges from the backup copy\u2014the space required will increase.\nIf you store the backup on another partition, the backup operation takes longer and the backup copy requires as much disk space as the active RocksDB database."}),"\n",(0,r.jsx)(s.h3,{id:"back-up-the-pact-database",children:"Back up the Pact database"}),"\n",(0,r.jsx)(s.p,{children:"Chainweb nodes have two separate databases.\nOne database\u2014the RocksDB database\u2014stores information about blocks and chains.\nA second database\u2014the Pact Sqlite database\u2014stores information about smart contracts and state."}),"\n",(0,r.jsxs)(s.p,{children:["While backup jobs always back up the RocksDB database, backing up the Pact Sqlite database is optional.\nIf you include the ",(0,r.jsx)(s.code,{children:"backupPact"})," parameter in your request, the backup job backs up both databases.\nBacking up both databases takes much longer than only backing up the RocksDB database.\nIn addition, Pact database backups always require as much space as the active Pact database."]}),"\n",(0,r.jsx)(s.h3,{id:"define-a-retention-policy",children:"Define a retention policy"}),"\n",(0,r.jsx)(s.p,{children:"Database backup jobs don't provide any type of automatic backup retention policy.\nYou should define your own policy and delete old backup copies, as appropriate."}),"\n",(0,r.jsx)(s.h2,{id:"request-format",children:"Request format"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"POST http://{baseURL}/make-backup"})," to start a backup job for a Chainweb node.\nStarting a backup job creates a UNIX timestamp identifier for the job.\nYou can then use the identifier to check the status of the job to determine if the job is still in progress or the backup has been completed."]}),"\n",(0,r.jsx)(s.p,{children:"If a backup job is already in progress, this endpoint returns the UNIX timestamp job identifier instead of starting a new backup job."}),"\n",(0,r.jsx)(s.h3,{id:"query-parameters",children:"Query parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"backupPact"}),(0,r.jsx)(s.td,{children:"Indicates that you want to back up both the RocksDB database and the Pact database. This option requires additional disk space and increases the time required to complete the backup."})]})})]}),"\n",(0,r.jsx)(s.h2,{id:"responses",children:"Responses"}),"\n",(0,r.jsxs)(s.p,{children:["Requests to the ",(0,r.jsx)(s.code,{children:"POST http://{baseURL}/make-backup"})," endpoint return the following response code:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"200 OK"})," indicates that a backup job has been created."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"response-header",children:"Response header"}),"\n",(0,r.jsx)(s.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-peer-addr"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(s.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(s.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(s.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(s.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"response-schema",children:"Response schema"}),"\n",(0,r.jsxs)(s.p,{children:["The response returns ",(0,r.jsx)(s.code,{children:"text/plain"})," content with the following information:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"backupId"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the backup job identifier with a UNIX timestamp from the ",(0,r.jsx)(s.code,{children:"a-zA-Z0-9_-"})," character set."]})]})})]}),"\n",(0,r.jsx)(s.h2,{id:"check-the-status-of-a-backup-job",children:"Check the status of a backup job"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/check-backup/{backupId}"})," to check the status of a backup job."]}),"\n",(0,r.jsx)(s.h3,{id:"path-parameters",children:"Path parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"backupId\xa0(required)"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the backup job identifier with a UNIX timestamp from the ",(0,r.jsx)(s.code,{children:"a-zA-Z0-9_-"})," character set. For example: 1648665437000"]})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"responses-1",children:"Responses"}),"\n",(0,r.jsxs)(s.p,{children:["Requests to the ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/check-backup"})," endpoint can return the following response codes:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"200 OK"})," indicates that a backup job with the specified identifier exists and returns its current status."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"404 Not Found"})," indicates that there were no backup jobs matching the specified identifier."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"response-header-1",children:"Response header"}),"\n",(0,r.jsx)(s.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-peer-addr"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(s.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(s.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(s.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(s.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"response-schema-1",children:"Response schema"}),"\n",(0,r.jsxs)(s.p,{children:["The response returns ",(0,r.jsx)(s.code,{children:"text/plain"})," content with the following information:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"status"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the status of the backup job with the specified identifier. There are three possible status messages: ",(0,r.jsx)(s.code,{children:"backup-done"}),", ",(0,r.jsx)(s.code,{children:"backup-in-progress"}),", and ",(0,r.jsx)(s.code,{children:"backup-failed"}),"."]})]})})]}),"\n",(0,r.jsx)(s.h2,{id:"check-node-health",children:"Check node health"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/health-check"})," to check whether ",(0,r.jsx)(s.code,{children:"chainweb-node"})," is running and responding to API requests.\nTo check the state of consensus, you should use the ",(0,r.jsx)(s.code,{children:"GET https://{baseURL}/cut"})," endpoint instead of this endpoint."]}),"\n",(0,r.jsx)(s.h3,{id:"responses-2",children:"Responses"}),"\n",(0,r.jsxs)(s.p,{children:["Requests to the ",(0,r.jsx)(s.code,{children:"/health-check"})," endpoint return the following response code:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"200 OK"})," indicates that the node is running and responding to API requests."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"response-header-2",children:"Response header"}),"\n",(0,r.jsx)(s.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-peer-addr"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(s.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(s.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(s.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(s.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"response-schema-2",children:"Response schema"}),"\n",(0,r.jsxs)(s.p,{children:["The response returns ",(0,r.jsx)(s.code,{children:"text/plain"})," content with the following information:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"check"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Health check OK."})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(s.p,{children:"You can send a health check request to a node like this:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-Postman",children:"GET http://api.chainweb.com/health-check\n"})}),"\n",(0,r.jsx)(s.p,{children:"This request returns a plain text message like this:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"Health check OK.\n"})}),"\n",(0,r.jsx)(s.h2,{id:"get-general-node-information",children:"Get general node information"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/info"})," to return general information about the node and the Chainweb version."]}),"\n",(0,r.jsx)(s.h3,{id:"responses-3",children:"Responses"}),"\n",(0,r.jsxs)(s.p,{children:["Requests to the ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/info"})," endpoint return the following response code:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"200 OK"})," indicates that the request succeeded and the response body returns general information about the node and the chains in the network."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"response-header-3",children:"Response header"}),"\n",(0,r.jsx)(s.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-peer-addr"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(s.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(s.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(s.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(s.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"response-schema-3",children:"Response schema"}),"\n",(0,r.jsxs)(s.p,{children:["If the request is successful, the response returns ",(0,r.jsx)(s.code,{children:"application/json"})," content with the following:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeApiVersion\xa0(required)"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Specifies the Chainweb API version information for the node."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeBlockDelay\xa0(required)"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsx)(s.td,{children:"Specifies the number of seconds to delay between blocks."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeChains\xa0(required)"}),(0,r.jsx)(s.td,{children:"Array\xa0of\xa0strings"}),(0,r.jsx)(s.td,{children:"Specifies the chain identifiers for the chains in the network the node is part of."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeGenesisHeights\xa0(required)"}),(0,r.jsx)(s.td,{children:"Array\xa0of\xa0integers"}),(0,r.jsx)(s.td,{children:"Specifies the block height for the first block of each chain in the network."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeGraphHistory\xa0(required)"}),(0,r.jsx)(s.td,{children:"Array\xa0of\xa0integers"}),(0,r.jsx)(s.td,{children:"Specifies the block height and adjacent chains for all chain graphs indexed by the height of the first block with the respective graph. Graphs are encoded as adjacency lists."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeHistoricalChains\xa0(required)"}),(0,r.jsx)(s.td,{children:"Array\xa0of\xa0integers"}),(0,r.jsx)(s.td,{children:"Specifies the block height and adjacent chains for all chain graphs indexed by the height of the first block for the graph. Graphs are encoded as adjacency lists."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeLatestBehaviorHeight\xa0(required)"}),(0,r.jsx)(s.td,{children:"integer"}),(0,r.jsx)(s.td,{children:"Specifies the latest block height for the node."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeNumberOfChains\xa0(required)"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa010"}),(0,r.jsx)(s.td,{children:"Specifies the number of chains in the network the node is part of."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodePackageVersion\xa0(required)"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the release package version for the ",(0,r.jsx)(s.code,{children:"chainweb-node"})," software package running on the node."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeServiceDate\xa0(required)"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the next service date for updating the ",(0,r.jsx)(s.code,{children:"chainweb-node"})," software package running on the node."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"nodeVersion\xa0(required)"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:'Specifies the network identifier for the network the node is part of. The valid values are  "test-singleton", "development", "mainnet01", and "testnet04".'})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"examples-1",children:"Examples"}),"\n",(0,r.jsx)(s.p,{children:"You can send a request for general information to a node like this:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-Postman",children:"GET http://api.chainweb.com/info\n"})}),"\n",(0,r.jsx)(s.p,{children:"This request returns information similar to the following truncated excerpt:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n    "nodeApiVersion": "0.0",\n    "nodeBlockDelay": 30000000,\n    "nodeChains": [\n        "17",\n        "16",\n        "19",\n    ],\n    "nodeGenesisHeights": [\n        [\n            "17",\n            852054\n        ],\n        [\n            "16",\n            852054\n        ],\n        [\n            "19",\n            852054\n        ],\n    ],\n    "nodeGraphHistory": [\n        [\n            852054,\n            [\n                [\n                    17,\n                    [\n                        16,\n                        18,\n                        2\n                    ]\n                ],\n            ],\n        ],\n    ],\n    "nodeHistoricalChains": [\n        [\n            852054,\n            [\n                [\n                    17,\n                    [\n                        16,\n                        18,\n                        2\n                    ]\n                ],\n            ],\n         ],\n      ],\n    "nodeLatestBehaviorHeight": 4819247,\n    "nodeNumberOfChains": 20,\n    "nodePackageVersion": "2.26.1",\n    "nodeServiceDate": "2025-02-05T00:00:00Z",\n    "nodeVersion": "mainnet01"\n}\n'})}),"\n",(0,r.jsx)(s.h2,{id:"blocks-event-stream",children:"Blocks event stream"}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"GET http://{baseURL}/header/updates"})," to connect to a source of server events that emits a BlockHeader event for each new block header that is added to the chain database of the remote node."]}),"\n",(0,r.jsx)(s.p,{children:"The stream can contain blocks that might later become orphaned.\nTo address this potential issue, you should buffer events on the client side for the most recent block heights to allow for a desired confirmation depth to be reached."}),"\n",(0,r.jsx)(s.p,{children:"You should note that the server might terminate this event stream from time to time.\nIt is up to the client to restart event streaming with a new request."}),"\n",(0,r.jsx)(s.h3,{id:"responses-4",children:"Responses"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"200 OK"})," indicates a successful requests and results in a stream of BlockHeader events.\nEach event consists of an event property and a data property and are separated by empty lines."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"response-header-4",children:"Response header"}),"\n",(0,r.jsx)(s.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-peer-addr"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,r.jsx)(s.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x-server\u2011timestamp"}),(0,r.jsx)(s.td,{children:"integer\xa0>=\xa00"}),(0,r.jsxs)(s.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,r.jsx)(s.code,{children:"1618597601"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,r.jsx)(s.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"response-schema-4",children:"Response schema"}),"\n",(0,r.jsxs)(s.p,{children:["If the request is successful, the response returns ",(0,r.jsx)(s.code,{children:"text/event-stream"})," content with the following:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"event"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:'Specifies the type of event with the event property value of "BlockHeader".'})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"data"}),(0,r.jsx)(s.td,{children:"object"}),(0,r.jsx)(s.td,{children:"Specifies the data properties for the event."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"examples-2",children:"Examples"}),"\n",(0,r.jsx)(s.p,{children:"You can send a request for block header updates from the Kadena main network like this:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-Postman",children:"GET http://api.chainweb.com/chainweb/0.0/mainnet01/header/updates\n"})}),"\n",(0,r.jsx)(s.p,{children:"This request returns a stream of events with the BlockHeader event property and a data property:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"BlockHeader event stream",src:n(11414).A+"",width:"2124",height:"168"})}),"\n",(0,r.jsx)(s.p,{children:"If you expand the data property for an event, the event includes details similar to the following:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n    "header": {\n        "adjacents": {\n            "12": "_RU_P5XpRIFJK7-xhClDzBIwRD3LCkNzhNTi4M05uPY",\n            "14": "tzNb2_b_nWkGM9Qh3u4Pxna-NU2RYBYEuZE3cwu2m1k",\n            "3": "6auRG8JDj4S4IYMF8G-d47dkwVAfX8XmOOg6isofr_M"\n        },\n        "chainId": 13,\n        "chainwebVersion": "mainnet01",\n        "creationTime": 1722966936274259,\n        "epochStart": 1722966541117672,\n        "featureFlags": 0,\n        "hash": "mb-Tn9AyDYuP5TgqaAlBu9VgR6eSZdWgKz9qtAGbrDA",\n        "height": 5016971,\n        "nonce": "5486220440094445593",\n        "parent": "ItXSuFMmiQ1tcbXHPD0YoVR-2oip8RAn0m20v09vsTc",\n        "payloadHash": "9v4k_U0IjxES-AwUSw_0PsqVBZ65msUKgZcGZO2cbY8",\n        "target": "mGwbbeZtKT0EAHYYZTgreADt6mLkayeBEQAAAAAAAAA",\n        "weight": "LJy-RUh3OhJ8VwEAAAAAAAAAAAAAAAAAAAAAAAAAAAA"\n    },\n    "powHash": "0000000000000009d25e6c0bfe4f0c07b87af281929d275412c8be921fd9334b",\n    "target": "000000000000001181276be462eaed00782b3865187600043d296de66d1b6c98",\n    "txCount": 0\n}\n'})})]})}function l(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},11414:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/blockheader-event-bb9ced23ad5bdc1cc0221e9247efe3f7.png"},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>d});var t=n(96540);const r={},a=t.createContext(r);function i(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);