"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[666],{40443:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"guides/transactions/howto-construct-tx","title":"Construct transactions","description":"How to construct transactions using transaction templates and the Kadena CLI.","source":"@site/docs/guides/transactions/construct-tx.md","sourceDirName":"guides/transactions","slug":"/guides/transactions/howto-construct-tx","permalink":"/docs/guides/transactions/howto-construct-tx","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/transactions/construct-tx.md","tags":[],"version":"current","frontMatter":{"title":"Construct transactions","description":"How to construct transactions using transaction templates and the Kadena CLI.","id":"howto-construct-tx"},"sidebar":"default","previous":{"title":"Call contract functions","permalink":"/docs/guides/contracts/howto-call-functions"},"next":{"title":"Sign and submit transactions","permalink":"/docs/guides/transactions/howto-sign-submit-tx"}}');var s=n(74848),i=n(28453);const o={title:"Construct transactions",description:"How to construct transactions using transaction templates and the Kadena CLI.",id:"howto-construct-tx"},r="Construct transactions",c={},d=[{value:"Default templates",id:"default-templates",level:2},{value:"Command options",id:"command-options",level:2},{value:"Template formats, prefixes, and variables",id:"template-formats-prefixes-and-variables",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"construct-transactions",children:"Construct transactions"})}),"\n",(0,s.jsx)(t.p,{children:"There are several ways you can construct transaction requests that you want to submit to the Kadena blockchain.\nFor example, you can construct transaction by:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Manually craft API requests."}),"\n",(0,s.jsx)(t.li,{children:"Running Kadena CLI commands."}),"\n",(0,s.jsx)(t.li,{children:"Calling functions in the Kadena client library."}),"\n",(0,s.jsx)(t.li,{children:"Interacting with frontend tools like Chainweaver."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The Kadena CLI provides one of the most versatile ways to construct transactions by enabling you to create and use ",(0,s.jsx)(t.strong,{children:"transaction templates"}),".\nWith transaction templates, you can create transactions for common operations and customize the values used each time the transaction is submitted.\nBy providing values for template variables at runtime, you can generate transactions for multiple chains, accounts, or assets that are ready to sign and submit with minimal configuration requirements.\nYou can provide template values interactively, specify them as command-line options, or pass them as input from a data file."]}),"\n",(0,s.jsx)(t.h2,{id:"default-templates",children:"Default templates"}),"\n",(0,s.jsxs)(t.p,{children:["The Kadena CLI provides three default templates.\nThe default templates\u2014defined in the ",(0,s.jsx)(t.code,{children:"transfer-create.ktpl"}),", ",(0,s.jsx)(t.code,{children:"transfer.ktpl"}),", and ",(0,s.jsx)(t.code,{children:"safe-transfer.ktpl"})," files\u2014are stored in the ",(0,s.jsx)(t.code,{children:".kadena/transaction-templates"})," directory after you configure your local development environment using the ",(0,s.jsx)(t.code,{children:"kadena config init"})," command.\nThese templates cover the most common transaction types, allowing for straightforward transfers of tokens between accounts."]}),"\n",(0,s.jsx)(t.h2,{id:"command-options",children:"Command options"}),"\n",(0,s.jsx)(t.p,{children:"The basic syntax for creating a transaction from a template is:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kadena tx add [options]\n"})}),"\n",(0,s.jsx)(t.p,{children:"If you run the command without any options, you are prompted to select a template and enter the information required to create the transaction interactively.\nIf you want to create a transaction without interactive prompted, you can specify command-line options similar to the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'kadena tx add --template="transfer.kptl" --template-data="data.yaml" --network-id="testnet04" --out-file="transaction.json"\n'})}),"\n",(0,s.jsx)(t.p,{children:"In this example:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:'--template="transfer.kptl"'})," argument is required to identify the template you want to use to construct the transaction."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:'--template-data="data.yaml"'})," argument specifies the file that contains the values to use for the template variables."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:'--network-id="testnet04"'})," argument specifies the network the transaction is intended for."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:'--out-file="transaction.json"'})," argument specifies the file name for the generated transaction that is saved in the current working directory."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["For information about the command-line options you can use with the ",(0,s.jsx)(t.code,{children:"kadena tx add"})," command, type:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kadena tx add --help\n"})}),"\n",(0,s.jsxs)(t.p,{children:["For additional information about using the ",(0,s.jsx)(t.code,{children:"kadena tx add"})," command, see ",(0,s.jsx)(t.a,{href:"/reference/cli/cli-tx#kadena-tx-add",children:"kadena tx add"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"template-formats-prefixes-and-variables",children:"Template formats, prefixes, and variables"}),"\n",(0,s.jsxs)(t.p,{children:["Transaction templates use the YAML API request format for execution (",(0,s.jsx)(t.code,{children:"exec"}),") and continuation (",(0,s.jsx)(t.code,{children:"cont"}),") transaction requests.\nHowever, templates support the use of variables for input values that can be entered interactively or from a data file.\nThe following example illustrates the use of ",(0,s.jsx)(t.strong,{children:"prefixes"})," to identify the data types and values expected for fields in a ",(0,s.jsx)(t.code,{children:"coin.transfer"})," transaciton using the ",(0,s.jsx)(t.code,{children:"transfer.kptl"})," template:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"code: |-\n  (coin.transfer \"{{{account:from}}}\" \"{{{account:to}}}\" {{decimal:amount}})\ndata:\nmeta:\n  chainId: '{{chain-id}}'\n  sender: '{{{account:from}}}'\n  gasLimit: 2300\n  gasPrice: 0.000001\n  ttl: 600\nsigners:\n  - public: '{{key:from}}'\n    caps:\n      - name: 'coin.TRANSFER'\n        args: ['{{{account:from}}}', '{{{account:to}}}', {{decimal:amount}}]\n      - name: 'coin.GAS'\n        args: []\nnetworkId: '{{network:networkId}}'\ntype: exec\n"})}),"\n",(0,s.jsx)(t.p,{children:"The template uses the following prefixes to identify the expected data type and format for each field:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"account:"})," prefix is used for variables that should specify a valid Kadena account name."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"key:"})," prefix is used for variables that should specify a public key."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"network:"})," prefix is used for variables that should specify the appropriate network identifier for the transaction."]}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.code,{children:"decimal:"})," prefix is used for variables that should specify a numerical values with a decimal point."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"If you create transactions interactively, the prefixes are displayed to ensure you are prompted for the appropriate information for the transaction you are constructing.\nIf you provide variable input on the command-line or in a file, the prefixes are ignored and you must provide the appropriate data types and formats to create valid transactions."}),"\n",(0,s.jsxs)(t.p,{children:["If you aren't sure of the variables that a template requires, you can list the variables defined for a template by using the ",(0,s.jsx)(t.code,{children:"--holes"})," command-line option.\nFor example, you can list the template variables for the ",(0,s.jsx)(t.code,{children:"transfer.ktpl"})," template like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'kadena tx add --template="transfer.ktpl" --holes\n'})}),"\n",(0,s.jsx)(t.p,{children:"This command returns the list of variables like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"Template variables used in this template:\naccount:from: ''\naccount:to: ''\ndecimal:amount: ''\nchain-id: ''\nkey:from: ''\nnetwork:networkId: ''\n"})}),"\n",(0,s.jsx)(t.p,{children:"You can create a file with input values for the template variables in YAML format similar to the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"account:from: 'k:99d30af3fa91d78cc06cf53a0d4eb2d7fa2a5a72944cc5451311b455a67a3c1c'\naccount:to: 'k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c'\ndecimal:amount: '1.0'\nchain-id: '3'\nkey:from: '99d30af3fa91d78cc06cf53a0d4eb2d7fa2a5a72944cc5451311b455a67a3c1c'\nnetwork:networkId: 'development'\n"})}),"\n",(0,s.jsx)(t.p,{children:"You can then construct a transaction that uses these input values with a command similar to the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'kadena tx add --template="transfer.ktpl" --template-data="input-values.yaml" --out-file="transfer-tx-01.json"\n'})}),"\n",(0,s.jsx)(t.p,{children:"This command creates an unsigned transaction in your working directory.\nAfter you construct the transfer transaction, you can sign it with the following command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kadena tx sign\n"})}),"\n",(0,s.jsx)(t.p,{children:"After you sign the transfer transaction, you can send the signed transaction to the blockchain with the following command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kadena tx sign\n"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(96540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);