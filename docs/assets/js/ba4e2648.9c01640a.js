"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[9613],{21716:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reference/syntax","title":"Syntax and keywords","description":"This reference provide a summary of syntax conventions for the Pact smart contract programming language.","source":"@site/docs/reference/syntax.md","sourceDirName":"reference","slug":"/reference/syntax","permalink":"/docs/reference/syntax","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/syntax.md","tags":[{"inline":true,"label":"pact","permalink":"/docs/tags/pact"},{"inline":true,"label":"language reference","permalink":"/docs/tags/language-reference"},{"inline":true,"label":"syntax","permalink":"/docs/tags/syntax"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Syntax and keywords","description":"This reference provide a summary of syntax conventions for the Pact smart contract programming language.","id":"syntax","sidebar_position":2,"tags":["pact","language reference","syntax"]},"sidebar":"default","previous":{"title":"Reference","permalink":"/docs/reference/"},"next":{"title":"Function quick reference","permalink":"/docs/pact-5/func-quick-ref"}}');var i=a(74848),t=a(28453);const r={title:"Syntax and keywords",description:"This reference provide a summary of syntax conventions for the Pact smart contract programming language.",id:"syntax",sidebar_position:2,tags:["pact","language reference","syntax"]},l="Syntax and keywords",c={},d=[{value:"Text strings",id:"text-strings",level:2},{value:"Symbols",id:"symbols",level:2},{value:"Integers",id:"integers",level:2},{value:"Decimals",id:"decimals",level:2},{value:"Booleans",id:"booleans",level:2},{value:"Lists",id:"lists",level:2},{value:"Objects",id:"objects",level:2},{value:"Bindings",id:"bindings",level:2},{value:"Lambdas",id:"lambdas",level:2},{value:"Type specifiers",id:"type-specifiers",level:2},{value:"Function arguments and return types",id:"function-arguments-and-return-types",level:3},{value:"Let variables",id:"let-variables",level:3},{value:"Schema type literals",id:"schema-type-literals",level:2},{value:"Module type literals",id:"module-type-literals",level:2},{value:"Dereference operator",id:"dereference-operator",level:2},{value:"bless",id:"bless",level:2},{value:"Basic syntax",id:"basic-syntax",level:3},{value:"Examples",id:"examples",level:3},{value:"cond",id:"cond",level:2},{value:"Basic syntax",id:"basic-syntax-1",level:3},{value:"Examples",id:"examples-1",level:3},{value:"defcap",id:"defcap",level:2},{value:"Basic syntax",id:"basic-syntax-2",level:3},{value:"Examples",id:"examples-2",level:3},{value:"defconst",id:"defconst",level:2},{value:"Basic syntax",id:"basic-syntax-3",level:3},{value:"Examples",id:"examples-3",level:3},{value:"defun",id:"defun",level:2},{value:"Basic syntax",id:"basic-syntax-4",level:3},{value:"Examples",id:"examples-4",level:3},{value:"defpact",id:"defpact",level:2},{value:"Basic syntax",id:"basic-syntax-5",level:3},{value:"Examples",id:"examples-5",level:3},{value:"defschema",id:"defschema",level:2},{value:"Basic syntax",id:"basic-syntax-6",level:3},{value:"Examples",id:"examples-6",level:3},{value:"deftable",id:"deftable",level:2},{value:"Basic syntax",id:"basic-syntax-7",level:3},{value:"Examples",id:"examples-7",level:3},{value:"do",id:"do",level:2},{value:"Basic syntax",id:"basic-syntax-8",level:3},{value:"Examples",id:"examples-8",level:3},{value:"error",id:"error",level:2},{value:"Basic syntax",id:"basic-syntax-9",level:3},{value:"Examples",id:"examples-9",level:3},{value:"implements",id:"implements",level:2},{value:"Basic syntax",id:"basic-syntax-10",level:3},{value:"interface",id:"interface",level:2},{value:"Basic syntax",id:"basic-syntax-11",level:3},{value:"Examples",id:"examples-10",level:3},{value:"let",id:"let",level:2},{value:"Basic syntax",id:"basic-syntax-12",level:3},{value:"Examples",id:"examples-11",level:3},{value:"let*",id:"let-1",level:2},{value:"Basic syntax",id:"basic-syntax-13",level:3},{value:"Examples",id:"examples-12",level:3},{value:"Metadata prefix (@)",id:"metadata-prefix-",level:2},{value:"module",id:"module",level:2},{value:"Basic syntax",id:"basic-syntax-14",level:3},{value:"Examples",id:"examples-13",level:3},{value:"pure",id:"pure",level:2},{value:"Basic syntax",id:"basic-syntax-15",level:3},{value:"Examples",id:"examples-14",level:3},{value:"step",id:"step",level:2},{value:"Basic syntax",id:"basic-syntax-16",level:3},{value:"Examples",id:"examples-15",level:3},{value:"step-with-rollback",id:"step-with-rollback",level:2},{value:"Basic syntax",id:"basic-syntax-17",level:3},{value:"Examples",id:"examples-16",level:3},{value:"use",id:"use",level:2},{value:"Basic syntax",id:"basic-syntax-18",level:3},{value:"Examples",id:"examples-17",level:3},{value:"Expressions",id:"expressions",level:2},{value:"Atoms",id:"atoms",level:3},{value:"S-expressions",id:"s-expressions",level:3},{value:"References",id:"references",level:3}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"syntax-and-keywords",children:"Syntax and keywords"})}),"\n",(0,i.jsx)(n.p,{children:"This reference provide a summary of syntactical conventions and reserved keywords for the Pact smart contract programming language.\nThis section doesn't include explanatory text, use case examples, or general information about the Pact language. Therefore, this section is typically not suitable for readers who are new to programming languages or who are looking for a general introduction to using Pact."}),"\n",(0,i.jsx)(n.h2,{id:"text-strings",children:"Text strings"}),"\n",(0,i.jsx)(n.p,{children:"Text string literals are delimited using double quotation marks:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> "This is a literal text string"\n"This is a literal text string"\n'})}),"\n",(0,i.jsx)(n.p,{children:"In programs, you can specify multiline strings by putting a backslash before and after whitespace within the quotation marks.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun id (a)\n  "Identity function. \\\n  \\Argument is returned."\n  a)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Multiline strings aren't support when using the Pact command-line interpreter interactively."}),"\n",(0,i.jsx)(n.h2,{id:"symbols",children:"Symbols"}),"\n",(0,i.jsx)(n.p,{children:"Symbols are string literals that represent a unique item in the runtime, like a function identifier or a table name.\nInternally, symbols are treated as string literals.\nHowever, if you want to make use of symbols to distinguish identifiers from other strings, precede the string with a single quotation mark.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'pact> \'accounts\n"accounts"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Symbol notation doesn't support whitespace nor multiline strings."}),"\n",(0,i.jsx)(n.h2,{id:"integers",children:"Integers"}),"\n",(0,i.jsx)(n.p,{children:"Integer literals are unbounded, and can be positive or negative."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact> 12345\n12345\npact> -922337203685477580712387461234\n-922337203685477580712387461234\n"})}),"\n",(0,i.jsx)(n.h2,{id:"decimals",children:"Decimals"}),"\n",(0,i.jsx)(n.p,{children:"Decimal literals have potentially unlimited precision."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact> 100.25\n100.25\npact> -356452.234518728287461023856582382983746\n-356452.234518728287461023856582382983746\n"})}),"\n",(0,i.jsx)(n.h2,{id:"booleans",children:"Booleans"}),"\n",(0,i.jsxs)(n.p,{children:["Booleans are represented by ",(0,i.jsx)(n.code,{children:"true"})," and ",(0,i.jsx)(n.code,{children:"false"})," literals."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact> (and true false)\nfalse\n"})}),"\n",(0,i.jsx)(n.h2,{id:"lists",children:"Lists"}),"\n",(0,i.jsxs)(n.p,{children:["List literals are created with square brackets (",(0,i.jsx)(n.code,{children:"[]"}),").\nOptionally, list items can be separated with commas.\nUniform literal lists are given a type in parsing."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'pact> [1 2 3]\n[1 2 3]\npact> [1,2,3]\n[1 2 3]\n\npact> (typeof [1 2 true])\n"list"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"objects",children:"Objects"}),"\n",(0,i.jsxs)(n.p,{children:["Objects are dictionaries, created with curly braces (",(0,i.jsx)(n.code,{children:"{}"}),") specifying key-value pairs using a colon (",(0,i.jsx)(n.code,{children:":"}),").\nFor certain applications, such as database updates, keys must be strings."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'pact> { "foo": (+ 1 2), "bar": "baz" }\n{"bar": "baz","foo": 3}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"bindings",children:"Bindings"}),"\n",(0,i.jsxs)(n.p,{children:["Bindings are dictionary-like forms, also created with curly braces, to bind database results to variables using the ",(0,i.jsx)(n.code,{children:":="})," operator.\nBindings are used in the following functions to assign variables to named columns in a row, or values in an object:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/pact-5/database/with-read",children:"with-read"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/pact-5/database/with-default-read",children:"with-default-read"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/pact-5/general/bind",children:"bind"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/pact-5/general/resume",children:"resume"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun check-balance (id)\n  (with-read accounts id { "balance" := bal }\n    (enforce (> bal 0) (format "Account in overdraft: {}" [bal]))))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"lambdas",children:"Lambdas"}),"\n",(0,i.jsxs)(n.p,{children:["Lambda expressions are code blocks that create anonymous functions that can be applied in a local scope, rather than at the top level of a program with the ",(0,i.jsx)(n.code,{children:"defun"})," keyword."]}),"\n",(0,i.jsxs)(n.p,{children:["Lambdas are supported in ",(0,i.jsx)(n.code,{children:"let"})," expressions, and can be as inline arguments for built-in function applications."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"; identity function\n  (let ((f (lambda (x) x))) (f a))\n\n; native example\n  (let ((f (lambda (x) x))) (map (f) [1 2 3]))\n\n; Inline native example:\n  (map (lambda (x) x) [1 2 3])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-specifiers",children:"Type specifiers"}),"\n",(0,i.jsxs)(n.p,{children:["You can specify types for functions, variables, and objects by using the colon (",(0,i.jsx)(n.code,{children:":"}),") operator followed by one of the following type literal or a user type specification:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"string"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"integer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"decimal"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"bool"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"time"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"keyset"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"list"})," or ",(0,i.jsx)(n.code,{children:"[type]"})," to specify the list type"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"object"}),", which can be further typed with a schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"table"}),", which can be further typed with a schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"module"}),", which must be further typed with required interfaces"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"  (defun mint:bool\n    ( id:string\n      account:string\n      guard:guard\n      amount:decimal\n    )\n    ...\n  )\n"})}),"\n",(0,i.jsx)(n.h3,{id:"function-arguments-and-return-types",children:"Function arguments and return types"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defun prefix:string (pfx:string str:string) (+ pfx str))\n"})}),"\n",(0,i.jsx)(n.h3,{id:"let-variables",children:"Let variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((a:integer 1) (b:integer 2)) (+ a b))\n"})}),"\n",(0,i.jsx)(n.h2,{id:"schema-type-literals",children:"Schema type literals"}),"\n",(0,i.jsxs)(n.p,{children:["A schema defined with ",(0,i.jsx)(n.a,{href:"/reference/syntax#defschema",children:"defschema"})," is referenced by a name enclosed in curly braces (",(0,i.jsx)(n.code,{children:"{}"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"  (defschema token-schema\n    id:string\n    uri:string\n    precision:integer\n    supply:decimal\n    policies:[module{kip.token-policy-v2}]\n  )\n\n  (defschema version\n    version:integer\n  )\n\n  (deftable tokens:{token-schema})\n  (deftable versions:{version})\n"})}),"\n",(0,i.jsx)(n.p,{children:"Tables and objects can only take a schema type literal."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(deftable accounts:{account})\n\n(defun get-order:{order} (id) (read orders id))\n"})}),"\n",(0,i.jsx)(n.h2,{id:"module-type-literals",children:"Module type literals"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/smart-contracts/modules#module-references",children:"Module references"})," are specified by the interfaces they demand as a comma-delimited list."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"module:{fungible-v2,user.votable}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"dereference-operator",children:"Dereference operator"}),"\n",(0,i.jsxs)(n.p,{children:["The dereference operator ",(0,i.jsx)(n.code,{children:"::"})," allows a member of an interface specified in the type of a ",(0,i.jsx)(n.a,{href:"/smart-contracts/modules#module-references",children:"module reference"})," to be invoked at runtime."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(interface baz\n  (defun quux:bool (a:integer b:string))\n  (defconst ONE 1)\n  )\n...\n(defun foo (bar:module{baz})\n  (bar::quux 1 \"hi\") ;; invokes 'quux' on whatever module is passed in\n  bar::ONE             ;; directly references interface const\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bless",children:"bless"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"bless"})," keyword to identify a previous version of a module\u2014identified by its ",(0,i.jsx)(n.code,{children:"hash"})," value\u2014that you want to continue to support."]}),"\n",(0,i.jsxs)(n.p,{children:["For more information about using the ",(0,i.jsx)(n.code,{children:"bless"})," keyword in a module declaration, see ",(0,i.jsx)(n.a,{href:"/smart-contracts/modules#module-versioning-and-dependencies",children:"Dependency management"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To support a previous version of a module, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(bless HASH)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates supporting two previous versions of the ",(0,i.jsx)(n.code,{children:"provider"})," module:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(module provider \'keyset\n  (bless "ZHD9IZg-ro1wbx7dXi3Fr-CVmA-Pt71Ov9M1UNhzAkY")\n  (bless "bctSHEz4N5Y1XQaic6eOoBmjty88HMMGfAdQLPuIGMw")\n  ...\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cond",children:"cond"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"cond"})," keyword to produce a series of ",(0,i.jsx)(n.code,{children:"if-elseif-else"})," expressions to evaluate one after another.\nFor example, if the first condition evaluated passes, then branch-1 is executed.\nIf the first condition isn't met, the second condition is evaluated and if that condition passes, then branch-2 is executed.\nThe ",(0,i.jsx)(n.code,{children:"else-branch"})," is only evaluated if all other conditions fail."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"cond"})," special form allows you to evaluate a series of ",(0,i.jsx)(n.code,{children:"if"})," expressions in a more concise manner."]}),"\n",(0,i.jsxs)(n.p,{children:["Syntactically, the ",(0,i.jsx)(n.code,{children:"cond"})," form accepts a sequence of conditions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(cond\n   (a b)\n   (c d)\n   (e f)\n   g)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When the conditions are evaluated, the statements are expanded to a series of ",(0,i.jsx)(n.code,{children:"if"})," statements:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(if a b (if c d (if e f g)))\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-1",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To evaluate a series of conditions, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(cond (condition-1 branch-1) [(condition-2 branch-2) [...]] else-branch)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use ",(0,i.jsx)(n.code,{children:"cond"})," to evaluate multiple branching conditional expressions."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(module medals GOV\n    (defcap GOV () true)\n    (defun award:string (score:integer)\n      (cond ((< score 10) "Bronze")\n            ((< score 20) "Silver")\n            ((< score 30) "Gold")\n            "Platinum"))\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you load this module, you can call the ",(0,i.jsx)(n.code,{children:"award"})," function to see the conditions evaluated:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (m.award 100)\n"Platinum"\n\npact> (m.award 23)\n"Gold"\n\npact> (m.award 3)\n"Bronze"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"defcap",children:"defcap"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"defcap"})," keyword to signal the start of a capability definition followed by the capability name, required or optional arguments, optional documentation, and the capability body composed of one or more expressions.\nA ",(0,i.jsx)(n.code,{children:"defcap"})," code block defines a capability token you want to store in the environment to grant some type of permission or privilege. The body of the code block can consist of one or more expressions."]}),"\n",(0,i.jsxs)(n.p,{children:["The body of the capability definition is only called with the ",(0,i.jsx)(n.code,{children:"with-capability"})," and ",(0,i.jsx)(n.code,{children:"compose-capability"})," functions when the token\u2014parameterized by its arguments\u2014isn't found in the environment.\nWhen the code is executed, the arguments are in scope."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-2",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a capability token that grants a permission or a privilege, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defcap name arguments [doc] capability-body ...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-2",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the ",(0,i.jsx)(n.code,{children:"USER_GUARD"})," capability:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defcap USER_GUARD (user)\n  "Enforce user account guard\n  (with-read accounts user\n    { "guard": guard }\n    (enforce-guard guard)))\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the ",(0,i.jsx)(n.code,{children:"DEBIT"})," capability:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defcap DEBIT (id:string sender:string)\n    (enforce-guard (account-guard id sender))\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"defconst",children:"defconst"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"defconst"})," keyword to define a constant name with the specified value and optional documentation or metadata. The value is evaluated when the module is loaded and held in memory for the duration of module execution."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-3",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a constant value, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defconst name value [doc-or-metadata])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-3",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:"The following examples illustrate defining constants with optional documentation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defconst COLOR_RED="#FF0000" "Red in hex")\n(defconst COLOR_GRN="#00FF00" "Green in hex")\n(defconst PI 3.14159265 "Pi to 8 decimals")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the constant ",(0,i.jsx)(n.code,{children:"PENNY"})," with an explicit type:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defconst PENNY:decimal 0.1)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"defun",children:"defun"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"defun"})," keyword to signal the start of a function definition followed by the function name, required or optional arguments, optional documentation or metadata, and the function body composed of one or more expressions.\nArguments are in scope for the function body."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-4",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a function, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defun name [arguments] [doc-or-metadata] function-body ...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-4",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following examples illustrate defining an ",(0,i.jsx)(n.code,{children:"add3"})," function and a ",(0,i.jsx)(n.code,{children:"scale3"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun add3 (a b c) (+ a (+ b c)))\n\n(defun scale3 (a b c s)\n  "multiply sum of A B C times s"\n  (* s (add3 a b c)))\n'})}),"\n",(0,i.jsx)(n.h2,{id:"defpact",children:"defpact"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"defpact"})," keyword to define a multi-step transaction with the specified ",(0,i.jsx)(n.code,{children:"name"})," as a pact.\nThe computation for a pact is composed from a sequence of steps that must be executed in a specific order and occur in distinct transactions.\nThe ",(0,i.jsx)(n.code,{children:"defpact"})," syntax is identical to the [defun](/reference/syntax#defun keyword except that the ",(0,i.jsx)(n.code,{children:"defpact"})," body must be comprised of ",(0,i.jsx)(n.a,{href:"/reference/syntax#step",children:"steps"})," to be executed in strict sequential order."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-5",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a pact, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defpact name [arguments] [doc-or-metadata] steps ...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-5",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defpact payment (payer payer-entity payee\n                  payee-entity amount)\n  (step-with-rollback payer-entity\n    (debit payer amount)\n    (credit payer amount))\n  (step payee-entity\n    (credit payee amount)))\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can nest ",(0,i.jsx)(n.code,{children:"defpact"})," calls.\nHowever, the following restrictions apply:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The number of steps in the child ",(0,i.jsx)(n.code,{children:"defpact"})," must match the number of steps of the parent ",(0,i.jsx)(n.code,{children:"defpact"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If a parent ",(0,i.jsx)(n.code,{children:"defpact"})," step has the rollback field, so must the child."]}),"\n",(0,i.jsx)(n.li,{children:"If a parent step rolls back, so do child steps."}),"\n",(0,i.jsxs)(n.li,{children:["You must call the ",(0,i.jsx)(n.code,{children:"continue"})," function with the same continuation arguments as the ",(0,i.jsx)(n.code,{children:"defpact"})," originally dispatched to support multiple nested ",(0,i.jsx)(n.code,{children:"defpact"})," calls to the same function but with different arguments."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The following example shows a well-formed ",(0,i.jsx)(n.code,{children:"defpact"})," with an equal number of steps, nested rollbacks, and ",(0,i.jsx)(n.code,{children:"continue"})," calls:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defpact payment (payer payee amount)\n  (step-with-rollback\n    (debit payer amount)\n    (credit payer amount))\n  (step payee-entity\n    (credit payee amount)))\n\n...\n(defpact split-payment (payer payee1 payee2 amount ratio)\n  (step-with-rollback\n    (let\n      ((payment1 (payment payer payee1 (* amount ratio)))\n      (payment2 (payment payer payee2 (* amount (- 1 ratio))))\n      )\n      "step 0 complete"\n    )\n    (let\n      ((payment1 (continue (payment payer payee1 (* amount ratio))))\n       (payment2 (continue (payment payer payee2 (* amount (- 1 ratio)))))\n      )\n      "step 0 rolled back"\n    )\n  )\n  (step\n    (let\n      ((payment1 (continue (payment payer payee1 (* amount ratio))))\n       (payment2 (continue (payment payer payee2 (* amount (- 1 ratio)))))\n      )\n      "step 1 complete"\n    )\n  )\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"defschema",children:"defschema"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"defschema"})," keyword to define a ",(0,i.jsx)(n.em,{children:"schema"})," of table ",(0,i.jsx)(n.code,{children:"fields"})," with the specified ",(0,i.jsx)(n.code,{children:"name"}),".\nEach field in the schema takes the form of ",(0,i.jsx)(n.code,{children:"fieldname[:fieldtype]"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-6",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a schema, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defschema name [doc-or-metadata] fields ...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-6",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the ",(0,i.jsx)(n.code,{children:"accounts"})," schema and an ",(0,i.jsx)(n.code,{children:"accounts"})," table:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defschema accounts\n  "Schema for accounts table"\n  balance:decimal\n  amount:decimal\n  ccy:string\n  data)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"deftable",children:"deftable"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"deftable"})," keyword to define a database ",(0,i.jsx)(n.em,{children:"table"})," with the specified ",(0,i.jsx)(n.code,{children:"name"}),".\nThe name you specify is used in database functions to identify the table you want to work with.\nNote the table must still be created with ",(0,i.jsx)(n.a,{href:"/pact-5/database/create-table",children:"create-table"})," function."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-7",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a table, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(deftable name[:schema] [doc-or-metadata])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-7",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining a schema and an ",(0,i.jsx)(n.code,{children:"accounts"})," table:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'  (defschema account\n    "Row type for accounts table."\n     balance:decimal\n     amount:decimal\n     ccy:string\n     rowguard:guard\n     date:time\n     data:object\n     )\n\n  (deftable accounts:{account}\n    "Main table for accounts module.")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"do",children:"do"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"do"})," keyword to evaluate a sequence of expressions and return the last one as the result."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-8",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To evaluate a sequence of expressions and return the last result, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(do (my-expression1) (my-expression2) (my-return-expression))\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-8",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (do (print "hello world!") (+ 1 2) (+ 121 299))\n"hello world!"\n420\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Notice how the return value is the last addition of ",(0,i.jsx)(n.code,{children:"(+ 121 299)"}),".\nThe ",(0,i.jsx)(n.code,{children:"do"})," keyword evaluates every expression supplied, so if any expression errors along the way, the subsequent expressions will never be evaluated.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (do (enforce false "boom") (+ 1 2))\n(interactive):1:4: boom\n 1 | (do (enforce false "boom") (+ 1 2))\n   |     ^^^^^^^^^^^^^^^^^^^^^^\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error",children:"error"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"error"})," keyword to throw a recoverable error for a specified string expression.\nThis special form enables you to throw an error with a string return value that can be caught with a ",(0,i.jsx)(n.code,{children:"try"})," expression.\nThe ",(0,i.jsx)(n.code,{children:"error"})," form is particularly useful for typechecking expressions where an ",(0,i.jsx)(n.code,{children:"(enforce false)"})," expression would not suffice because the return type for an ",(0,i.jsx)(n.code,{children:"(enforce false)"})," expression is always boolean value.\nWith the ",(0,i.jsx)(n.code,{children:"error"})," special form, you can force an error that satisfies any type signature.\nThe ",(0,i.jsx)(n.code,{children:"error"})," special form is also useful when you only want to implement specific parts of an interface.\nFor example, assume you have an interface defined as follows:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(interface implement-me\n  (defun foo:integer ())\n  (defun bar:decimal ())\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you only want to implement the ",(0,i.jsx)(n.code,{children:"foo"})," function in your module, you can use the ",(0,i.jsx)(n.code,{children:"error"})," special form like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"(module implementor GOV\n  (defcap GOV:unit () (error \u201cnon-upgradable\u201d)\n  (implements implement-me)\n  (defun foo:integer () 123)\n  (defun bar:decimal () (error \u201cI do not want to implement this\u201d)))\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"error"})," special form is essentially \u22a5-elimination for Pact and is supported in Pact 5.3, and later."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-9",children:"Basic syntax"}),"\n",(0,i.jsxs)(n.p,{children:["To throw an error for the specified string ",(0,i.jsx)(n.code,{children:"expression"}),", use the following syntax model:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(error expression)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-9",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates using the ",(0,i.jsx)(n.code,{children:"error"})," special form to force errors in a ",(0,i.jsx)(n.code,{children:".repl"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(begin-tx)\n  (interface foo\n    (defun f:integer (x:integer))\n  )\n\n  (module uses-error g\n    (defcap g:bool () (error "not upgradable"))\n\n    (defun f:integer (x:integer)\n      (error "not-callable"))\n    )\n  \n    (expect-failure "uses-error typechecks" "not-callable" (uses-error.f 1))\n(commit-tx)\n\n(begin-tx)\n  (expect-failure "uses-error cannot acquire admin" "not upgradable" (acquire-module-admin uses-error))\n(commit-tx)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can execute the ",(0,i.jsx)(n.code,{children:"error"})," test cases by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"pact error-special-form.repl --trace\n"})}),"\n",(0,i.jsx)(n.p,{children:"The tests produce the following output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'error-special-form.repl:0:0-0:10:Trace: "Begin Tx 0"\nerror-special-form.repl:1:2-3:3:Trace: Loaded interface foo, hash oYo76TzdQMOX1LiyHOYqJRxBsVq4iq7PPXIUEoMj-Kg\nerror-special-form.repl:5:2-10:5:Trace: Loaded module uses-error, hash flArwZWZKnv3fGIF5JcnRv2AiQ8vz92n0LZ18Y_cQuU\nerror-special-form.repl:12:4-12:76:Trace: "Expect failure: Success: uses-error typechecks"\nerror-special-form.repl:13:0-13:11:Trace: "Commit Tx 0"\nerror-special-form.repl:15:0-15:10:Trace: "Begin Tx 1"\nerror-special-form.repl:16:2-16:103:Trace: "Expect failure: Success: uses-error cannot acquire admin"\nerror-special-form.repl:17:0-17:11:Trace: "Commit Tx 1"\nLoad successful\n'})}),"\n",(0,i.jsx)(n.h2,{id:"implements",children:"implements"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"implements"})," keyword to specify that a module ",(0,i.jsx)(n.em,{children:"implements"})," the specified ",(0,i.jsx)(n.code,{children:"interface"}),".\nThis keyword requires the module to implement all of the functions, defpacts, and capabilities that are specified in the interface with identical signatures, including the same argument names and declared types."]}),"\n",(0,i.jsxs)(n.p,{children:["A module that implements an interface can be used as a ",(0,i.jsx)(n.a,{href:"/smart-contracts/modules#module-references",children:"module reference"})," for the specified interfaces."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-10",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To implement an interface in a module, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(implements interface)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"interface",children:"interface"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"interface"})," keyword to define and install an interface with the specified ",(0,i.jsx)(n.code,{children:"name"})," and optional documentation or metadata."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"body"})," of the interface is composed of definitions that will be scoped in the module.\nValid expressions in a module include the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defun",children:"defun"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defconst",children:"defconst"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defschema",children:"defschema"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defpact",children:"defpact"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defcap",children:"defcap"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#use",children:"use"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-11",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define an interface, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(interface name [doc-or-metadata] body ...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-10",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the ",(0,i.jsx)(n.code,{children:"coin-sig"})," interface with documentation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(interface coin-sig\n  "\'coin-sig\' represents the Kadena Coin Contract interface. This contract     \\\n  \\provides both the general interface for a Kadena\'s token, supplying a   \\\n  \\transfer function, coinbase, account creation and balance query."\n  (defun create-account:string (account:string guard:guard)\n    @doc "Create an account for ACCOUNT, with GUARD controlling access to the  \\\n    \\account."\n    @model [ (property (not (= account ""))) ]\n    )\n  (defun transfer:string (sender:string receiver:string amount:decimal)\n    @doc "Transfer AMOUNT between accounts SENDER and RECEIVER on the same    \\\n    \\chain. This fails if either SENDER or RECEIVER does not exist.           \\\n    \\Create-on-transfer can be done using the \'transfer-and-create\' function."\n    @model [ (property (> amount 0.0))\n             (property (not (= sender receiver)))\n           ]\n    )\n  (defun account-balance:decimal (account:string)\n    @doc "Check an account\'s balance"\n    @model [ (property (not (= account ""))) ]\n    )\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"let",children:"let"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"let"})," keyword to bind variables in pairs to over the scope of the code body.\nIn Pact 4, ",(0,i.jsx)(n.code,{children:"let"})," declarations didn't allow variables within bind-pairs to refer to previously-declared variables in the same declaration.\nIn Pact 4, you could use the ",(0,i.jsx)(n.code,{children:"let*"})," form to enable variables to reference previously-declared variables in the same ",(0,i.jsx)(n.code,{children:"let"})," declaration.\nIn Pact 5, the  ",(0,i.jsx)(n.code,{children:"let*"})," keyword is deprecated and you can replace all ",(0,i.jsx)(n.code,{children:"let*"})," declarations with ",(0,i.jsx)(n.code,{children:"let"})," declarations."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-12",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To bind a variable to a value, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let (bind-pair [bind-pair [...]]) body)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-11",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates binding variables to values in a ",(0,i.jsx)(n.code,{children:"let"})," declaration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact > (let ((x 2) (y 5)) (* x y))\n10\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates referencing a previously-declared variable in the same ",(0,i.jsx)(n.code,{children:"let"})," declaration in Pact 5:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((x 2) (y (* x 10)))\n(+ x y))\n22\n"})}),"\n",(0,i.jsx)(n.h2,{id:"let-1",children:"let*"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"let*"})," keyword to bind variables in pairs over the scope of the code ",(0,i.jsx)(n.code,{children:"body"}),".\nIn Pact 4, this form of the keyword enables variables to reference previously-declared variables in the same ",(0,i.jsx)(n.code,{children:"let"})," declaration.\nIn Pact 5, this form is deprecated and you can replace all let* declarations with ",(0,i.jsx)(n.code,{children:"let"})," declarations."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-13",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To bind a variable to a value, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let* (bind-pair [bind-pair [...]]) body)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-12",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates referencing a previously-declared variable in the same ",(0,i.jsx)(n.code,{children:"let*"})," declaration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let* ((x 2) (y (* x 10)))\n(+ x y))\n22\n"})}),"\n",(0,i.jsx)(n.h2,{id:"metadata-prefix-",children:"Metadata prefix (@)"}),"\n",(0,i.jsxs)(n.p,{children:["As several examples demonstrate in this section, you can often embed optional documentation strings in code blocks that use reserved keywords like ",(0,i.jsx)(n.code,{children:"defun"})," and ",(0,i.jsx)(n.code,{children:"deftable"})," like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun average (a b)\n  "take the average of a and b"\n  (/ (+ a b) 2))\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can also add metadata by using the ",(0,i.jsx)(n.code,{children:"@"}),"-prefix.\nSupported metadata fields include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@doc"})," to provide a documentation string."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@event"})," to emit an event."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@managed"})," to manage specific data associated with a capability."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"@model"})," to specify a property that can be checked for correctness in format verification."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun average (a b)\n  @doc   "take the average of a and b"\n  (/ (+ a b) 2))\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Embedded documentation strings like ",(0,i.jsx)(n.code,{children:'"Row type for accounts table."'})," are just a short form of ",(0,i.jsx)(n.code,{children:"@doc"})," metadata."]}),"\n",(0,i.jsx)(n.h2,{id:"module",children:"module"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"module"})," keyword to define and install a module with the specified ",(0,i.jsx)(n.code,{children:"name"})," that is governed by the specified ",(0,i.jsx)(n.code,{children:"keyset-or-governance"}),", with optional documentation or metadata."]}),"\n",(0,i.jsxs)(n.p,{children:["If the ",(0,i.jsx)(n.code,{children:"keyset-or-governance"})," is a string, the string represents a keyset that has been installed with the ",(0,i.jsx)(n.code,{children:"define-keyset"})," function that will be checked whenever module administrative privileges are required.\nIf ",(0,i.jsx)(n.code,{children:"keyset-or-governance"})," is an unqualified ",(0,i.jsx)(n.a,{href:"/reference/syntax#atoms",children:"atom"}),", it represents a ",(0,i.jsx)(n.code,{children:"defcap"})," capability that will be acquired if module administrative privileges are requested."]}),"\n",(0,i.jsx)(n.p,{children:"The body of a module is composed of definitions are scoped to the module.\nA module can include the following types of declarations:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defun",children:"defun"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defpact",children:"defpact"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defcap",children:"defcap"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#deftable",children:"deftable"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defschema",children:"defschema"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#defconst",children:"defconst"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#implements",children:"implements"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#use",children:"use"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/syntax#bless",children:"bless"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-14",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To define a module, use the following syntax model:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(module name keyset-or-governance [doc-or-metadata] body...)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-13",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates a defining the ",(0,i.jsx)(n.code,{children:"accounts"})," module with a keyset and two functions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(module accounts \'accounts-admin\n  "Module for interacting with accounts"\n\n  (defun create-account (id bal)\n   "Create account ID with initial balance BAL"\n   (insert accounts id { "balance": bal }))\n\n  (defun transfer (from to amount)\n   "Transfer AMOUNT from FROM to TO"\n   (with-read accounts from { "balance": fbal }\n    (enforce (<= amount fbal) "Insufficient funds")\n     (with-read accounts to { "balance": tbal }\n      (update accounts from { "balance": (- fbal amount) })\n      (update accounts to { "balance": (+ tbal amount) }))))\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"pure",children:"pure"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"pure"})," keyword to evaluate a specified ",(0,i.jsx)(n.code,{children:"expression"})," in read-only mode.\nWith this special form, the ",(0,i.jsx)(n.code,{children:"expression"})," being evaluated cannot write to the database."]}),"\n",(0,i.jsx)(n.p,{children:"For example, the following code defines a function that calls a function in a downstream module to get account details:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'  (defun details(account:string)\n    @doc "Call the downstream module dependency to get account info"\n    (my-dependency.get-account-details account)\n  )\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If this ",(0,i.jsx)(n.code,{children:"my-dependency.get-account-details"})," function includes code that modifies its own database or calls back into the calling module, the function call could make the ",(0,i.jsx)(n.code,{children:"details"})," function vulnerable to unexpected behavior or a reentry attack.\nHowever, if you modify the ",(0,i.jsx)(n.code,{children:"details"})," function to use the ",(0,i.jsx)(n.code,{children:"pure"})," special form, you can ensure that the ",(0,i.jsx)(n.code,{children:"my-dependency.get-account-details account"})," call can't modify the Pact database:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'  (defun details(account:string)\n    @doc "Call the downstream module dependency to get account info"\n    (pure (my-dependency.get-account-details account))\n  )\n'})}),"\n",(0,i.jsx)(n.p,{children:"With this code, the call to the downstream module expression\u2014enclosed in (pure ..) statement\u2014can't update any data in the calling module.\nIf the downstream module function attempts to perform an operation that's not allowed, the operation will fail with a transaction-ending error."}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-15",children:"Basic syntax"}),"\n",(0,i.jsxs)(n.p,{children:["To evaluate a specified ",(0,i.jsx)(n.code,{children:"expression"})," without allowing database writes, use the following syntax model:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(pure expression)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-14",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates that the ",(0,i.jsx)(n.code,{children:"pure"})," special form can be used to evaluate an expression, but can't be used to write to a database table:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(begin-tx)\n(module read-only-test g\n  (defcap g () true)\n\n  (defschema sc a:integer b:string)\n  (deftable tbl:{sc})\n\n  (defcap ENFORCE_ME (a:integer) true)\n\n  (defun write-entry (key:string a:integer b:string)\n    (write tbl key {"a":a, "b":b})\n  )\n\n  (defun read-entry (key:string)\n    (read tbl key)\n  )\n\n  (defun write-then-read (key:string a:integer b:string)\n    (write-entry key a b)\n    (read-entry key)\n  )\n\n  (defun errors-on-write (key:string a:integer b:string)\n    (pure (write-then-read key a b))\n    )\n  )\n\n(typecheck "read-only-test")\n\n(create-table tbl)\n\n(expect "Writes and reads work" {"a":1, "b":"v"} (write-then-read "key" 1 "v") )\n(expect-failure "Writes do not work in read-only mode" (errors-on-write "key" 1 "v"))\n(expect "Only reads work in read-only mode" {"a":1, "b":"v"} (pure (read-entry "key")))\n\n(commit-tx)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can execute the ",(0,i.jsx)(n.code,{children:"pure"})," test cases by running ",(0,i.jsx)(n.code,{children:"pact pure-special-form.repl --trace"})," to produce the following output:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'pure-special-form.repl:0:0-0:10:Trace: "Begin Tx 0"\npure-special-form.repl:1:0-25:3:Trace: Loaded module read-only-test, hash 32oanTfcea9Wp4Haq5yj0Wk_rcGxzNbuHXOUkmJnVNE\npure-special-form.repl:27:0-27:28:Trace: Typechecking successful for module read-only-test\npure-special-form.repl:29:0-29:18:Trace: "TableCreated"\npure-special-form.repl:31:0-31:80:Trace: "Expect: success Writes and reads work"\npure-special-form.repl:32:0-32:85:Trace: "Expect failure: Success: Writes do not work in read-only mode"\npure-special-form.repl:33:0-33:87:Trace: "Expect: success Only reads work in read-only mode"\npure-special-form.repl:34:0-34:11:Trace: "Commit Tx 0"\nLoad successful\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step",children:"step"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"step"})," keyword to define a step within a ",(0,i.jsx)(n.a,{href:"/reference/syntax#defpact",children:"defpact"}),", such that any prior steps will be executed in prior transactions, and later steps in later transactions.\nYou can include an ",(0,i.jsx)(n.code,{children:"entity"})," argument to indicate that a specific step is intended for confidential transactions. With this argument, only the specified ",(0,i.jsx)(n.code,{children:"entity"})," would execute the step, and other participants would skip the execution of the step."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-16",children:"Basic syntax"}),"\n",(0,i.jsxs)(n.p,{children:["To define a step in a ",(0,i.jsx)(n.code,{children:"defpact"}),", use the following syntax model:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(step expression)\n(step entity expression)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-15",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates a ",(0,i.jsx)(n.code,{children:"defpact"})," for depositing funds with two ",(0,i.jsx)(n.code,{children:"step"})," transactions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"  (defpact deposit(sender:string receiver:string guard:guard amount:decimal)\n    @doc \"Deposit KDA from L1 to L2\"\n\n    (step\n      (with-capability (LOCK_DEPOSIT sender)\n        (let ((deposit-details:object{deposit-schema}\n            { 'receiver : receiver\n            , 'amount   : amount\n            , 'guard    : guard\n            }\n          ))\n          (lock-deposit sender amount)\n          (enforce (validate-principal guard receiver) \"Guard must be a principal\")\n          (yield deposit-details \"crossnet:L2.2\")\n        )\n      )\n    )\n\n    (step\n      (resume\n        { 'receiver := receiver\n        , 'amount   := amount\n        , 'guard    := guard\n        }\n        (claim-deposit receiver guard amount)\n      )\n    )\n  )\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-with-rollback",children:"step-with-rollback"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"step-with-rollback"})," keyword to define a step within a ",(0,i.jsx)(n.a,{href:"/reference/syntax#defpact",children:"defpact"})," similar to using the step keyword except that you specify a ",(0,i.jsx)(n.code,{children:"rollback-expression"}),".\nIf you include an ",(0,i.jsx)(n.code,{children:"entity"})," argument, the ",(0,i.jsx)(n.code,{children:"rollback-expression"}),' is only be executed upon failure of a subsequent step, as part of a reverse-sequence "rollback cascade" going back from the step that failed to the first step.\nWithout the ',(0,i.jsx)(n.code,{children:"entity"})," argument, the ",(0,i.jsx)(n.code,{children:"rollback-expression"})," acts as a cancel function that is be explicitly executed by a participant."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-17",children:"Basic syntax"}),"\n",(0,i.jsxs)(n.p,{children:["To define a step in a ",(0,i.jsx)(n.code,{children:"defpact"}),", use the following syntax model:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(step-with-rollback expression rollback-expression)\n(step-with-rollback entity expression rollback-expression)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-16",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates a ",(0,i.jsx)(n.code,{children:"defpact"})," for offering a token for sale with one ",(0,i.jsx)(n.code,{children:"step-with-rollback"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'  (defpact sale:string\n    ( id:string\n      seller:string\n      amount:decimal\n      timeout:integer\n    )\n    (step-with-rollback\n      ;; Step 0: offer\n      (let ((token-info (get-token-info id)))\n        (with-capability (OFFER-CALL id seller amount timeout (pact-id))\n          (marmalade-v2.policy-manager.enforce-offer token-info seller amount timeout (pact-id)))\n        (with-capability (SALE id seller amount timeout (pact-id))\n          (offer id seller amount))\n        (pact-id)\n      )\n      ;; Step 0, rollback: withdraw\n      (let ((token-info (get-token-info id)))\n        (with-capability (WITHDRAW-CALL id seller amount timeout (pact-id))\n          (marmalade-v2.policy-manager.enforce-withdraw token-info seller amount timeout (pact-id)))\n        (with-capability (WITHDRAW id seller amount timeout (pact-id))\n          (withdraw id seller amount))\n        (pact-id)\n      )\n    )\n    (step\n      ;; Step 1: buy\n      (let ( (buyer:string (read-msg "buyer"))\n              (buyer-guard:guard (read-msg "buyer-guard")) )\n          (with-capability (BUY-CALL id seller buyer amount (pact-id))\n            (marmalade-v2.policy-manager.enforce-buy (get-token-info id) seller buyer buyer-guard amount (pact-id))\n          )\n          (with-capability (BUY id seller buyer amount (pact-id))\n            (buy id seller buyer buyer-guard amount)\n          )\n          (pact-id)\n    ))\n  )\n'})}),"\n",(0,i.jsx)(n.h2,{id:"use",children:"use"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.code,{children:"use"})," keyword to import the specified ",(0,i.jsx)(n.code,{children:"module"})," into a namespace.\nThis keyword is only valid at the top-level of a contract or within a module declaration.\nThe specified ",(0,i.jsx)(n.code,{children:"module"})," can be a string, symbol, or bare atom."]}),"\n",(0,i.jsxs)(n.p,{children:["You specify the ",(0,i.jsx)(n.code,{children:"hash"})," argument to validate that the imported module's hash matches specified ",(0,i.jsx)(n.code,{children:"hash"})," and fail if the hashes are not the same.\nYou can use the ",(0,i.jsx)(n.a,{href:"/pact-5/database/describe-module",children:"describe-module"})," function to query for the hash of a loaded module on the chain."]}),"\n",(0,i.jsxs)(n.p,{children:["You can also specify an optional list of ",(0,i.jsx)(n.code,{children:"imports"})," consisting of function, constant, and schema names to import from the specified ",(0,i.jsx)(n.code,{children:"module"}),".\nIf you explicitly define the function, constant, and schema names to import, only the listed items are available for you to use in the module body.\nIf you don't specify an import list, then every name in the imported module is brought into scope.\nIf two modules are defined in the same transaction, all names are in scope for both modules, and the import behavior defaults to the entire module."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax-18",children:"Basic syntax"}),"\n",(0,i.jsx)(n.p,{children:"To import a specified module, use the following syntax models:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(use module)\n(use module hash)\n(use module imports)\n(use module hash imports)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples-17",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates importing all of the definitions from the ",(0,i.jsx)(n.code,{children:"accounts"})," module and using the ",(0,i.jsx)(n.code,{children:"transfer"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(use accounts)\n(transfer "123" "456" 5 (time "2016-07-22T11:26:35Z"))\n"Write succeeded"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates importing all of the definitions from a specific version of ",(0,i.jsx)(n.code,{children:"accounts"})," module with the hash ",(0,i.jsx)(n.code,{children:'"ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s"'})," and using the ",(0,i.jsx)(n.code,{children:"transfer"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(use accounts "ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s")\n(transfer "123" "456" 5 (time "2016-07-22T11:26:35Z"))\n"Write succeeded"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates importing only the ",(0,i.jsx)(n.code,{children:"transfer"})," and ",(0,i.jsx)(n.code,{children:"example-fun"})," definitions from the ",(0,i.jsx)(n.code,{children:"accounts"})," module and using the ",(0,i.jsx)(n.code,{children:"transfer"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(use accounts [ transfer example-fun ])\n(transfer "123" "456" 5 (time "2016-07-22T11:26:35Z"))\n"Write succeeded"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates importing only the ",(0,i.jsx)(n.code,{children:"transfer"})," and ",(0,i.jsx)(n.code,{children:"example-fun"})," definitions from a specific version of ",(0,i.jsx)(n.code,{children:"accounts"})," module with the hash ",(0,i.jsx)(n.code,{children:'"ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s"'})," and using the ",(0,i.jsx)(n.code,{children:"transfer"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(use accounts "ToV3sYFMghd7AN1TFKdWk_w00HjUepVlqKL79ckHG_s" [ transfer example-fun ])\n(transfer "123" "456" 5 (time "2016-07-22T11:26:35Z"))\n"Write succeeded"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"expressions",children:"Expressions"}),"\n",(0,i.jsx)(n.p,{children:"Expressions can be literals, atoms, s-expressions, or references."}),"\n",(0,i.jsx)(n.h3,{id:"atoms",children:"Atoms"}),"\n",(0,i.jsxs)(n.p,{children:["Atoms are non-reserved barewords that start with a letter or allowed symbol, and contain letters, digits, and allowed symbols.\nAllowed symbols are ",(0,i.jsx)(n.code,{children:"%#+-_&$@<>=?*!|/"}),".\nAtoms must resolve to a variable bound by one of the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/reference/syntax#defun",children:"defun"})," definition."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/reference/syntax#defpact",children:"defpact"})," definition."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/reference/syntax#bindings",children:"bindings"})," form."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/reference/syntax#lambdas",children:"lambda"})," form."]}),"\n",(0,i.jsxs)(n.li,{children:["Symbols imported into the namespace with ",(0,i.jsx)(n.a,{href:"/reference/syntax#use",children:"use"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"s-expressions",children:"S-expressions"}),"\n",(0,i.jsx)(n.p,{children:"S-expressions are formed with parentheses, with the first atom determining if the expression is a special form with a reserved keyword or a function application.\nIf the expression is a function application, the first atom must refer to a definition."}),"\n",(0,i.jsxs)(n.p,{children:["An application with less than the required arguments is in some contexts a valid ",(0,i.jsx)(n.em,{children:"partial application"})," of the function.\nHowever, this is only supported in a limited number of Pact functions, such the ",(0,i.jsx)(n.code,{children:"map"}),", ",(0,i.jsx)(n.code,{children:"fold"}),", and ",(0,i.jsx)(n.code,{children:"filter"})," functions.\nWith these functions, the list item can be appended to the application arguments to serially execute the function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(map (+ 2) [1 2 3])\n(fold (+) "" ["Concatenate" " " "me"])\n'})}),"\n",(0,i.jsx)(n.p,{children:"Using a partial application with most functions results in a runtime error."}),"\n",(0,i.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.p,{children:["References are multiple atoms joined by a dot ",(0,i.jsx)(n.code,{children:"."})," that directly resolve to definitions found in other modules."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact > accounts.transfer\n"(defun accounts.transfer (src,dest,amount,date) \\"transfer AMOUNT from\nSRC to DEST\\")"\npact> transfer\nEval failure:\ntransfer<EOF>: Cannot resolve transfer\npact> (use \'accounts)\n"Using \\"accounts\\""\npact> transfer\n"(defun accounts.transfer (src,dest,amount,date) \\"transfer AMOUNT from\nSRC to DEST\\")"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["References are preferred over ",(0,i.jsx)(n.code,{children:"use"})," for transactions because references resolve faster.\nHowever, when defining a module, ",(0,i.jsx)(n.code,{children:"use"})," is preferred for legibility."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>l});var s=a(96540);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);