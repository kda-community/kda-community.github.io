"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[1731],{94771:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"coding-projects/local-testing","title":"Local testing","description":"This coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL.","source":"@site/docs/coding-projects/local-testing.md","sourceDirName":"coding-projects","slug":"/coding-projects/local-testing","permalink":"/docs/coding-projects/local-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/coding-projects/local-testing.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Local testing","description":"This coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL.","id":"local-testing","sidebar_position":7},"sidebar":"default","previous":{"title":"Loans in multiple tables","permalink":"/docs/coding-projects/loans"},"next":{"title":"Estimate gas","permalink":"/docs/coding-projects/estimate-gas"}}');var i=t(74848),a=t(28453);const l={title:"Local testing",description:"This coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL.",id:"local-testing",sidebar_position:7},o="Local testing",c={},r=[{value:"Before you begin",id:"before-you-begin",level:2},{value:"Get the starter code",id:"get-the-starter-code",level:2},{value:"Using the Pact REPL",id:"using-the-pact-repl",level:2},{value:"Using built-in functions",id:"using-built-in-functions",level:2},{value:"Load environment data",id:"load-environment-data",level:2},{value:"Defining transaction blocks",id:"defining-transaction-blocks",level:2},{value:"Load a module from a Pact file",id:"load-a-module-from-a-pact-file",level:2},{value:"Call module functions",id:"call-module-functions",level:2},{value:"Execute the tests",id:"execute-the-tests",level:2},{value:"Testing success and failure use cases",id:"testing-success-and-failure-use-cases",level:2},{value:"Review",id:"review",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"local-testing",children:"Local testing"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.em,{children:"Local testing"})," coding project demonstrates how to use built-in functions for testing smart contracts using the Pact command-line interpreter REPL.\nIf you've explored other coding projects, you might be familiar with some of the most basic functions, such as the ",(0,i.jsx)(n.code,{children:"begin-tx"})," and ",(0,i.jsx)(n.code,{children:"commit-tx"})," built-in functions.\nThis coding project introduces a more complete set of common functions for testing smart contracts in your local development environment.\nFor this project, you'll use the ",(0,i.jsx)(n.code,{children:"loans.pact"})," module as the sample smart contract to test.\nThe ",(0,i.jsx)(n.code,{children:"loans"})," module defines three tables and ten functions, making it a good candidate for learning about writing test cases."]}),"\n",(0,i.jsx)(n.p,{children:"In this coding project, you'll learn about:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Using the Pact read-evaluate-print-loop (REPL) for interactive testing."}),"\n",(0,i.jsx)(n.li,{children:"Using Pact REPL-only built-in functions."}),"\n",(0,i.jsx)(n.li,{children:"Loading and resetting environment data."}),"\n",(0,i.jsx)(n.li,{children:"Defining transaction blocks"}),"\n",(0,i.jsx)(n.li,{children:"Loading and using Pact modules."}),"\n",(0,i.jsx)(n.li,{children:"Testing success and failure cases."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"before-you-begin",children:"Before you begin"}),"\n",(0,i.jsx)(n.p,{children:"Before starting this project, verify your environment meets the following basic requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You have a GitHub account and can run ",(0,i.jsx)(n.code,{children:"git"})," commands."]}),"\n",(0,i.jsx)(n.li,{children:"You have installed the Pact programming language and command-line interpreter."}),"\n",(0,i.jsxs)(n.li,{children:["You have installed the ",(0,i.jsx)(n.code,{children:"kadena-cli"})," package and have a working directory with initial configuration settings."]}),"\n",(0,i.jsxs)(n.li,{children:["You have a local development node that you can connect to that runs the ",(0,i.jsx)(n.code,{children:"chainweb-node"})," program, either in a Docker container or on a physical or virtual computer."]}),"\n",(0,i.jsx)(n.li,{children:"You should be familiar with defining modules and using keysets."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"get-the-starter-code",children:"Get the starter code"}),"\n",(0,i.jsx)(n.p,{children:"To get started:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Clone the ",(0,i.jsx)(n.code,{children:"pact-coding-projects"})," repository by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/kadena-docs/pact-coding-projects.git\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Change to the ",(0,i.jsx)(n.code,{children:"06-local-testing"})," directory by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd pact-coding-projects/06-local-testing\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you list the contents of this directory, you'll see the following files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"starter-testing-loans.repl"})," provides a starting point with the framework for building the ",(0,i.jsx)(n.code,{children:"loans"})," module."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"project-steps"})," provides test cases for completing each part of the coding project."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"final-testing-loans.repl"})," provides the final version of the test cases for verifying the ",(0,i.jsx)(n.code,{children:"loans"})," module."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open and review the ",(0,i.jsx)(n.code,{children:"starter-testing-loans.repl"})," file."]}),"\n",(0,i.jsxs)(n.p,{children:["This file outlines the tasks you need to complete for the ",(0,i.jsx)(n.em,{children:"Local testing"})," project.\nFollow the embedded instructions to work through the coding challenges on your own or use the detailed instructions and code provided in the next sections."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"using-the-pact-repl",children:"Using the Pact REPL"}),"\n",(0,i.jsx)(n.p,{children:"The Pact command-line interpreter provides a read-evaluate-print-loop (REPL) terminal for interactive Pact modules.\nWith this terminal, you can use built-in REPL functions to load and run Pact files to test the functions defined in them.\nThe REPL file is responsible for reading, evaluating, printing, and looping through the Pact code and returning the results to the terminal.\nBy using REPL files, you can test and iterate on the smart contracts code efficiently."}),"\n",(0,i.jsx)(n.p,{children:"To use the Pact REPL:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a REPL (",(0,i.jsx)(n.code,{children:".repl)"}),") file that loads the Pact module (.pact) that you want to test."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a new terminal shell on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Start the ",(0,i.jsx)(n.code,{children:"pact"})," command-line interpreter and specify the ",(0,i.jsx)(n.code,{children:".repl"})," file that loads the ",(0,i.jsx)(n.code,{children:".pact"})," that you want to test."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:".repl"})," file loads the ",(0,i.jsx)(n.code,{children:".pact"})," file.\nThe interpreter executes the code in the ",(0,i.jsx)(n.code,{children:".pact"})," file, returns data to the ",(0,i.jsx)(n.code,{children:".repl"})," file which, in turn, sends the output to your terminal."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"using-built-in-functions",children:"Using built-in functions"}),"\n",(0,i.jsxs)(n.p,{children:["Pact includes many built-in functions for testing module code using ",(0,i.jsx)(n.code,{children:".repl"})," files and the Pact command-line interpreter."]}),"\n",(0,i.jsxs)(n.p,{children:["Most of these functions are ",(0,i.jsx)(n.a,{href:"/pact-5/repl",children:"REPL-only functions"}),".\nThey can only be used in ",(0,i.jsx)(n.code,{children:".repl"})," files and can't be called directly in ",(0,i.jsx)(n.code,{children:".pact"})," files.\nThe following functions are some of the most commonly used REPL-only functions:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/begin-tx",children:"begin-tx"})}),(0,i.jsx)(n.td,{children:"Begin a transaction."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/commit-tx",children:"commit-tx"})}),(0,i.jsx)(n.td,{children:"Commit a transaction."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/env-chain-data",children:"env-chain-data"})}),(0,i.jsx)(n.td,{children:"Define the chain information to use for transactions in your testing environment."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/env-data",children:"env-data"})}),(0,i.jsx)(n.td,{children:"Set transaction data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/env-sigs",children:"env-sigs"})}),(0,i.jsx)(n.td,{children:"Set transaction signature keys."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/expect",children:"expect"})}),(0,i.jsx)(n.td,{children:"Evaluate expression and verify that it equals what is expected."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/expect-failure",children:"expect-failure"})}),(0,i.jsx)(n.td,{children:"Evaluate an expression and succeed only if the expression results in an error."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"/pact-5/repl/load",children:"load"})}),(0,i.jsx)(n.td,{children:"Load and evaluate a file."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"load-environment-data",children:"Load environment data"}),"\n",(0,i.jsxs)(n.p,{children:["Most smart contracts require some information to be available in the environment so that it can be used by the functions defined in the module.\nFor example, keyset information must be available to authorize access to some operations.\nIn a ",(0,i.jsx)(n.code,{children:".repl"})," file, you can use use the built in functions ",(0,i.jsx)(n.strong,{children:"env-data"})," and ",(0,i.jsx)(n.strong,{children:"env-sigs"})," to specify keysets and keys to use for testing.\nOne of the unique features of using these REPL-only functions in a ",(0,i.jsx)(n.code,{children:".repl"})," file is that you can simulate keys and accounts without having to generate and use actual keys and signatures to authorize operations or sign transactions.\nFor example, you can use the ",(0,i.jsx)(n.code,{children:"env-data"})," function to simulate the keyset named ",(0,i.jsx)(n.code,{children:"loans-admin"})," like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(env-data {\n    "loans-admin":\n      { "keys": ["loan-admin-keyset"],\n        "pred": "keys-all" }\n      }\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Similarly, you can use the ",(0,i.jsx)(n.code,{children:"env-sigs"})," function simulate a signing key and capabilities."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'   (env-sigs [\n     { "key": "marmalade-admin"\n      ,"caps": []\n      }])\n'})}),"\n",(0,i.jsx)(n.h2,{id:"defining-transaction-blocks",children:"Defining transaction blocks"}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.code,{children:".repl"})," files, you define tests within transaction blocks that start with the ",(0,i.jsx)(n.code,{children:"begin-tx"})," function and end with the ",(0,i.jsx)(n.code,{children:"commit-tx"})," function.\nWithin a transaction block that starts with the ",(0,i.jsx)(n.code,{children:"begin-tx"})," function and ends with the ",(0,i.jsx)(n.code,{children:"commit-tx"})," function, you can make as many calls to the Pact code as you like.\nAny command sent to the blockchain is a transaction, but a ",(0,i.jsx)(n.em,{children:"command"})," can have multiple ",(0,i.jsx)(n.em,{children:"function calls"}),".\nFor example, a single transaction block is treated as one command, but it can include the code used to define a module with ",(0,i.jsx)(n.code,{children:"module"})," and create module tables with with one or more ",(0,i.jsx)(n.code,{children:"create-table"})," calls."]}),"\n",(0,i.jsx)(n.p,{children:"Transaction blocks enable you to group function calls into smaller logical units, making it easier to identify errors and resolve test failures.\nAlthough it's possible to place all of the function calls in a single transaction, in practice, it's better to break test files up to make function calls into several smaller transactions."}),"\n",(0,i.jsx)(n.p,{children:"For example, you can make each function call a separate transaction similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'(begin-tx "Test the inventory-key function")\n  (free.loans.inventory-key "loanId-3" "Pistolas")\n(commit-tx)\n\n(begin-tx "Test the create-a-loan function")\n  (free.loans.create-a-loan "loanId-3" "Pistolas" "Capital Bank" 11000)\n(commit-tx)\n\n(begin-tx "Test the assign-a-loan function")\n  (free.loans.assign-a-loan "txid-3" "loanId-3" "Buyer 1" 10000) ;; loanId, buyer, amount\n(commit-tx)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Transactions can be grouped together however is most convenient for your testing.\nHowever, you should try to maintain a logical order in your transactions for maintenance and readability."}),"\n",(0,i.jsx)(n.h2,{id:"load-a-module-from-a-pact-file",children:"Load a module from a Pact file"}),"\n",(0,i.jsxs)(n.p,{children:["Pact files are not run by your computer directly.\nInstead, they\u2019re loaded into the ",(0,i.jsx)(n.code,{children:".repl"})," file and run from there.\nAfter you have defined environment data, such as the namespace and keyset for a module, you must load the ",(0,i.jsx)(n.code,{children:".pact"})," file into the ",(0,i.jsx)(n.code,{children:".repl"})," file using a ",(0,i.jsx)(n.strong,{children:"load"})," statement."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, type ",(0,i.jsx)(n.code,{children:"load"})," then specify the file path as a string:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'(load "loans.pact")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Typically, ",(0,i.jsx)(n.code,{children:".pact"})," and ",(0,i.jsx)(n.code,{children:".repl"})," file are located in the same folder, so you only need to specify the name of the ",(0,i.jsx)(n.code,{children:".pact"})," file.\nHowever, if you place the files in different file locations, you must provide an absolute or relative path to the ",(0,i.jsx)(n.code,{children:".pact"})," file you want to load."]}),"\n",(0,i.jsx)(n.h2,{id:"call-module-functions",children:"Call module functions"}),"\n",(0,i.jsxs)(n.p,{children:["After the ",(0,i.jsx)(n.code,{children:".pact"})," file is loaded in the ",(0,i.jsx)(n.code,{children:".repl"})," file, you are ready to start calling module functions.\nDepending on how you define your transaction blocks, there are a few possible ways to call the functions.\nThe most common approach is to import the module with a ",(0,i.jsx)(n.strong,{children:"use"})," statement, then call the functions that are defined in the imported module.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'(begin-tx)\n   (use free.loans)\n   (create-a-loan "loanId-2" "Renovation" "RiverBank" 140000)\n(commit-tx)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["For this coding project, edit the ",(0,i.jsx)(n.code,{children:".repl"})," file to call the following functions defined in the ",(0,i.jsx)(n.code,{children:"loans"})," module:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"create-a-loan"}),(0,i.jsx)(n.td,{children:"Accepts parameters to add the appropriate information to each table"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"assign-a-loan"}),(0,i.jsx)(n.td,{children:"Assigns a loan to an entity."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"sell-a-loan"}),(0,i.jsx)(n.td,{children:"Sell a loan and log details in the loan history table."})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["After calling the functions used to create, assign, and sell a loan, add tests to read some of the data that you created.\nFor example, edit the ",(0,i.jsx)(n.code,{children:".repl"})," file to call the following functions defined in the ",(0,i.jsx)(n.code,{children:"loans"})," module:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"read-loan-inventory"}),(0,i.jsx)(n.td,{children:"Reads all loans in the loan inventory table."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"read-loans-with-status"}),(0,i.jsx)(n.td,{children:"Reads all loans with a specific status."})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"execute-the-tests",children:"Execute the tests"}),"\n",(0,i.jsxs)(n.p,{children:["At this point, you have a completed ",(0,i.jsx)(n.code,{children:".repl"})," file that tests code defined in the ",(0,i.jsx)(n.code,{children:"loans"})," module.\nThe final step is to execute the tests by running the file from a terminal shell to view the output."]}),"\n",(0,i.jsxs)(n.p,{children:["To execute the ",(0,i.jsx)(n.code,{children:".repl"})," file tests:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open a terminal shell and navigate to the directory that contains the ",(0,i.jsx)(n.code,{children:"loans.repl"})," and ",(0,i.jsx)(n.code,{children:"loans.pact "}),"files."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Pact command-line interpreter:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Load the ",(0,i.jsx)(n.code,{children:"loans.repl"})," file"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'pact> (load "loans.repl")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You should see output for the tests you defined in the ",(0,i.jsx)(n.code,{children:".repl"})," file displayed in the terminal.\nFor example, you should see output similar to the following excerpt:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'"Loading loans.repl..."\n"Setting transaction keys"\n"Setting transaction data"\n"Begin Tx 0: Define namespace"\n"Namespace defined: free"\n"Commit Tx 0: Define namespace"\n"Begin Tx 1: Call functions that update loan tables"\n"Loading loans.pact..."\n"Namespace set to free"\n"Keyset defined"\n"Loaded module free.loans, hash Js_byz9rB57F6Ip3UqTXIzraNw0a3QiPvzs2F0dMr5c"\n"TableCreated"\n"TableCreated"\n"TableCreated"\n...\n"Begin Tx 3: Test inventory-key function"\n"loanId-3:Pistolas"\n"Commit Tx 3: Test inventory-key function"\n"Begin Tx 4: Test create-a-loan function"\n"Write succeeded"\n"Commit Tx 4: Test create-a-loan function"\n"Begin Tx 5: Test assign-a-loan function"\n"Write succeeded"\n"Commit Tx 5: Test assign-a-loan function"\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"testing-success-and-failure-use-cases",children:"Testing success and failure use cases"}),"\n",(0,i.jsx)(n.p,{children:"Pact also provides built-in functions to test for expected results, including code that you expect to succeed, code that you expect to fail, and code that returns an expected result from an evaluated expression."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Function"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"/pact-5/repl/expect",children:"expect"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Evaluates an expression and returns a specified string is the result from the evaluation is what is expected."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"/pact-5/repl/expect-failure",children:"expect-failure"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Evaluates an expression and returns a specified string only if the expression evaluated returns an error."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"/pact-5/repl/expect-that",children:"expect-that"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Evaluates an expression and returns true if the expression evaluated returns the expected result or false if the expression evaluated doesn't return the expected result."})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use the ",(0,i.jsx)(n.code,{children:"expect"})," function to evaluate whether an expression returns an expected result:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (expect "Test that addition is correct" 4 (+ 2 2))\n"Expect: success: Test that addition is correct"\n\npact> (expect "Test that addition is correct" 4 (+ 3 2))\n"FAILURE: Test that addition is correct: expected 4:integer, received 5:integer"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use the ",(0,i.jsx)(n.code,{children:"expect-failure"})," function to evaluate whether an expression fails as an expected result:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (expect-failure "Enforce fails on false" (enforce false "Expected error"))\n"Expect failure: success: Enforce fails on false"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use the ",(0,i.jsx)(n.code,{children:"expect-that"})," function to evaluate whether an expression returns the expected result:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (expect-that "addition result is greater than 2" (< 2) (+ 1 2))\n"Expect-that: success: addition result is greater than 2"\n\npact> (expect-that "addition result is greater than 2" (> 2) (+ 1 2))\n"FAILURE: Expect-that: Did not satisfy condition: addition result is greater than 2"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can find additional examples of ",(0,i.jsx)(n.code,{children:".pact"})," and ",(0,i.jsx)(n.code,{children:".repl"})," test files in the ",(0,i.jsx)(n.a,{href:"https://github.com/kadena-io/pact-examples.git",children:"pact-examples"})," repository.\nBoth the ",(0,i.jsx)(n.code,{children:"expect"})," and ",(0,i.jsx)(n.code,{children:"expect-failure"})," functions enable you to test whether the outcome of an expression is what you expect it to be.\nFor example, the ",(0,i.jsx)(n.a,{href:"https://github.com/kadena-io/pact-examples/blob/master/atoz/01-keysets/keysets.repl",children:"keysets.repl"})," demonstrates using the ",(0,i.jsx)(n.code,{children:"env-data"})," function and ",(0,i.jsx)(n.code,{children:"expect-failure"})," function to test use cases that are expected to fail."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(expect-failure "real keyset should fail"\n  (enforce-keyset "keyset-real"))\n'})}),"\n",(0,i.jsx)(n.h3,{id:"review",children:"Review"}),"\n",(0,i.jsxs)(n.p,{children:["In this coding project, you learned the basics of testing by creating transaction blocks in ",(0,i.jsx)(n.code,{children:".repl"})," files.\nDefining tests in ",(0,i.jsx)(n.code,{children:".repl "}),"files is the most common approach to testing smart contracts locally.\nFrom these basic building blocks, you can experiment with adding and modifying tests and function calls in ",(0,i.jsx)(n.code,{children:".repl"})," or ",(0,i.jsx)(n.code,{children:".pact"})," files to learn more."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);