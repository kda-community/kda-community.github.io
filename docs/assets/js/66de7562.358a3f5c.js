"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[2658],{19853:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"guides/howto-quick-ref","title":"Common task quick reference","description":"Quick reference for common tasks","source":"@site/docs/guides/common-tasks-tabs.md","sourceDirName":"guides","slug":"/guides/howto-quick-ref","permalink":"/docs/guides/howto-quick-ref","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/common-tasks-tabs.md","tags":[],"version":"current","frontMatter":{"title":"Common task quick reference","description":"Quick reference for common tasks","id":"howto-quick-ref"},"sidebar":"default","previous":{"title":"How-to guides","permalink":"/docs/guides/"},"next":{"title":"Create new accounts","permalink":"/docs/guides/accounts/howto-create-accounts"}}');var r=a(74848),c=a(28453),s=a(65537),i=a(79329);a(58069);const o={title:"Common task quick reference",description:"Quick reference for common tasks",id:"howto-quick-ref"},l="Common task quick reference",d={},u=[{value:"Check account balances",id:"check-account-balances",level:2},{value:"Transfer coins",id:"transfer-coins",level:2},{value:"Deploy smart contracts",id:"deploy-smart-contracts",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"common-task-quick-reference",children:"Common task quick reference"})}),"\n",(0,r.jsx)(n.p,{children:"This guide provides a quick reference for the most common API calls:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check account balances"}),"\n",(0,r.jsx)(n.li,{children:"Transfer coins"}),"\n",(0,r.jsx)(n.li,{children:"Deploy smart contracts"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Regardless of the method you choose, each task requires you to connect to an appropriate network endpoint with a payload in the expected format.\nThe payload contains all of the information required to complete the task.\nThe difference between using the API directly or the abstraction provided by the Kadena CLI or Kadena.js libraries is simply in how you deliver the request."}),"\n",(0,r.jsx)(n.h2,{id:"check-account-balances",children:"Check account balances"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsxs)(i.A,{value:"api",label:"API",default:!0,children:[(0,r.jsxs)(n.p,{children:["Call the ",(0,r.jsx)(n.code,{children:"coin.get-balance"})," function with the account name string as an argument using ",(0,r.jsx)(n.code,{children:"curl"})," and a JSON object.\nFor principal accounts, the account name starts with a prefix.\nFor example, the ",(0,r.jsx)(n.code,{children:"k:"})," prefix for single key accounts or the ",(0,r.jsx)(n.code,{children:"w:"})," prefix for accounts with multiple keys."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.chainweb.com/chainweb/0.0/testnet04/chain/1/pact/api/v1/local" \\\n -H "Content-Type: application/json" \\\n -d \'{\n   "exec": {\n     "data": {},\n     "code": "(coin.get-balance \\"k:<account-public-key>\\")"\n   },\n   "meta": {\n     "chainId": "1",\n     "sender": "k:<account-public-key>",\n     "gasLimit": 100000,\n     "gasPrice": 0.0000001,\n     "ttl": 7200\n   }\n }\'\n'})})]}),(0,r.jsxs)(i.A,{value:"cli",label:"Kadena CLI",children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"kadena-cli"})," package provides commands to perform many common operations like viewing balances.\nYou can also use ",(0,r.jsx)(n.code,{children:"kadena-cli"})," to construct transactions using YAML request files."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'kadena account details --account="k-bbccc9" --network="devnet" --chain-ids="all" \n'})})]}),(0,r.jsxs)(i.A,{value:"js",label:"Kadena.js",children:[(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"@kadena/client"})," package to create Pact transactions and client connections."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import {Pact, createClient} from '@kadena/client'\n\n  async function getBalance(account) {\n// `Pact.builder.execution` accepts a number of `Pact.modules.<module>.<fun>` calls\n  const transaction = Pact.builder\n    .execution(Pact.modules.coin['get-balance'](account))\n    .setMeta({ chainId: '1' })\n    .createTransaction();\n\n  // client creation is separate from the transaction builder\n  const staticClient = createClient('https://api.chainweb.com/chainweb/0.0/mainnet01/chain/1/pact');\n\n  const res = await staticClient.local(transaction, {\n    preflight: false,\n    signatureVerification: false,\n  });\n\n}\n\ngetBalance(account).catch(console.error);\n"})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"transfer-coins",children:"Transfer coins"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsxs)(i.A,{value:"api",label:"API",default:!0,children:[(0,r.jsxs)(n.p,{children:["Call the ",(0,r.jsx)(n.code,{children:"coin.transfer"})," function with the sender, receiver, and amount as arguments using ",(0,r.jsx)(n.code,{children:"curl"})," and a JSON object."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'  curl -X POST "https://api.chainweb.com/chainweb/0.0/testnet04/chain/1/pact/api/v1/send" \\\n   -H "Content-Type: application/json" \\\n   -d \'{\n     "cmds": [{\n       "hash": "<transaction-hash>",\n       "sigs": ["<your-signature>"],\n       "cmd": "{\\"networkId\\":\\"testnet04\\",\\"payload\\":{\\"exec\\":{\\"data\\":{\\"amount\\":10.0,\\"receiver\\":\\"k:<receiver-public-key>\\"},\\\n       "code\\":\\"(coin.transfer \\\\\\"k:<sender-public-key>\\",\\"clist\\":\n        [{\\"args\\":[\\"k:<sender-public-key>\\",\\"k:<receiver-public-key>\\",10.0],\\"name\\":\n        \\"coin.TRANSFER\\"}]}],\\"meta\\":{\\"creationTime\\":1724384042,\\"ttl\\":7200,\\"gasLimit\\":100000,\\"chainId\\":\\"1\\",\\"gasPrice\\":\n        1.0e-7,\\"sender\\":\\"k:<sender-public-key>\\"},\\"nonce\\":\\"2024-08-23 03:34:02.198258 UTC\\"}"\n     }]\n   }\'\n'})})]}),(0,r.jsxs)(i.A,{value:"cli",label:"Kadena CLI",children:[(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"kadena-cli"})," package provides a ",(0,r.jsx)(n.code,{children:"transfer.ktpl"})," template that you can use with ",(0,r.jsx)(n.code,{children:"kadena tx"})," commands to transfer coins."]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.code,{children:"transfer-coins.yaml"})," template data file with the transfer information similar to the following:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"account:from: 'k:99d30af3fa91d78cc06cf53a0d4eb2d7fa2a5a72944cc5451311b455a67a3c1c'\naccount:to: 'k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c'\ndecimal:amount: '1.0'\nchain-id: '3'\nkey:from: '99d30af3fa91d78cc06cf53a0d4eb2d7fa2a5a72944cc5451311b455a67a3c1c'\nnetwork:networkId: 'development'\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create an unsigned transaction using the ",(0,r.jsx)(n.code,{children:"transfer.ktpl"})," template and the ",(0,r.jsx)(n.code,{children:"transfer-coins.yaml"})," data file, and save the transaction to a file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx add\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Sign the transaction created with a wallet or key pair:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx sign\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Send the signed transaction file to the blockchain:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx send\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(i.A,{value:"js",label:"Kadena.js",children:[(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"@kadena/client"})," package to create Pact transactions and client connections."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"\nimport { Pact, createClient } from '@kadena/client';\n\nconst transferKDA = async (from, to, amount, pubKey) => {\n  const client = createClient('https://api.chainweb.com/chainweb/0.0/mainnet01/chain/1/pact');\n\n  const transaction = Pact.builder\n    .execution(`(coin.transfer \"${from}\" \"${to}\" ${amount})`)\n    .addSigner(pubKey, (signFor) => [\n      signFor('coin.TRANSFER', from, to, amount),\n      signFor('coin.GAS'),\n    ])\n    .setMeta({\n      chainId: '1',\n      gasLimit: 2500,\n      gasPrice: 0.000001,\n      sender: from,\n    })\n    .setNetworkId('mainnet01')\n    .createTransaction();\n\n  try {\n    const signedTx = await signWithChainweaver(transaction); // Pick your preferred signing method\n    const preflightResult = await client.preflight(signedTx);\n    console.log('Preflight result:', preflightResult);\n\n    if (preflightResult.result.status === 'failure') {\n      console.error('Preflight failed:', preflightResult.result.error.message);\n      return preflightResult;\n    }\n\n    const res = await client.submit(signedTx);\n    console.log('Transaction submitted:', res);\n    return res;\n  } catch (error) {\n    console.error('Error transferring KDA:', error);\n  }\n};\ntransferKDA('your-from-account', 'your-to-account', 0.1).catch(console.error);\n"})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"deploy-smart-contracts",children:"Deploy smart contracts"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsxs)(i.A,{value:"api",label:"API",default:!0,children:[(0,r.jsxs)(n.p,{children:["Connect to the Pact API ",(0,r.jsx)(n.code,{children:"send"})," endpoint to submit a transaction that deploys a smart contract."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.chainweb.com/chainweb/0.0/testnet04/chain/1/pact/api/v1/send" \\\n   -H "Content-Type: application/json" \\\n   -d \'{\n     "cmds": [{\n       "hash": "<transaction-hash>",\n       "sigs": ["<your-signature>"],\n       "cmd": "{\\"networkId\\":\\"testnet04\\",\\"payload\\":{\\"exec\\":{\\"data\\":{},\\"code\\":\\"(namespace \\\'free)\\n(define-keyset \\\'free.vote-testing-keyset \n       (read-keyset \\\'vote))\\n(module vote-testing \\\'free.vote-testing-keyset\\n  (defschema vote\\n    voter:string\\n    option:string)\\n  (deftable votes:{vote})\\n \n       (defun vote (poll-id:string option:string)\\n    (insert votes (format \\"{}-{}\\" [poll-id (at \\\'sender (chain-data))])\\n      { \\"voter\\": (at \\\'sender (chain-data))\\n\n               \\"option\\": option\\n      }\\n    )\\n  )\\n)\\"}},\\"signers\\":[{\\"pubKey\\":\\"f1e12312e4ee8c156b041c3bcc7e422e7d15cb2ddce58c6ff16742770916cfaa\\",\\\n               "clist\\":[{\\"args\\":[],\\"name\\":\\"coin.GAS\\"}]}],\\"meta\\":{\\"creationTime\\":1724384042,\\"ttl\\":7200,\\"gasLimit\\":100000,\\"chainId\\":\\"1\\",\\\n               "gasPrice\\":1.0e-7,\\"sender\\":\\"k:f1e12312e4ee8c156b041c3bcc7e422e7d15cb2ddce58c6ff16742770916cfaa\\"},\\"nonce\\":\\"2024-08-23 03:34:02.198258 UTC\\"}"\n     }]\n   }\'\n'})})]}),(0,r.jsxs)(i.A,{value:"cli",label:"Kadena CLI",children:[(0,r.jsxs)(n.p,{children:["You can use ",(0,r.jsx)(n.code,{children:"kadena-cli"})," and YAML configuration files or templates to deploy contracts with ",(0,r.jsx)(n.code,{children:"kadena tx"})," commands."]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a YAML configuration for deploying a smart contract."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# deploy-hello.yaml\ncode: |-\n  (namespace \'free)\n    (module simplemodule GOV\n     (defcap GOV () true)\n     (defconst TEXT:string "Hello World")\n     (defun greet:string () TEXT)\n )   \n data:\n  ks: {\n    keys: [DEPLOYER_PUBLIC_KEY],\n    pred: "keys-all"\n  }\nmeta:\n  chainId: "{{chain-id}}"\n  sender: "DEPLOYER_ACCOUNT_NAME"\n  gasLimit: 80300\n  gasPrice: 0.000001\n  ttl: 600\nsigners:\n  - public: "DEPLOYER_PUBLIC_KEY"\n    caps:\n      - name: "coin.GAS"\n        args: []\nnetworkId: "{{network-id}}"\ntype: exec\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a new unsigned transaction:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx add\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Sign the unsigned transaction:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx sign\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Send the signed transaction to the network:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kadena tx send\n"})}),"\n"]}),"\n"]})]}),(0,r.jsxs)(i.A,{value:"js",label:"Kadena.js",children:[(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.code,{children:"@kadena/client"})," package to create Pact transactions and client connections to deploy a contract."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { Pact, createClient, signWithChainweaver } from '@kadena/client';\n\nasync function deployContract(deployer, pubKey) {\n     const pactClient = createClient('https://api.chainweb.com/chainweb/0.0/mainnet01/chain/0/pact');\n\n     const tx = Pact.builder\n        .execution(`\n                  (namespace 'free)\n                  (module simplemodule GOV\n                    (defcap GOV () true)\n                    (defconst TEXT:string \"Hello World\")\n                    (defun greet:string () TEXT)\n                  )`)\n        .addSigner(pubKey, (signFor) => [signFor('coin.GAS')])\n        .setMeta({\n          chainId: '1',\n          gasLimit: 80300,\n          gasPrice: 0.000001,\n          sender: deployer,\n        })\n        .setNetworkId('mainnet01')\n        .createTransaction();\n\n    try {\n      const signedTx = await signWithChainweaver(transaction); // Pick your preferred signing method\n      const preflightResult = await client.preflight(signedTx);\n      console.log('Preflight result:', preflightResult);\n\n      if (preflightResult.result.status === 'failure') {\n        console.error('Preflight failed:', preflightResult.result.error.message);\n        return preflightResult;\n      }\n\n      const res = await client.submit(signedTx);\n      console.log('Contract deployed:', res);\n      return res;\n    } catch (error) {\n      console.error('Error deploying contract:', error);\n    }\n};\ndeployContract('your-deployer-account', contractCode).catch(console.error);\n"})})]})]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},79329:(e,n,a)=>{a.d(n,{A:()=>s});a(96540);var t=a(34164);const r={tabItem:"tabItem_Ymn6"};var c=a(74848);function s(e){let{children:n,hidden:a,className:s}=e;return(0,c.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,s),hidden:a,children:n})}},65537:(e,n,a)=>{a.d(n,{A:()=>v});var t=a(96540),r=a(34164),c=a(65627),s=a(56347),i=a(50372),o=a(30604),l=a(11861),d=a(78749);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:r}}=e;return{value:n,label:a,attributes:t,default:r}}))}(a);return function(e){const n=(0,l.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:a}=e;const r=(0,s.W6)(),c=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,o.aZ)(c),(0,t.useCallback)((e=>{if(!c)return;const n=new URLSearchParams(r.location.search);n.set(c,e),r.replace({...r.location,search:n.toString()})}),[c,r])]}function f(e){const{defaultValue:n,queryString:a=!1,groupId:r}=e,c=h(e),[s,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:c}))),[l,u]=m({queryString:a,groupId:r}),[f,g]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,c]=(0,d.Dv)(a);return[r,(0,t.useCallback)((e=>{a&&c.set(e)}),[a,c])]}({groupId:r}),b=(()=>{const e=l??f;return p({value:e,tabValues:c})?e:null})();(0,i.A)((()=>{b&&o(b)}),[b]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:c}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),g(e)}),[u,g,c]),tabValues:c}}var g=a(9136);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(74848);function j(e){let{className:n,block:a,selectedValue:t,selectValue:s,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,c.a_)(),d=e=>{const n=e.currentTarget,a=o.indexOf(n),r=i[a].value;r!==t&&(l(n),s(r))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":a},n),children:i.map((e=>{let{value:n,label:a,attributes:c}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{o.push(e)},onKeyDown:u,onClick:d,...c,className:(0,r.A)("tabs__item",b.tabItem,c?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function k(e){let{lazy:n,children:a,selectedValue:c}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===c));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==c})))})}function y(e){const n=f(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,x.jsx)(j,{...n,...e}),(0,x.jsx)(k,{...n,...e})]})}function v(e){const n=(0,g.A)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(n))}}}]);