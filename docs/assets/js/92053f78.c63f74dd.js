"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[6749],{57618:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"reference/default-contracts/coin","title":"coin","description":"Reference information for the coin contracts deployed in the root namespace on all Kadena networks and chains.","source":"@site/docs/reference/default-contracts/coin.md","sourceDirName":"reference/default-contracts","slug":"/reference/default-contracts/coin","permalink":"/docs/reference/default-contracts/coin","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/default-contracts/coin.md","tags":[],"version":"current","frontMatter":{"title":"coin","description":"Reference information for the coin contracts deployed in the root namespace on all Kadena networks and chains.","id":"coin"}}');var a=c(74848),i=c(28453);const s={title:"coin",description:"Reference information for the coin contracts deployed in the root namespace on all Kadena networks and chains.",id:"coin"},r="coin",d={},l=[{value:"buy-gas",id:"buy-gas",level:2},{value:"Function signature",id:"function-signature",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Examples",id:"examples",level:3},{value:"check-reserved",id:"check-reserved",level:2},{value:"Function signature",id:"function-signature-1",level:3},{value:"Arguments",id:"arguments-1",level:3},{value:"Examples",id:"examples-1",level:3},{value:"coinbase",id:"coinbase",level:2},{value:"Function signature",id:"function-signature-2",level:3},{value:"Arguments",id:"arguments-2",level:3},{value:"Examples",id:"examples-2",level:3},{value:"create-account",id:"create-account",level:2},{value:"Function signature",id:"function-signature-3",level:3},{value:"Arguments",id:"arguments-3",level:3},{value:"Examples",id:"examples-3",level:3},{value:"create-allocation-account",id:"create-allocation-account",level:2},{value:"credit",id:"credit",level:2},{value:"Function signature",id:"function-signature-4",level:3},{value:"Arguments",id:"arguments-4",level:3},{value:"Examples",id:"examples-4",level:3},{value:"debit",id:"debit",level:2},{value:"details",id:"details",level:2},{value:"Function signature",id:"function-signature-5",level:3},{value:"Arguments",id:"arguments-5",level:3},{value:"Examples",id:"examples-5",level:3},{value:"enforce-reserved",id:"enforce-reserved",level:2},{value:"enforce-unit",id:"enforce-unit",level:2},{value:"Function signature",id:"function-signature-6",level:3},{value:"Arguments",id:"arguments-6",level:3},{value:"fund-tx",id:"fund-tx",level:2},{value:"gas-guard",id:"gas-guard",level:2},{value:"Function signature",id:"function-signature-7",level:3},{value:"Arguments",id:"arguments-7",level:3},{value:"gas-only",id:"gas-only",level:2},{value:"get-balance",id:"get-balance",level:2},{value:"precision",id:"precision",level:2},{value:"redeem-gas",id:"redeem-gas",level:2},{value:"release-allocation",id:"release-allocation",level:2},{value:"remediate",id:"remediate",level:2},{value:"rotate",id:"rotate",level:2},{value:"transfer",id:"transfer",level:2},{value:"transfer-create",id:"transfer-create",level:2},{value:"transfer-crosschain",id:"transfer-crosschain",level:2},{value:"validate-account",id:"validate-account",level:2},{value:"Function signature",id:"function-signature-8",level:3},{value:"Arguments",id:"arguments-8",level:3},{value:"Capabilities",id:"capabilities",level:2},{value:"Constants",id:"constants",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"coin",children:"coin"})}),"\n",(0,a.jsxs)(n.p,{children:["The default ",(0,a.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/blob/master/pact/coin-contract/v5/coin-v5.pact",children:(0,a.jsx)(n.code,{children:"coin"})})," module represents the native Kadena token contract.\nThe ",(0,a.jsx)(n.code,{children:"coin"})," module provides the core functions, capabilities, and interfaces for managing gas operations,accounts information, and asset transfers in the Kadena blockchain account ledger.\nThe contract supports single chain and cross-chain transfers with functions for the following operations:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Account creation"}),"\n",(0,a.jsx)(n.li,{children:"Account and balance querying"}),"\n",(0,a.jsx)(n.li,{children:"Asset transfers"}),"\n",(0,a.jsx)(n.li,{children:"Buy and redeem gas for transactions"}),"\n",(0,a.jsx)(n.li,{children:"Credit reconciliation for receiving accounts"}),"\n",(0,a.jsx)(n.li,{children:"Debit reconciliation for sending accounts"}),"\n",(0,a.jsx)(n.li,{children:"Miner payments"}),"\n",(0,a.jsx)(n.li,{children:"Simple payment verification operations"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["You can access the ",(0,a.jsx)(n.code,{children:"coin"})," contract and its functions in your own smart contract modules by using its fully-qualified name or by importing module functions with the ",(0,a.jsx)(n.code,{children:"(use coin)"})," statement in the body of a module declaration."]}),"\n",(0,a.jsxs)(n.p,{children:["The default ",(0,a.jsx)(n.code,{children:"coin"})," contract provides the following functions for managing accounts and assets in the Kadena blockchain ledger."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Function"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"buy-gas"}),(0,a.jsx)(n.td,{})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"buy-gas",children:"buy-gas"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"buy-gas"})," function is an internal function used in the ",(0,a.jsx)(n.code,{children:"fund-tx"})," two-step (",(0,a.jsx)(n.code,{children:"defpact"}),") transaction.\nThe function provides the buying phase of the transaction that debits the sender account for the total gas and fee.\nAt this point in the ",(0,a.jsx)(n.code,{children:"fund-tx"})," transaction, a miner has been selected to perform the proof of work from the mining pool.\nThe ",(0,a.jsx)(n.code,{children:"buy-gas"})," function validates the sender account and the gas limit (maximum gas) specified by the transaction sender.\nThe gas price is determined by the price of gas at the time the transaction is executed and the buy operation is executed before the code sent by the the sender is executed."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun buy-gas:string (sender:string total:decimal))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,a.jsxs)(n.p,{children:["Use the following arguments when calling the ",(0,a.jsx)(n.code,{children:"buy-gas"})," function."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"sender"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the account of the transaction sender."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"total"}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Specifies the maximum gas limit specified by the transaction sender."})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,a.jsxs)(n.p,{children:["The following example illustrates calling the ",(0,a.jsx)(n.code,{children:"buy-gas"})," function with hard-coded arguments if the GAS capability has been previously acquired:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.buy-gas "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c" 10.5)\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The following example illustrates the use of the ",(0,a.jsx)(n.code,{children:"buy-gas"})," function as a ",(0,a.jsx)(n.code,{children:"fund-tx"})," step:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"  (defpact fund-tx (sender:string miner:string miner-guard:guard total:decimal)\n    ...\n    (step (buy-gas sender total))\n    ...\n  )\n"})}),"\n",(0,a.jsx)(n.h2,{id:"check-reserved",children:"check-reserved"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"check-reserved"})," function checks whether an account uses a reserved name.\nReserved names start with a single character and a colon prefix.\nThe function returns the reserved name type if the account name uses a reserved name or an empty string.\nFor example, if the account name uses the ",(0,a.jsx)(n.code,{children:"c:"})," prefix, the ",(0,a.jsx)(n.code,{children:"check-reserved"})," function returns ",(0,a.jsx)(n.code,{children:"c"})," as the data type."]}),"\n",(0,a.jsx)(n.p,{children:"Reserved names use the following set of prefixes:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"k: for single key accounts"}),"\n",(0,a.jsx)(n.li,{children:"w: for accounts with multiple keys"}),"\n",(0,a.jsx)(n.li,{children:"u: for user guards"}),"\n",(0,a.jsx)(n.li,{children:"c: for capability guards"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-1",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun check-reserved:string (account:string))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-1",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following argument to check whether an account uses a reserved name."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the key row account name to check."})]})})]}),"\n",(0,a.jsx)(n.h3,{id:"examples-1",children:"Examples"}),"\n",(0,a.jsxs)(n.p,{children:["The following example checks the account name for a single key account and returns ",(0,a.jsx)(n.code,{children:"k"})," as the type:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.check-reserved "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c")\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The following example checks the account name for a multi-signature account and returns ",(0,a.jsx)(n.code,{children:"w"})," as the type:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.check-reserved "w:5HKwn7J9IqSwYU5ETqrDh7EgK43VQwMI0AQ11se7SLM:keys-any")\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The following example checks the account name for a capability guard account and returns ",(0,a.jsx)(n.code,{children:"c"})," as the type:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.check-reserved "c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"coinbase",children:"coinbase"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"coinbase"})," function is an internal function used to create coins for any account and for paying miner rewards.\nThis function can't be used outside of the ",(0,a.jsx)(n.code,{children:"coin"})," contract."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-2",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun coinbase:string (account:string account-guard:guard amount:decimal))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-2",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following arguments to specify miner account information."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the key row account name for a miner account."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account-guard"}),(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"Specifies the guard associated with the account."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"amount"}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Specifies the amount to deposit in the specified account."})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"examples-2",children:"Examples"}),"\n",(0,a.jsxs)(n.p,{children:["The following example illustrates calling the ",(0,a.jsx)(n.code,{children:"coinbase"})," function with hard-coded arguments if the COINBASE capability has been previously acquired:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.coinbase "sender00" (read-keyset "known-sender") 1.0)\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The following example demonstrates creating an multi-signature account with coins in a ",(0,a.jsx)(n.code,{children:".repl"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(test-capability (COINBASE))\n(env-data\n {\n  "valencia-guard": {\n      "keys": [\n          "094d8c9abdb49029827f6c5ba14f8a240a2bc2496f17d5432bd485f750f7c66c",\n          "1d5a5e10eb15355422ad66b6c12167bdbb23b1e1ef674ea032175d220b242ed4",\n          "4fe7981d36997c2a327d0d3ce961d3ae0b2d38185ac5e5cd98ad90140bc284d0",\n          "58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c",\n          "9a23bf6a61f753d3ffa45c02b33c65b9dc80b8fb63857debcfe21fdb170fcd99"\n      ],\n      "pred": "keys-any"\n  }\n }\n)\n(coin.coinbase "valencia-hoa" (read-keyset "valencia-guard") 10.000000000001)\n(coin.get-balance "valencia-hoa")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"create-account",children:"create-account"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"create-account"})," function enables you to create a new account with a 0.0 balance in the ",(0,a.jsx)(n.code,{children:"coin-table"}),".\nHowever, the function doesn't create the account on a specific network or on a specific chain.\nYou must transfer funds to a specific network and chain to make the account usable in a specific context.\nTo create and fund a new account on a specific network and chain in a single transaction, use the ",(0,a.jsx)(n.code,{children:"transfer-create"})," function."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-3",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun create-account:string (account:string guard:guard))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-3",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following arguments to create a new account."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsxs)(n.td,{children:["Specifies the name of the account of the transaction sender. For single-key accounts, the account name is typically the ",(0,a.jsx)(n.code,{children:"k:"})," prefix followed by the public key for the account."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"Specifies the guard to use for the account. For single-key accounts, the guard is typically a keyset."})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"examples-3",children:"Examples"}),"\n",(0,a.jsx)(n.p,{children:'The following example illustrates creating an account with the account name "test-admin-account" and a keyset definition for the guard:'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.create-account "test-admin-account" (read-keyset "admin"))\n'})}),"\n",(0,a.jsxs)(n.p,{children:["You should note that the account name becomes the key row identifier for the new account and that the key and predicate function for the keyset must be read from the environment or message data.\nIn most cases, single key account names consist of the ",(0,a.jsx)(n.code,{children:"k:"})," prefix followed by the public key.\nFor example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.create-account "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c" (read-keyset "admin"))\n'})}),"\n",(0,a.jsx)(n.p,{children:"If you want to create an account with multiple signing keys, you must read a keyset with multiple keys.\nFor example, you might have a keyset like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'{\n    "valencia-guard": {\n        "keys": [\n            "094d8c9abdb49029827f6c5ba14f8a240a2bc2496f17d5432bd485f750f7c66c",\n            "1d5a5e10eb15355422ad66b6c12167bdbb23b1e1ef674ea032175d220b242ed4",\n            "4fe7981d36997c2a327d0d3ce961d3ae0b2d38185ac5e5cd98ad90140bc284d0",\n            "58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c",\n            "9a23bf6a61f753d3ffa45c02b33c65b9dc80b8fb63857debcfe21fdb170fcd99"\n        ],\n        "pred": "keys-any"\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["To create an account with a 0.0 balance for this set of keys and the ",(0,a.jsx)(n.code,{children:"keys-any"})," predicate, you could call the ",(0,a.jsx)(n.code,{children:"create-account"})," function like this:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.create-account "valencia-hoa" (read-keyset "valencia-guard"))\n'})}),"\n",(0,a.jsx)(n.h2,{id:"create-allocation-account",children:"create-allocation-account"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"create-allocation-account"})," function is a legacy function that requires the GENESIS capability.\nThis function adds an entry to the coin allocation table and creates a corresponding empty coin contract account of the same name and guard."]}),"\n",(0,a.jsx)(n.h2,{id:"credit",children:"credit"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"credit"})," function is a protected function that requires the CREDIT capability to be in scope to credit a specified amount to a specified account balance.\nYou can only call the ",(0,a.jsx)(n.code,{children:"credit"})," function in the context of other functions, such as the ",(0,a.jsx)(n.code,{children:"transfer"})," and ",(0,a.jsx)(n.code,{children:"redeem-gas"})," functions, that bring the CREDIT capability into scope."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-4",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun credit:string (account:string guard:guard amount:decimal))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-4",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following arguments to credit an amount to an account balance."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the key row account name to receive the credit."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"Specifies the guard defined for the account. For single-key accounts, the guard is typically a keyset."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"amount"}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Specifies the amount to credit to the balance for the specified account."})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"examples-4",children:"Examples"}),"\n",(0,a.jsxs)(n.p,{children:["The following example illustrates calling the ",(0,a.jsx)(n.code,{children:"credit"})," function in the Pact REPL by manually granting the CREDIT capability:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(test-capability (CREDIT "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c"))\n(coin.credit "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c" (read-keyset "admin") 1.0)\n(coin.get-balance "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c")\n'})}),"\n",(0,a.jsx)(n.h2,{id:"debit",children:"debit"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"debit"})," function AMOUNT from ACCOUNT balance"]}),"\n",(0,a.jsx)(n.h2,{id:"details",children:"details"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"details"})," function enables you to look up account details for a specific account."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-5",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun details:object{fungible-v2.account-details} (account:string ))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-5",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following argument to look up account details."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the key row account name for the account you want to view details for."})]})})]}),"\n",(0,a.jsx)(n.h3,{id:"examples-5",children:"Examples"}),"\n",(0,a.jsxs)(n.p,{children:["The following example illustrates looking up information for a single-key account that uses the ",(0,a.jsx)(n.code,{children:"k:"})," prefix:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.details "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c")\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The function returns the account name, balance, and guard stored in the ",(0,a.jsx)(n.code,{children:"coin-table"})," for the specified account:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'{"account": "k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c","balance": 10.000000000001,"guard": KeySet {keys: [ 58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c ]\n,pred: keys-all}}\n'})}),"\n",(0,a.jsx)(n.p,{children:'The following example illustrates looking up information for the "valencia-hoa" account:'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'(coin.details "valencia-hoa")\n'})}),"\n",(0,a.jsx)(n.p,{children:"In this example, the account has multiple keys and returns information similar to the following:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:'{"account": "valencia-hoa","balance": 10.000000000001,"guard": KeySet {keys: [ \n    094d8c9a...50f7c66c, \n    1d5a5e10...0b242ed4,\n    4fe7981d...0bc284d0,\n    58705e86...14ca963c,\n    9a23bf6a...170fcd99 ]\n  ,pred: keys-any}\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"enforce-reserved",children:"enforce-reserved"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"enforce-reserved"})," function enforces Enforce reserved account name protocols."]}),"\n",(0,a.jsx)(n.h2,{id:"enforce-unit",children:"enforce-unit"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"enforce-unit"})," utility function enforces the minimum precision allowed for coin transactions."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-6",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun enforce-unit:bool (amount:decimal))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-6",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following argument to enforce the number of decimal places allowed for precision in coin transactions."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"amount"}),(0,a.jsx)(n.td,{children:"decimal"}),(0,a.jsx)(n.td,{children:"Specifies the unit precision for coin contract transactions."})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"fund-tx",children:"fund-tx"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"fund-tx"})," two-step function defines a ",(0,a.jsx)(n.code,{children:"defpact"})," to fund a transaction in two steps, with the actual transaction occurring in the middle:"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"A buying phase, debiting the sender for total gas and fee, yielding TX_MAX_CHARGE."}),"\n",(0,a.jsx)(n.li,{children:"A settlement phase, resuming TX_MAX_CHARGE, and allocating to the coinbase account for used gas and fee, and sender account for bal- ance (unused gas, if any)."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"gas-guard",children:"gas-guard"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"gas-guard"})," function is a predicate function used to ensure that a single key keyset guard or the GAS capability is enforced for gas buying and redemption operations."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-7",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun gas-guard (guard:guard))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-7",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following argument to specify a gas guard."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"guard"}),(0,a.jsx)(n.td,{children:"Specifies the guard of gas-related operations."})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"gas-only",children:"gas-only"}),"\n",(0,a.jsx)(n.p,{children:"Predicate for gas-only user guards."}),"\n",(0,a.jsx)(n.h2,{id:"get-balance",children:"get-balance"}),"\n",(0,a.jsx)(n.h2,{id:"precision",children:"precision"}),"\n",(0,a.jsx)(n.h2,{id:"redeem-gas",children:"redeem-gas"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"redeem-gas"})," function is an internal function used in the ",(0,a.jsx)(n.code,{children:"fund-tx"})," two-step (",(0,a.jsx)(n.code,{children:"defpact"}),") transaction.\nThe function provides the settlement phase of the transaction that determines the final transaction fee and allocates adjustments to the coinbase account for the gas used and fee, and to the sender account for the balance of any unused gas."]}),"\n",(0,a.jsxs)(n.p,{children:["At this point, the sender's transaction has been executed, and the gas that was charged has been calculated.\nThe miner account receives credit for the gas consumed, and the sender account receives credit for any remaining gas not used in processing the transaction up to the limit specified in the ",(0,a.jsx)(n.code,{children:"buy-gas"})," operation."]}),"\n",(0,a.jsx)(n.h2,{id:"release-allocation",children:"release-allocation"}),"\n",(0,a.jsx)(n.p,{children:"Release funds associated with allocation ACCOUNT into main ledger. ACCOUNT must already exist in main ledger. Allocation is deactivated after release."}),"\n",(0,a.jsx)(n.h2,{id:"remediate",children:"remediate"}),"\n",(0,a.jsx)(n.p,{children:"Allows for remediation transactions. This function is protected by the REMEDIATE capability"}),"\n",(0,a.jsx)(n.h2,{id:"rotate",children:"rotate"}),"\n",(0,a.jsx)(n.h2,{id:"transfer",children:"transfer"}),"\n",(0,a.jsx)(n.h2,{id:"transfer-create",children:"transfer-create"}),"\n",(0,a.jsx)(n.h2,{id:"transfer-crosschain",children:"transfer-crosschain"}),"\n",(0,a.jsx)(n.h2,{id:"validate-account",children:"validate-account"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"validate-account"})," utility function enforce that an account name uses the Latin-1 character set and conforms to the coin contract minimum and maximum length requirements."]}),"\n",(0,a.jsx)(n.h3,{id:"function-signature-8",children:"Function signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-pact",children:"(defun validate-account (account:string))\n"})}),"\n",(0,a.jsx)(n.h3,{id:"arguments-8",children:"Arguments"}),"\n",(0,a.jsx)(n.p,{children:"Use the following argument to validate an account name."}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Argument"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsx)(n.tbody,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"account"}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"Specifies the account name to validate."})]})})]}),"\n",(0,a.jsx)(n.h2,{id:"capabilities",children:"Capabilities"}),"\n",(0,a.jsxs)(n.p,{children:["The default ",(0,a.jsx)(n.code,{children:"coin"})," module defines the following capabilities:"]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Capability"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"COINBASE"}),(0,a.jsx)(n.td,{children:"Guards miner rewards."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"CREDIT"}),(0,a.jsx)(n.td,{children:"Manages account crediting operations."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"DEBIT"}),(0,a.jsx)(n.td,{children:"Manages account debiting operations."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"GAS"}),(0,a.jsx)(n.td,{children:"Guards the gas buy and redeem operations."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"GENESIS"}),(0,a.jsx)(n.td,{children:"Constrains genesis transactions."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"GOVERNANCE"}),(0,a.jsx)(n.td,{children:"Module governance capability that prevents the coin contract from being upgraded."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"RELEASE_ALLOCATION"}),(0,a.jsx)(n.td,{children:"Event that records an allocation release for signature scoping."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"REMEDIATE"}),(0,a.jsx)(n.td,{children:"Manages remediation transactions."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"ROTATE"}),(0,a.jsx)(n.td,{children:"Autonomously managed capability that enables guard rotation."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"TRANSFER"}),(0,a.jsxs)(n.td,{children:["Managed capability that controls the resources transferred from a sender to a receiver on the same chain through the ",(0,a.jsx)(n.code,{children:"TRANSFER-mgr"})," management function."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"TRANSFER_XCHAIN"}),(0,a.jsxs)(n.td,{children:["Managed capability that controls the resources transferred from a sender to a receiver on different chain through the ",(0,a.jsx)(n.code,{children:"TRANSFER_XCHAIN-mgr"})," management function."]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"TRANSFER_XCHAIN_RECD"}),(0,a.jsx)(n.td,{children:"Event that records the details of a cross-chain transfer."})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"constants",children:"Constants"}),"\n",(0,a.jsxs)(n.p,{children:["The default ",(0,a.jsx)(n.code,{children:"coin"})," module defines the following constant variable values:"]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Constant"}),(0,a.jsx)(n.th,{children:"Value"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"COIN_CHARSET"}),(0,a.jsx)(n.td,{children:"Latin-1 (ISO 8859-1)"}),(0,a.jsx)(n.td,{children:"The default coin contract character set."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"MINIMUM_PRECISION"}),(0,a.jsx)(n.td,{children:"12"}),(0,a.jsx)(n.td,{children:"Minimum allowed precision for coin transactions."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"MINIMUM_ACCOUNT_LENGTH"}),(0,a.jsx)(n.td,{children:"3"}),(0,a.jsx)(n.td,{children:"Minimum number of characters required for an account name for it to be a valid coin account name."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"MAXIMUM_ACCOUNT_LENGTH"}),(0,a.jsx)(n.td,{children:"256"}),(0,a.jsx)(n.td,{children:"Maximum number of characters allowed for an account name for it to be a valid coin account name."})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"VALID_CHAIN_IDS"}),(0,a.jsx)(n.td,{children:"(map (int-to-str 10) (enumerate 0 19))"}),(0,a.jsx)(n.td,{children:"List of all valid Chainweb chain identifiers."})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,c)=>{c.d(n,{R:()=>s,x:()=>r});var t=c(96540);const a={},i=t.createContext(a);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);