"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[9005],{92582:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>c,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"reference/evm-integration/foundry-chainweb-ref","title":"Foundry Chainweb EVM","description":"Technical reference information for the core components of the Chainweb.sol contract that provides the core features for testing and deploying Solidity projects on the Kadena Chainweb EVM multi-chain network.","source":"@site/docs/reference/evm-integration/chainweb-sol.md","sourceDirName":"reference/evm-integration","slug":"/reference/evm-integration/foundry-chainweb-ref","permalink":"/docs/reference/evm-integration/foundry-chainweb-ref","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/evm-integration/chainweb-sol.md","tags":[{"inline":true,"label":"evm","permalink":"/docs/tags/evm"},{"inline":true,"label":"foundry","permalink":"/docs/tags/foundry"},{"inline":true,"label":"Solidity","permalink":"/docs/tags/solidity"},{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"network","permalink":"/docs/tags/network"},{"inline":true,"label":"node operator","permalink":"/docs/tags/node-operator"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Foundry Chainweb EVM","description":"Technical reference information for the core components of the Chainweb.sol contract that provides the core features for testing and deploying Solidity projects on the Kadena Chainweb EVM multi-chain network.","id":"foundry-chainweb-ref","sidebar_position":2,"tags":["evm","foundry","Solidity","chainweb","network","node operator"]},"sidebar":"default","previous":{"title":"Exchange integration guide","permalink":"/docs/reference/dex-integration"},"next":{"title":"Coding projects","permalink":"/docs/coding-projects/coding-projects"}}');var s=i(74848),r=i(28453);const c={title:"Foundry Chainweb EVM",description:"Technical reference information for the core components of the Chainweb.sol contract that provides the core features for testing and deploying Solidity projects on the Kadena Chainweb EVM multi-chain network.",id:"foundry-chainweb-ref",sidebar_position:2,tags:["evm","foundry","Solidity","chainweb","network","node operator"]},a="Foundry Chainweb EVM",o={},h=[{value:"Chainweb",id:"chainweb",level:2},{value:"Key methods",id:"key-methods",level:3},{value:"deployChainWebChainIdContract",id:"deploychainwebchainidcontract",level:3},{value:"getActiveChainId",id:"getactivechainid",level:3},{value:"getChainIds",id:"getchainids",level:3},{value:"setupChainsForTest",id:"setupchainsfortest",level:3},{value:"setupChainsForScript",id:"setupchainsforscript",level:3},{value:"switchChain",id:"switchchain",level:3},{value:"Constants",id:"constants",level:3},{value:"ChainwebConfigReader",id:"chainwebconfigreader",level:2},{value:"Key method",id:"key-method",level:3},{value:"Default values",id:"default-values",level:3},{value:"ChainwebTest",id:"chainwebtest",level:2},{value:"ChainwebScript",id:"chainwebscript",level:2},{value:"Custom RPC configuration",id:"custom-rpc-configuration",level:2},{value:"Local and global nonce behavior",id:"local-and-global-nonce-behavior",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"foundry-chainweb-evm",children:"Foundry Chainweb EVM"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Chainweb.sol"})," contract in the ",(0,s.jsx)(n.code,{children:"foundry-chainweb"})," package provides the core features that enable you to test and deploy Solidity projects on the Kadena Chainweb EVM multi-chain network with minimal manual configuration.\nThe core components of ",(0,s.jsx)(n.code,{children:"Chainweb.sol"})," manage chain identifier mapping, switching between chains, fork creation, and testing multiple forks within a single testing environment.\nThe features are provided through the following base contracts:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Chainweb"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"ChainwebConfigReader"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"ChainwebTest"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"ChainwebScript"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"chainweb",children:"Chainweb"}),"\n",(0,s.jsxs)(n.p,{children:["The main ",(0,s.jsx)(n.code,{children:"Chainweb"})," constructor initializes the core configuration parameters for chain management.\nThe constructor parameters correspond with the configuration settings defined in the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"numberOfChains"})," (uint24): Number of chains to manage for a deployment target."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chainIdOffset"})," (uint256): Starting offset value for incrementing EVM base network chain identifiers on a deployment target."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chainwebChainIdOffset"})," (uint24): Starting offset value for Chainweb-specific chain identifiers on a deployment target."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hostUrl"})," (string): Custom RPC host URL (optional)."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["These parameters are defined in the ",(0,s.jsx)(n.code,{children:"ChainwebConfig"})," structure for each target deployment network specified in the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"struct ChainwebConfig {\n    uint256 numberOfChains;\n    uint256 chainIdOffset;\n    uint256 chainwebChainIdOffset;\n    string externalHostUrl;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"key-methods",children:"Key methods"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"getActiveChainId()"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Uses a static call to the CHAIN_ID_PRECOMPILE address."}),"\n",(0,s.jsx)(n.li,{children:"Returns the currently active chain identifier from the precompile."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"getChainIds()"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Returns an array of all configured chain identifiers."}),"\n",(0,s.jsx)(n.li,{children:"Useful for iterating over available chains."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"setupChainsForScript()"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initializes chain forks for script execution."}),"\n",(0,s.jsx)(n.li,{children:"Creates RPC connections for each configured chain."}),"\n",(0,s.jsx)(n.li,{children:"Uses a custom host URL, if provided, or generates local node URLs."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"setupChainsForTest()"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initializes chain forks for testing."}),"\n",(0,s.jsx)(n.li,{children:"Deploys the ChainwebChainId precompile contract on each chain."}),"\n",(0,s.jsx)(n.li,{children:"Creates a single RPC connection and forks it for multiple chains."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"switchChain(uint256 chainId)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Switches the active fork to the specified chain identifier."}),"\n",(0,s.jsx)(n.li,{children:"Updates the VM's chain context."}),"\n",(0,s.jsx)(n.li,{children:"Validates the chain identifier against configured ranges."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deploychainwebchainidcontract",children:"deployChainWebChainIdContract"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"deployChainWebChainIdContract"})," to deploy the Chainweb chain identifier precompile contract for a given chain."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chainId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint256"})}),(0,s.jsx)(n.td,{children:"Specifies the Chainweb chain identifier to deploy the precompile contract to."})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"getactivechainid",children:"getActiveChainId"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"getActiveChainId"})," to return the currently active ",(0,s.jsx)(n.strong,{children:"Chainweb chain identifiers"})," for the current network context."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Output"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chainId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint256[]"})}),(0,s.jsx)(n.td,{children:"Returns the Chainweb chain identifier for the currently active chain."})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"getchainids",children:"getChainIds"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"getChainIds"})," to retrieve a list of the valid ",(0,s.jsx)(n.strong,{children:"Chainweb chain identifiers"})," for the current network context."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Output"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chainIds"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint256[]"})}),(0,s.jsx)(n.td,{children:"Returns an array containing all of the valid Chainweb chain identifiers."})]})})]}),"\n",(0,s.jsxs)(n.p,{children:["You should note that Chainweb chain identifiers 0 through 19 are reserved for chains that support Pact, so Kadena public networks use the ",(0,s.jsx)(n.code,{children:"chainwebChainIdOffset"})," to set the starting point for Chainweb-specific chain identifiers.\nFor example, the Chainweb EVM testnet consists of five chains with the Chainweb chain identifiers 20, 21, 22, 23, and 24.\nThis starting point value is configured in the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file for each project and for each deployment target.\nIn the sample ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file, the ",(0,s.jsx)(n.code,{children:"anvil"})," deployment target is also configured to use 20 as the starting point for Chainweb EVM chain identifiers.\nHowever, if you spin up internal ",(0,s.jsx)(n.code,{children:"anvil"})," instances for testing, you'll see Chainweb chain identifiers starting with 0."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"chainIdOffset"})," in the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file is the starting point for the ",(0,s.jsx)(n.strong,{children:"Ethereum network chain identifier"}),", similar to 1 for the Ethereum mainnet."]}),"\n",(0,s.jsx)(n.p,{children:"For Chainweb EVM testnet chains, the starting value for the Ethereum network chain identifier is 5920.\nThe network chain identifier for the Chainweb EVM testnet chain 20 is 5920.\nChainweb EVM testnet chain 21 has network chain identifier 5921, and so on."}),"\n",(0,s.jsx)(n.h3,{id:"setupchainsfortest",children:"setupChainsForTest"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"setupChainsForTest"})," to initialize chain forks and deploy precompile contracts on each chain for use when running Foundry tests."]}),"\n",(0,s.jsx)(n.h3,{id:"setupchainsforscript",children:"setupChainsForScript"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"setupChainsForScript"})," to initialize chain forks and RPC nodes for use when running Foundry scripts.\nThis method also deploys precompile contracts if you are using the ",(0,s.jsx)(n.code,{children:"anvil"})," deployment target."]}),"\n",(0,s.jsx)(n.h3,{id:"switchchain",children:"switchChain"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"switchChain"})," to switch from the current active chain to a specified chain identifier in the Chainweb EVM network.\nThis method enables you to loop through a set of Chainweb chain identifiers when executing tests or running scripts.\nYou can also use the method to explicitly set the active chain using its Chainweb-specific chain identifier."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chainId"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"uint256"})}),(0,s.jsx)(n.td,{children:"Specifies the target Chainweb chain identifier to switch to."})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"constants",children:"Constants"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CHAIN_ID_PRECOMPILE"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Precompile contract that provides chain identifier functionality."}),"\n",(0,s.jsxs)(n.li,{children:["Address: ",(0,s.jsx)(n.code,{children:"0x9b02c3e2dF42533e0FD166798B5A616f59DBd2cc"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"chainwebconfigreader",children:"ChainwebConfigReader"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ChainwebConfigReader"})," contract reads the configuration settings from the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file."]}),"\n",(0,s.jsx)(n.h3,{id:"key-method",children:"Key method"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"readChainwebConfig(string memory environment)"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reads configuration settings for the target network specified by the environment parameter."}),"\n",(0,s.jsxs)(n.li,{children:["Uses the ",(0,s.jsx)(n.code,{children:"readOptionalJsonUint"})," function to parse JSON integer values from the configuration file and define default values to use if configuration keys are missing."]}),"\n",(0,s.jsxs)(n.li,{children:["Uses the ",(0,s.jsx)(n.code,{children:"readOptionalJsonString"})," function to parse JSON string values from the configuration file and define default values to use if configuration keys are missing."]}),"\n",(0,s.jsxs)(n.li,{children:["Returns ",(0,s.jsx)(n.code,{children:"ChainwebConfig"})," structure with parsed values."]}),"\n",(0,s.jsx)(n.li,{children:"Uses default values if configuration keys are missing."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"default-values",children:"Default values"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"numberOfChains"}),": 1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chainIdOffset"}),": 31337"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chainwebChainIdOffset"}),": 0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"externalHostUrl"}),': "" (empty string)']}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"chainwebtest",children:"ChainwebTest"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ChainwebTest"})," constructor enables simplified multi-chain testing with automatic initialization by extending the default Foundry ",(0,s.jsx)(n.code,{children:"Test"})," contract, so that you can test cross-chain interactions within a single test environment.\nThe following constructor parameters define the testing environment:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"numberOfChains"})," (uint24): Number of chains to create for a target network."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chainwebChainIdOffset"})," (uint24): Starting offset for Chainweb-specific chain identifiers in the target network."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The following example demonstrates using ",(0,s.jsx)(n.code,{children:"ChainwebTest"})," and these parameters to specify a testing environment with three chains and an offset of zero for the Chainweb chain identifier:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"contract CrossChainTest is ChainwebTest(3, 0) {\n    function testCrossChainTransfer() public {\n        // Test on chain 0\n        chainweb.switchChain(0);\n        // Deploy and interact with contracts\n        \n        // Test on chain 1\n        chainweb.switchChain(1);\n        // Verify state changes\n\n        // Test on chain 2\n        chainweb.switchChain(2);\n        // Verify state changes\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"chainwebscript",children:"ChainwebScript"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ChainwebScript"})," constructor extends the default Foundry Script contract to automatically handle environment-based configuration settings.\nWhen you import this contract in a script, the script reads the ",(0,s.jsx)(n.code,{children:"CHAINWEB"})," environment variable to determine which set of configuration settings to load from the ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file.\nIf you don't specify a target environment, the script uses the default ",(0,s.jsx)(n.code,{children:"anvil"})," settings.\nThe constructor then creates and configures the Chainweb instance based on these settings."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Reads the value of the ",(0,s.jsx)(n.code,{children:"CHAINWEB"})," environment variable to determine the target network."]}),"\n",(0,s.jsxs)(n.li,{children:["Loads the configuration settings that correspond to the ",(0,s.jsx)(n.code,{children:"CHAINWEB"})," environment variable from ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," file."]}),"\n",(0,s.jsxs)(n.li,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"anvil"})," settings if you don't specify the ",(0,s.jsx)(n.code,{children:"CHAINWEB"})," environment variable."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For example, the following ",(0,s.jsx)(n.code,{children:"chainweb.config.json"})," defines the configuration settings for the ",(0,s.jsx)(n.code,{children:"anvil"})," and ",(0,s.jsx)(n.code,{children:"testnet"})," target networks:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "anvil": {\n    "numberOfChains": 3,\n    "chainIdOffset": 31337,\n    "chainwebChainIdOffset": 0,\n    "externalHostUrl": ""\n  },\n  "testnet": {\n    "numberOfChains": 5,\n    "chainIdOffset": 1000,\n    "chainwebChainIdOffset": 10,\n    "externalHostUrl": "https://testnet.example.com"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["You can then use the ",(0,s.jsx)(n.code,{children:"CHAINWEB"})," environment variable to load the configuration settings for the ",(0,s.jsx)(n.code,{children:"testnet"})," environment:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"CHAINWEB=testnet forge script --multi script/Counter.s.sol:CounterScript \\\n  --private-key <your_private_key> \\\n  --broadcast --legacy\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The following example demonstrates using ",(0,s.jsx)(n.code,{children:"ChainwebScript"})," in a deployment script:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-solidity",children:"contract DeployScript is ChainwebScript {\n    function run() public {\n        uint256[] memory chains = chainweb.getChainIds();\n        \n        for (uint256 i = 0; i < chains.length; i++) {\n            chainweb.switchChain(chains[i]);\n            // Deploy contracts on each chain\n        }\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"custom-rpc-configuration",children:"Custom RPC configuration"}),"\n",(0,s.jsx)(n.p,{children:"If you use a custom host for the RPC URL, you should note that RPC endpoints are expected to conform to the following format:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"{hostUrl}/chain/{chainwebChainId}/evm/rpc\n"})}),"\n",(0,s.jsx)(n.h2,{id:"local-and-global-nonce-behavior",children:"Local and global nonce behavior"}),"\n",(0,s.jsxs)(n.p,{children:["When you execute tests or scripts using the default ",(0,s.jsx)(n.code,{children:"msg.sender"})," account, the transaction nonce is always a global nonce.\nIf you use a specific broadcast account by including the ",(0,s.jsx)(n.code,{children:"--sender"})," or ",(0,s.jsx)(n.code,{children:"--private-key"})," command-line options, the transaction nonce is always a local nonce that's specifically for that account and is maintained per fork for that sender."]})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);