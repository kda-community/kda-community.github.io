"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[3797],{90942:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"guides/nodes/howto-node-operator","title":"Get started running a node","description":"Become a Chainweb node operator to support the Kadena network infrastructure.","source":"@site/docs/guides/nodes/chainweb-get-started.md","sourceDirName":"guides/nodes","slug":"/guides/nodes/howto-node-operator","permalink":"/docs/guides/nodes/howto-node-operator","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/nodes/chainweb-get-started.md","tags":[{"inline":true,"label":"pact","permalink":"/docs/tags/pact"},{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"network","permalink":"/docs/tags/network"},{"inline":true,"label":"node operator","permalink":"/docs/tags/node-operator"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Get started running a node","description":"Become a Chainweb node operator to support the Kadena network infrastructure.","id":"howto-node-operator","sidebar_position":2,"tags":["pact","chainweb","network","node operator"]},"sidebar":"default","previous":{"title":"Nodes","permalink":"/docs/guides/nodes/"},"next":{"title":"Configure node settings","permalink":"/docs/guides/nodes/configure"}}');var t=i(74848),a=i(28453);const r={title:"Get started running a node",description:"Become a Chainweb node operator to support the Kadena network infrastructure.",id:"howto-node-operator",sidebar_position:2,tags:["pact","chainweb","network","node operator"]},s="Get started running a node",l={},c=[{value:"Minimum system requirements",id:"minimum-system-requirements",level:2},{value:"Operating system architecture",id:"operating-system-architecture",level:3},{value:"Incoming and outgoing network rules",id:"incoming-and-outgoing-network-rules",level:3},{value:"Installation options",id:"installation-options",level:2},{value:"Install release binaries",id:"install-release-binaries",level:2},{value:"Run in a Docker container",id:"run-in-a-docker-container",level:2},{value:"Build from source",id:"build-from-source",level:2},{value:"Download source code",id:"download-source-code",level:3},{value:"Build with Haskell",id:"build-with-haskell",level:3},{value:"Build with Nix",id:"build-with-nix",level:3},{value:"Review the default configuration",id:"review-the-default-configuration",level:2},{value:"Edit the configuration settings",id:"edit-the-configuration-settings",level:2},{value:"Start the Chainweb node",id:"start-the-chainweb-node",level:2},{value:"Start the node from the executable",id:"start-the-node-from-the-executable",level:3},{value:"Start the node in a container",id:"start-the-node-in-a-container",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"get-started-running-a-node",children:"Get started running a node"})}),"\n",(0,t.jsxs)(n.p,{children:["Computers that run the Chainweb consensus protocol\u2014by installing and managing the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," software\u2014provide the resources that power the Kadena public blockchain network by participating in consensus and validating transactions to produce blocks."]}),"\n",(0,t.jsxs)(n.p,{children:["By installing and running ",(0,t.jsx)(n.code,{children:"chainweb-node"})," and connecting to the Kadena test or production network, you can extend the peer-to-peer communication infrastructure and have direct access to the blockchain state.\nYou can help to improve the security and scalability of the network just by participating.\nYou can also earn rewards if you choose to add resources to calculate proof-of-work solutions to validate transactions as a miner."]}),"\n",(0,t.jsx)(n.h2,{id:"minimum-system-requirements",children:"Minimum system requirements"}),"\n",(0,t.jsx)(n.p,{children:"Before installing Chainweb, you should verify that your computer meets the following minimum recommended hardware requirements for running a node:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"CPU: Minimum of two (2) CPU cores."}),"\n",(0,t.jsx)(n.li,{children:"RAM: Minimum of four (4) GB of RAM."}),"\n",(0,t.jsx)(n.li,{children:"Storage: Minimum 250 GB using a solid state drive (SSD) or fast hard disk drive (HDD)."}),"\n",(0,t.jsx)(n.li,{children:"Network: Publicly-accessible IP address."}),"\n",(0,t.jsx)(n.li,{children:"Operating system: Linux AMD64 architecture."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If you also plan to use the node for mining, to submit transactions, or to query blockchain data, you should verify that your computer meets the following minimum recommended hardware requirements:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Four (4) CPU cores."}),"\n",(0,t.jsx)(n.li,{children:"Eight (8) GB of RAM."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"operating-system-architecture",children:"Operating system architecture"}),"\n",(0,t.jsxs)(n.p,{children:["Most ",(0,t.jsx)(n.code,{children:"chainweb-node"})," software runs on Linux or macOS with AMD64 architectures.\nIf you want to run a Chainweb node on Linux or macOS with ARM64 architecture, you'll need to build the binaries yourself from the source code.\nYou might experience some unexpected behavior when running a node on ARM64 architecture.\nNote that you should not configure ",(0,t.jsx)(n.strong,{children:"mining"})," for nodes on ARM64 architecture.\nRunning a mining node on ARM64 architecture could cause your node to fork from the network."]}),"\n",(0,t.jsxs)(n.p,{children:["If you want to run a Chainweb node on Microsoft Windows, you should note that this isn't a supported configuration and requires you to install the latest Windows Services for Linux (WSL) software.\nIf you choose to proceed after installing WSL, you can install the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," software in the WSL virtual environment rather than using the native Windows operating system."]}),"\n",(0,t.jsx)(n.h3,{id:"incoming-and-outgoing-network-rules",children:"Incoming and outgoing network rules"}),"\n",(0,t.jsx)(n.p,{children:"In addition to a publicly-accessible IP address, nodes must be able to communicate with peers and accept incoming messages from other computers in the network.\nIf your computer is behind a firewall or is a virtual guest connecting to the internet through a host computer, you should review your network configuration and open required ports to allow inbound and outbound traffic.\nFor example, you might need to configure port forwarding for port 1789 on your router or host computer to allow inbound connections from remote nodes."}),"\n",(0,t.jsx)(n.h2,{id:"installation-options",children:"Installation options"}),"\n",(0,t.jsx)(n.p,{children:"There are several options for setting up a Chainweb node in a physical or virtual environment.\nFor example, you can run a Chainweb node image in a Docker container or build the binaries directly from the source code.\nYou can install release binaries directly on a physical Linux server or run them using the infrastructure from a cloud services provider."}),"\n",(0,t.jsx)(n.p,{children:"For more information about your installation options, see the following topics:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#install-release-binaries",children:"Install release binaries"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#run-in-a-docker-container",children:"Run in a Docker container"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#build-from-source",children:"Build from source code"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"install-release-binaries",children:"Install release binaries"}),"\n",(0,t.jsxs)(n.p,{children:["You can download compressed archive files with ",(0,t.jsx)(n.code,{children:"chainweb-node"})," release binaries for Ubuntu Linux directly from the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/releases",children:"Releases"})," page in the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/",children:"chainweb-node"})," repository.\nIf you have Ubuntu 20.04 or Ubuntu 22.04 on a physical or virtual machine, downloading the binary is the most straightforward installation path."]}),"\n",(0,t.jsx)(n.p,{children:"To install from a release archive:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open a terminal shell on the physical or virtual host with the Ubuntu Linux operating system."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update the system with the latest software by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt upgrade\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install the required packages by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install ca-certificates libgmp10 libssl3 libsnappy1v5 zlib1g liblz4-1 libbz2-1.0 libgflags2.2 zstd\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If your computer uses the Ubuntu 20.04 operating system, install the ",(0,t.jsx)(n.code,{children:"libssl1.1"})," package instead of the ",(0,t.jsx)(n.code,{children:"libssl3"})," package."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download the archive file from the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/releases",children:"Releases"})," page."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that the archive file naming convention includes the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," version, compiler version, Ubuntu version, and a commit hash identifier using the following format:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"chainweb-<version>.ghc-<version>.ubuntu-<version>.<revision>.tar.gz\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For example, the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," archive file for Ubuntu 22.04 and ",(0,t.jsx)(n.code,{children:"chainweb-node"})," version 2.26.1 looks like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"chainweb-2.26.1.ghc-9.6.5.ubuntu-22.04.89b0ac3.tar.gz\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Keep in mind that if you attempt to run a version of the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," that's out-of-date, the program displays an error message similar to the following:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Shutting down. This version of chainweb was only valid until2024-08-21 00:00:00 UTC. Please upgrade to a new version.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Be sure to check the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/",children:"chainweb-node"})," repository for the latest release."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Change to the directory that contains the downloaded file\u2014typically, the Downloads folder\u2014or move the file to a new location."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Unzip and extract the compressed archive by running a command similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tar -xvzf chainweb-2.26.1.ghc-9.6.5.ubuntu-22.04.89b0ac3.tar.gz\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify the binary is ready to use and review command-line configuration options by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --help\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see usage information about the configuration settings you can specify as command-line options similar to the following truncated output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Usage: chainweb-node [--info] [--long-info] [-v|--version] [--license] \n                     [-?|-h|--help] \n                     [--print-config-as full|minimal|diff | --print-config] \n                     [--config-file FILE] \n"})}),"\n",(0,t.jsxs)(n.p,{children:["From the usage information, you can see that there are a large number of configuration options that you can use to control and operation and behavior of the Chainweb node.\nBefore you start the node, you should review the configuration options and the default values to determine whether you want to make any changes to the configuration of the node.\nFor information about this next step, see ",(0,t.jsx)(n.a,{href:"#review-the-default-configuration",children:"Review the default configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"run-in-a-docker-container",children:"Run in a Docker container"}),"\n",(0,t.jsxs)(n.p,{children:["If you have Docker installed, you can download a ",(0,t.jsx)(n.code,{children:"chainweb-node"})," image and run a node in a Docker container.\nIf you want to run the node in a Docker container but don't have Docker installed yet, see the instructions provided in ",(0,t.jsx)(n.a,{href:"https://docs.docker.com/engine/install/",children:"Install Docker Engine"})," to download and install Docker for your operating system.\nAfter you have Docker installed, use the following instructions to pull the Docker image and run ",(0,t.jsx)(n.code,{children:"chainweb-node"})," in a Docker container."]}),"\n",(0,t.jsxs)(n.p,{children:["To run ",(0,t.jsx)(n.code,{children:"chainweb-node"})," in a Docker container:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open a terminal shell on the physical or virtual host where you have Docker installed."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Verify that Docker is installed and the ",(0,t.jsx)(n.code,{children:"docker"})," process is running with the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker --version\n"})}),"\n",(0,t.jsx)(n.p,{children:"This commands should return information similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Docker version 24.0.6, build ed223bc\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Pull the latest image by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker pull ghcr.io/kadena-io/chainweb-node/ubuntu:latest\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify the binary is ready to use and review command-line configuration options by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --publish 1789:1789 --publish 1848:1848 --entrypoint=/chainweb/chainweb-node ghcr.io/kadena-io/chainweb-node/ubuntu:latest --help\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see usage information about the configuration settings you can specify as command-line options similar to the following truncated output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Usage: chainweb-node [--info] [--long-info] [-v|--version] [--license] \n                     [-?|-h|--help] \n                     [--print-config-as full|minimal|diff | --print-config] \n                     [--config-file FILE] \n"})}),"\n",(0,t.jsxs)(n.p,{children:["From the usage information, you can see that there are a large number of configuration options that you can use to control and operation and behavior of the Chainweb node.\nBefore you start the node, you should review the configuration options and the default values to determine whether you want to make any changes to the configuration of the node.\nFor information about this next step, see ",(0,t.jsx)(n.a,{href:"#review-the-default-configuration",children:"Review the default configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"build-from-source",children:"Build from source"}),"\n",(0,t.jsxs)(n.p,{children:["In most cases, you should run Chainweb nodes using officially released ",(0,t.jsx)(n.code,{children:"chainweb-node"})," binaries or from the binary packaged in officially released Docker images that you can download from the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/releases",children:"Releases"})," page.\nHowever, if you choose to build the chainweb-node binary yourself, you should first ensure that you have an officially released and tagged version of the source code.\nTagged versions of the source code are tested extensively to ensure that they are compatible with all nodes in the Chainweb network."]}),"\n",(0,t.jsxs)(n.p,{children:["You shouldn't build ",(0,t.jsx)(n.code,{children:"chainweb-node"})," from the ",(0,t.jsx)(n.code,{children:"master"})," branch if you plan to run the node as part of a Kadena public network."]}),"\n",(0,t.jsx)(n.h3,{id:"download-source-code",children:"Download source code"}),"\n",(0,t.jsx)(n.p,{children:"To download tagged source code:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Open the ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node/releases",children:"Releases"})," page."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download the compressed archive for your working environment:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Download source code",src:i(6319).A+"",width:"1972",height:"421"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Unzip and extract the compressed archive by double-clicking or by running a command similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tar -xvzf chainweb-node-2.26.1.tar.gz\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Change to the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," source code directory."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["After you have downloaded and unpacked the source code, you have two options for building the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," binary from the source:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You can build the binary using the native Haskell toolchain."}),"\n",(0,t.jsx)(n.li,{children:"You can build the binary using the Nix package manager."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"build-with-haskell",children:"Build with Haskell"}),"\n",(0,t.jsx)(n.p,{children:"To build with the native Haskell toolchain:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Download and install the following Haskell tools:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://www.haskell.org/ghc/",children:"Glasgow Haskell Compiler (GHC)"}),", ",(0,t.jsx)(n.code,{children:"ghc-9.6.5"}),", or later."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://www.haskell.org/cabal/",children:"Haskell build tool CABAL"}),", ",(0,t.jsx)(n.code,{children:"cabal"}),", version 3.4, or later."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can download, install and manage the Haskell toolchain using ",(0,t.jsx)(n.code,{children:"ghcup"}),".\nTo install on Linux, macOS, FreeBSD, or WSL2, go to ",(0,t.jsx)(n.a,{href:"https://www.haskell.org/ghcup/",children:"GHCup"})," to download the main Haskell installer, then follow the installation instructions to install the toolchain."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install the development versions of the following required libraries:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"gflags-dev"}),"\n",(0,t.jsx)(n.li,{children:"snappy-dev"}),"\n",(0,t.jsx)(n.li,{children:"zlib-dev"}),"\n",(0,t.jsx)(n.li,{children:"lz4-dev"}),"\n",(0,t.jsx)(n.li,{children:"bz2-dev"}),"\n",(0,t.jsx)(n.li,{children:"zstd-dev"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If the host uses the advanced package tool (apt), you can install these libraries by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"apt-get install ca-certificates libssl-dev libgmp-dev libsnappy-dev zlib1g-dev liblz4-dev libbz2-dev libgflags-dev libzstd-dev\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On macOS, if you have Apple Developer Tools (",(0,t.jsx)(n.code,{children:"xcode"}),") and ",(0,t.jsx)(n.code,{children:"brew"})," installed, you can install these libraries by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install ca-certificates libgmp-dev libsnappy-dev zlib1g-dev liblz4-dev libbz2-dev libgflags-dev libzstd-dev\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ensure the ",(0,t.jsx)(n.code,{children:"cabal"})," build tool is up-to-date by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cabal update\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Build a ",(0,t.jsx)(n.code,{children:"chainweb-node"})," binary by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cabal build\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Locate the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," executable binary by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cabal list-bin chainweb-node\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Verify that ",(0,t.jsx)(n.code,{children:"chainweb-node"})," is ready to use and review command-line configuration options by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --help\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see usage information about the configuration settings you can specify as command-line options similar to the following truncated output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Usage: chainweb-node [--info] [--long-info] [-v|--version] [--license] \n                     [-?|-h|--help] \n                     [--print-config-as full|minimal|diff | --print-config] \n                     [--config-file FILE] \n"})}),"\n",(0,t.jsxs)(n.p,{children:["From the usage information, you can see that there are a large number of configuration options that you can use to control and operation and behavior of the Chainweb node.\nBefore you start the node, you should review the configuration options and the default values to determine whether you want to make any changes to the configuration of the node.\nFor information about this next step, see ",(0,t.jsx)(n.a,{href:"#review-the-default-configuration",children:"Review the default configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"build-with-nix",children:"Build with Nix"}),"\n",(0,t.jsx)(n.p,{children:"One advantage of using the Nix package manager to build and run the chainweb-node binary is that Nix caches binary dependencies, so you can download pre-built binaries for for the libraries and packages that Chainweb requires."}),"\n",(0,t.jsx)(n.p,{children:"To build with the Nix package manager:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download and install ",(0,t.jsx)(n.a,{href:"https://nixos.org/nix/",children:"Nix"})," by clicking ",(0,t.jsx)(n.strong,{children:"Get Nix"}),", then follow the instructions."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open your shell startup profile file for the shell you use in a text editor."}),"\n",(0,t.jsxs)(n.p,{children:["For example, if you are using the ",(0,t.jsx)(n.code,{children:"bash"})," shell, open the ",(0,t.jsx)(n.code,{children:".bash_profile"})," file.\nIf you are using the ",(0,t.jsx)(n.code,{children:"zsh"})," shell, open the ",(0,t.jsx)(n.code,{children:".zsh_profile"})," file."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Add the following line to the startup profile:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:". $HOME/.nix-profile/etc/profile.d/nix.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you don't want to edit the profile directly using a text editor or don't have a text editor installed, you can run a command similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'echo ". $HOME/.nix-profile/etc/profile.d/nix.sh" >> ~/.bash_profile\n'})}),"\n",(0,t.jsxs)(n.p,{children:["If you are using a different shell, change ",(0,t.jsx)(n.code,{children:".bash_profile"})," to the appropriate startup script for your shell."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Open the ",(0,t.jsx)(n.code,{children:"/etc/nix/nix.conf"})," file in a text editor and add the following lines to the file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"substituters = https://nixcache.chainweb.com https://cache.nixos.org/\ntrusted-public-keys = nixcache.chainweb.com:FVN503ABX9F8x8K0ptnc99XEz5SaA4Sks6kNcZn2pBY= cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=\nexperimental-features = nix-command flakes\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If the ",(0,t.jsx)(n.code,{children:"/etc/nix"})," directory doesn't exist, you should switch to the root user and create it, then add the ",(0,t.jsx)(n.code,{children:"nix.conf"})," file to the directory."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Restart the ",(0,t.jsx)(n.code,{children:"nix-daemon"})," process."]}),"\n",(0,t.jsxs)(n.p,{children:["Most installations of Nix are multi-user and require you to restart the nix daemon to make your ",(0,t.jsx)(n.code,{children:"nix.conf"})," changes take effect."]}),"\n",(0,t.jsx)(n.p,{children:"You can check whether Nix is running in multi-user or single-user mode by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ps aux | grep nix-daemon\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If you see only the ",(0,t.jsx)(n.code,{children:"grep"})," command, then you are using single-user mode and you don't have to do anything else.\nIf you see a ",(0,t.jsx)(n.code,{children:"nix-daemon"})," process, then you are using multi-user mode and you need to restart the process"]}),"\n",(0,t.jsx)(n.p,{children:"On macOS, run the following commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo launchctl stop org.nixos.nix-daemon\nsudo launchctl start org.nixos.nix-daemon\n"})}),"\n",(0,t.jsx)(n.p,{children:"On Linux, run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart nix-daemon.service\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Build ",(0,t.jsx)(n.code,{children:"chainweb-node"})," by running a command similar to the following for a specific release ",(0,t.jsx)(n.code,{children:"tag"}),", such as 2.26.1:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix build github:kadena-io/chainweb-node/<tag>\n"})}),"\n",(0,t.jsx)(n.p,{children:"After starting the build, you should see messages similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"copying path '/nix/store/8dyrf48cwvyqhvks5adxlk675qgm7pql-haskell-project-plan-to-nix-pkgs' from 'https://nixcache.chainweb.com'\n...\n"})}),"\n",(0,t.jsx)(n.p,{children:"These messages indicate that the pre-built artifacts are being successfully downloaded from the cache."}),"\n",(0,t.jsxs)(n.p,{children:["When the build is finished, the directory with the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," source code contains a ",(0,t.jsx)(n.code,{children:"result"})," subdirectory with a symbolic link to the Nix cache."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Verify that ",(0,t.jsx)(n.code,{children:"chainweb-node"})," is ready to use and review command-line configuration options by running the following command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./result/bin/chainweb-node --help\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see usage information about the configuration settings you can specify as command-line options similar to the following truncated output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Usage: chainweb-node [--info] [--long-info] [-v|--version] [--license] \n                     [-?|-h|--help] \n                     [--print-config-as full|minimal|diff | --print-config] \n                     [--config-file FILE] \n"})}),"\n",(0,t.jsxs)(n.p,{children:["From the usage information, you can see that there are a large number of configuration options that you can use to control and operation and behavior of the Chainweb node.\nBefore you start the node, you should review the configuration options and the default values to determine whether you want to make any changes to the configuration of the node.\nFor information about this next step, see ",(0,t.jsx)(n.a,{href:"#review-the-default-configuration",children:"Review the default configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"review-the-default-configuration",children:"Review the default configuration"}),"\n",(0,t.jsx)(n.p,{children:"Now that you have a Chainweb node binary ready to run, you should review the default configuration options and the default values.\nConfiguration options and settings control many types of node behavior, operation, and features.\nFor example, you can use configuration options to enable or disable the backup API for the node.\nYou can also modify configuration settings to change the logging level for node messages."}),"\n",(0,t.jsx)(n.p,{children:"To review the default node configuration:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Open a terminal shell on a computer with access to the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," binary."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Change to the directory that contains the ",(0,t.jsx)(n.code,{children:"chainweb-node"})," binary."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"View the default configuration settings in the terminal by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --print-config\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you're running the node in a Docker container, you can view the configuration settings by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --publish 1789:1789 --publish 1848:1848 --entrypoint=/chainweb/chainweb-node ghcr.io/kadena-io/chainweb-node/ubuntu:latest --print-config\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Extract the default configuration settings to create a configuration file for the node by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --print-config > default-config.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you're running the node in a Docker container, you can create a configuration file for the node by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --publish 1789:1789 --publish 1848:1848 --entrypoint=chainweb/chainweb-node ghcr.io/kadena-io/chainweb-node/ubuntu:latest --print-config > default-config.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"This command creates the default configuration file in the host environment outside of the Docker container so that you can review configuration options and settings before starting the node in the container."}),"\n",(0,t.jsx)(n.p,{children:"After you create a node configuration file from the default settings, you should determine whether you want to make any changes to the configuration of the node.\nIf you want to modify any of the default settings or add features that are disabled by default, you can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Edit settings in one or more configuration files."}),"\n",(0,t.jsx)(n.li,{children:"Use corresponding command-line options to control node operations."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For more information about editing configuration settings in the configuration file, see ",(0,t.jsx)(n.a,{href:"#edit-the-configuration-settings",children:"Edit the configuration settings"}),".\nFor information about using command-line options to control node operations, see the ",(0,t.jsx)(n.a,{href:"/reference/chainweb-cli",children:"chainweb-node"})," command-line reference."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"edit-the-configuration-settings",children:"Edit the configuration settings"}),"\n",(0,t.jsx)(n.p,{children:"After you create a node configuration file from the default settings, you can edit the configuration to suit your environment.\nFor example, you can edit the configuration file to make the following types of changes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Enable the backup API and specify the directory for backup files."}),"\n",(0,t.jsx)(n.li,{children:"Connect the node to the Kadena test network instead of the Kadena main network."}),"\n",(0,t.jsx)(n.li,{children:"Specify a directory for blockchain database files."}),"\n",(0,t.jsxs)(n.li,{children:["Ignore or connect to a subset of ",(0,t.jsx)(n.a,{href:"https://github.com/kadena-io/chainweb-node?tab=readme-ov-file#bootstrap-nodes",children:"bootstrap nodes"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To edit the node configuration:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open a terminal shell on a computer with access to the node configuration file."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Copy the default configuration file to save as a backup."}),"\n",(0,t.jsxs)(n.p,{children:["For example, copy the ",(0,t.jsx)(n.code,{children:"default-config.yaml"})," to save a copy of it as the ",(0,t.jsx)(n.code,{children:"modified-config.yaml"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cp default-config.yaml modified-config.yaml\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open the configuration file in a text editor and edit the settings you want to change."}),"\n",(0,t.jsx)(n.p,{children:"For example, the following excerpt illustrates some common changes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"chainweb:\n  allowReadsInLocal: false\n  backup:\n    api:\n      configuration: {}\n      enabled: true\n    directory: /tmp/my-backups\n  chainwebVersion: testnet04\n  \n  fullHistoricPactState: false\n  \n  databaseDirectory: /usr/local/share/chainweb/db\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"start-the-chainweb-node",children:"Start the Chainweb node"}),"\n",(0,t.jsx)(n.p,{children:"After you've made any changes needed in the node configuration file, you can start the node with the modified configuration file or by specifying the command-line options you want to set."}),"\n",(0,t.jsx)(n.h3,{id:"start-the-node-from-the-executable",children:"Start the node from the executable"}),"\n",(0,t.jsx)(n.p,{children:"To start the node from the release binary or after building from the source, you can run a command similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --config-file modified-config.yaml   \n"})}),"\n",(0,t.jsxs)(n.p,{children:["The node immediately begins trying to synchronize state with other nodes in the network.\nIf the network is correctly configured to allow communication, you should start seeing the block height for your node catching up with its peers.\nIf you see errors or warning messages, you should review the ",(0,t.jsx)(n.a,{href:"/guides/troubleshooting",children:"Troubleshooting"})," section for potential causes and solutions."]}),"\n",(0,t.jsx)(n.h3,{id:"start-the-node-in-a-container",children:"Start the node in a container"}),"\n",(0,t.jsx)(n.p,{children:"To start the node in a Docker container, you can run a command similar to the following to use the default configuration settings:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --publish 1789:1789 --publish 1848:1848 --entrypoint=/chainweb/chainweb-node ghcr.io/kadena-io/chainweb-node/ubuntu:latest   \n"})}),"\n",(0,t.jsxs)(n.p,{children:["After starting the node in a Docker container, you can view the contents of the container and interact with it using basic shell commands.\nFor example, you can get the container identifier by running ",(0,t.jsx)(n.code,{children:"docker ps"}),", then open a shell in the container by running a command similar to the following:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker exec --interactive --tty <container-id> /bin/bash\n"})}),"\n",(0,t.jsx)(n.p,{children:"However, the container doesn't include a text editor for modifying the configuration file.\nIf you want to run the node with modified configuration settings in a Docker container, you can add the appropriate command-line options when starting the node.\nFor example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --publish 1789:1789 --publish 1848:1848 --entrypoint=/chainweb/chainweb-node ghcr.io/kadena-io/chainweb-node/ubuntu:latest --enable-backup-api --backup-directory /tmp/my-backups\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For more information about using command-line options to control node operations, see the ",(0,t.jsx)(n.a,{href:"/reference/chainweb-cli",children:"chainweb-node"})," command-line reference."]}),"\n",(0,t.jsxs)(n.p,{children:["After you start the node in the container, it immediately begins trying to synchronize state with other nodes in the network.\nIf the network is correctly configured to allow communication, you should start seeing the block height for your node catching up with its peers.\nIf you see errors or warning messages, you should review the ",(0,t.jsx)(n.a,{href:"/guides/troubleshooting",children:"Troubleshooting"})," section for potential causes and solutions or post a question on the Kadena Discord server ",(0,t.jsx)(n.a,{href:"https://discord.com/channels/502858632178958377/1051827506279370802",children:"#infrastructure"})," channel."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},6319:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/chainweb-node-assets-f0ca897175dc9d4014beeaf630701b55.png"},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var o=i(96540);const t={},a=o.createContext(t);function r(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);