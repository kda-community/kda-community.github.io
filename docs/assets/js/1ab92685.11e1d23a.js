"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[4371],{44201:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"coding-projects/gas-station","title":"Gas station accounts","description":"Create and configure a gas station account to pay for transactions submitted by application users.","source":"@site/docs/coding-projects/gas-station.md","sourceDirName":"coding-projects","slug":"/coding-projects/gas-station","permalink":"/docs/coding-projects/gas-station","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/coding-projects/gas-station.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Gas station accounts","description":"Create and configure a gas station account to pay for transactions submitted by application users.","id":"gas-station","sidebar_position":9},"sidebar":"default","previous":{"title":"Contract interactions","permalink":"/docs/coding-projects/contract-interactions"},"next":{"title":"Loans in multiple tables","permalink":"/docs/coding-projects/loans"}}');var c=a(74848),s=a(28453);const i={title:"Gas station accounts",description:"Create and configure a gas station account to pay for transactions submitted by application users.",id:"gas-station",sidebar_position:9},o="Gas station accounts",r={},l=[{value:"Principal accounts and guards",id:"principal-accounts-and-guards",level:2},{value:"Get the starter code",id:"get-the-starter-code",level:2},{value:"Implement the gas payer interface",id:"implement-the-gas-payer-interface",level:2},{value:"Test the gas payer implementation",id:"test-the-gas-payer-implementation",level:2},{value:"Create the capability-guarded account",id:"create-the-capability-guarded-account",level:2},{value:"Verify the gas station account",id:"verify-the-gas-station-account",level:2},{value:"Scope to specific transactions",id:"scope-to-specific-transactions",level:2},{value:"Display account details",id:"display-account-details",level:2},{value:"Deploy the contract",id:"deploy-the-contract",level:2},{value:"Prepare to deploy",id:"prepare-to-deploy",level:3},{value:"Create a deployment transaction",id:"create-a-deployment-transaction",level:3},{value:"Fund the gas station account",id:"fund-the-gas-station-account",level:2},{value:"Review",id:"review",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"gas-station-accounts",children:"Gas station accounts"})}),"\n",(0,c.jsxs)(n.p,{children:["In the ",(0,c.jsx)(n.em,{children:"Gas station account"})," coding project, you'll learn how to create a smart contract that allows application users to complete a transaction on the blockchain without having an account or any tokens to pay the transaction fee.\nWith this smart contract, an autonomous account is used to pay transaction fees on behalf of users.\nThe autonomous account\u2014often referred to as a ",(0,c.jsx)(n.strong,{children:"gas station"}),"\u2014simplifies the user experience and eliminates the friction associated with onboarding users who are new to blockchain technology, digital wallets, transaction signing, and managing public and secret keys.\nGas station accounts make it easier for new users to interact with applications, but require some extra work by the application developer.\nFor example, you'll most likely want to set limits on how and when the funds in the gas station account can be used to prevent the account balance from being drained too quickly or funding transactions that require a lot of computational overhead."]}),"\n",(0,c.jsxs)(n.p,{children:["In this coding project, you'll see a simple example of how to create a ",(0,c.jsx)(n.code,{children:"coin"})," contract account that pays transaction fees\u2014that is, the gas fees\u2014on behalf of users.\nThis coding project explores how to:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Create a gas station principal account with a capability guard."}),"\n",(0,c.jsx)(n.li,{children:"Implement the interface required to allow the account to pay transaction fees for any type of transaction."}),"\n",(0,c.jsx)(n.li,{children:"Scope the gas station account to only pay transaction fees for transactions that meet specific criteria."}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"By completing this project, you'll have a basic understanding of the functions used to create a secure gas station account and how to set limits to protect the account from misuse."}),"\n",(0,c.jsx)(n.h2,{id:"principal-accounts-and-guards",children:"Principal accounts and guards"}),"\n",(0,c.jsxs)(n.p,{children:["A gas station account is similar to any other ",(0,c.jsx)(n.code,{children:"coin"})," contract account.\nIt must have an account name, guard, and balance, so that it can be uniquely identified, sign transactions securely, and hold funds for paying fees.\nHowever, it's important for you to restrict access to the gas station account to ensure it's only used as intended.\nThe primary way to secure access to the gas station account is by creating it as a ",(0,c.jsx)(n.strong,{children:"principal account"})," with a unique guard."]}),"\n",(0,c.jsxs)(n.p,{children:["For an introduction to principal accounts, see ",(0,c.jsx)(n.a,{href:"/smart-contracts/accounts",children:"Accounts, keys, and principals"}),".\nFor information about the different types of guards, see ",(0,c.jsx)(n.a,{href:"/smart-contracts/guards",children:"Guards"}),".\nThe following example illustrates how to use the ",(0,c.jsx)(n.code,{children:"create-user-guard"})," and ",(0,c.jsx)(n.code,{children:"create-principal"})," functions to create a ",(0,c.jsx)(n.code,{children:"coin"})," account with a ",(0,c.jsx)(n.strong,{children:"user guard"})," for the ",(0,c.jsx)(n.code,{children:"allow"})," function:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(namespace "free")\n(module test-gas GOV\n     (defcap GOV() true)\n     (defun allow() true)\n)\n\n(let ((guard (create-user-guard (test-gas.allow))))\n  (coin.create-account (create-principal guard) guard)\n)\n'})}),"\n",(0,c.jsxs)(n.p,{children:["The ",(0,c.jsx)(n.code,{children:"coin.create-account"})," function creates a new principal account with a user guard in the ",(0,c.jsx)(n.code,{children:"coin-table"})," with a default balance of 0.0.\nYou can use similar code to create a new account that makes use of a ",(0,c.jsx)(n.strong,{children:"capability guard"}),".\nFor example:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(namespace "free")\n(module test-gas GOV\n     (defcap GOV() true)\n     (defcap ALLOW-ALL() true)\n)\n   \n(let ((guard (create-capability-guard (test-gas.ALLOW-ALL))))\n   (coin.create-account (create-principal guard) guard)\n)\n'})}),"\n",(0,c.jsxs)(n.p,{children:["A capability guard is an essential part of the code that makes creating a gas station principal account possible.\nIn the next step, you'll implement the ",(0,c.jsx)(n.code,{children:"gas-payer-v1"})," interface to add a ",(0,c.jsx)(n.code,{children:"GAS_PAYER"})," capability and guard to your module."]}),"\n",(0,c.jsx)(n.h1,{id:"before-you-begin",children:"Before you begin"}),"\n",(0,c.jsx)(n.p,{children:"Before starting this project, verify your environment meets the following basic requirements:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["You have a GitHub account and can run ",(0,c.jsx)(n.code,{children:"git"})," commands."]}),"\n",(0,c.jsxs)(n.li,{children:["You have installed the ",(0,c.jsx)(n.a,{href:"/smart-contracts/install",children:"Pact"})," programming language and command-line interpreter."]}),"\n",(0,c.jsxs)(n.li,{children:["You have installed the ",(0,c.jsx)(n.a,{href:"/smart-contracts/install/tooling#kadena-command-line-interface",children:(0,c.jsx)(n.code,{children:"kadena-cli"})})," package and have a working directory with initial configuration settings."]}),"\n",(0,c.jsxs)(n.li,{children:["You have a ",(0,c.jsx)(n.a,{href:"/smart-contracts/install/local-dev-node",children:"local development"})," node that you can connect to that runs the ",(0,c.jsx)(n.code,{children:"chainweb-node"})," program, either in a Docker container or on a physical or virtual computer."]}),"\n",(0,c.jsxs)(n.li,{children:["You must have at least one ",(0,c.jsx)(n.a,{href:"/guides/accounts/howto-fund-accounts",children:"account"})," that's funded with KDA on at least one chain for deployment on the local development network or the Kadena test network."]}),"\n",(0,c.jsxs)(n.li,{children:["You should be familiar with the basics for defining ",(0,c.jsx)(n.a,{href:"/smart-contracts/modules",children:"modules"})," and using keysets."]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"get-the-starter-code",children:"Get the starter code"}),"\n",(0,c.jsx)(n.p,{children:"To get started:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Open a terminal shell on your computer."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Clone the ",(0,c.jsx)(n.code,{children:"pact-coding-projects"})," repository by running the following command:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/kadena-docs/pact-coding-projects.git\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Change to the ",(0,c.jsx)(n.code,{children:"04-gas-station"})," directory by running the following command:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cd pact-coding-projects/04-gas-station\n"})}),"\n",(0,c.jsx)(n.p,{children:"If you list the contents of this directory, you'll see the following files:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"starter-gas-account.pact"})," provides a framework for the project code in comments."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"gas-account.pact"})," contains the final module code for the sample gas account."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"gas-account.repl"})," provides the complete test file for testing the final ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open and review the ",(0,c.jsx)(n.code,{children:"starter-gas-account.pact"})," file."]}),"\n",(0,c.jsxs)(n.p,{children:["This file describes all of the tasks that you need to complete for the ",(0,c.jsx)(n.em,{children:"Gas station accounts"})," coding project.\nYou can follow the instructions embedded in the file to try to tackle this coding project on your own\nwithout looking at the solutions to each step, or follow the instructions in the next sections if you need additional guidance."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"implement-the-gas-payer-interface",children:"Implement the gas payer interface"}),"\n",(0,c.jsxs)(n.p,{children:["Because paying gas fees is a common operation, the ",(0,c.jsx)(n.code,{children:"gas-payer-v1"})," interface is defined in a module that's deployed by default on the Kadena development, test, and main networks.\nFor this coding project, you'll implement this interface in a new Pact module\u2014the ",(0,c.jsx)(n.code,{children:"test-gas"})," module\u2014in a ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file."]}),"\n",(0,c.jsx)(n.p,{children:"To create the gas station module:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Open the code editor on your computer."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Create a new ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Add the minimal Pact code required to define a module."}),"\n",(0,c.jsx)(n.p,{children:"Remember that a module requires the following information:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"namespace"}),"\n",(0,c.jsx)(n.li,{children:"governing keyset or capability"}),"\n",(0,c.jsx)(n.li,{children:"at least one function"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["The function in this case is an implementation of the ",(0,c.jsx)(n.code,{children:"gas-payer-v1"})," interface as defined in the ",(0,c.jsx)(n.code,{children:"gas-payer-v1.pact"})," file.\nFor example:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(namespace "free")\n  (define-keyset "free.dev-account" (read-keyset "dev-account" ))\n\n(module test-gas GOVERNANCE\n  (defcap GOVERNANCE () \n    (enforce-guard "free.pistolas-dev-account"))\n\n\n  (implements gas-payer-v1)\n\n)\n'})}),"\n",(0,c.jsxs)(n.p,{children:["To deploy the gas station module, you must use an existing namespace such as your principal namespace or the ",(0,c.jsx)(n.code,{children:'"free"'})," namespace.\nFor local testing, you can create the ",(0,c.jsx)(n.code,{children:"test-gas"})," module in a custom namespace that you define for the local development network."]}),"\n",(0,c.jsxs)(n.p,{children:["After you issue the ",(0,c.jsx)(n.code,{children:"implements gas-payer-v1"})," statement, you must implement the capabilities, types, and functions that are defined in the ",(0,c.jsx)(n.code,{children:"gas-payer-v1.pact"})," file in the ",(0,c.jsx)(n.code,{children:"test-gas"})," module.\nThe interface definition looks like this:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"(interface gas-payer-v1\n\n  (defcap GAS_PAYER:bool\n    ( user:string\n      limit:integer\n      price:decimal\n    )\n    @doc\n    \" Provide a capability indicating that declaring module supports \\\n    \\ gas payment for USER for gas LIMIT and PRICE. Functionality \\\n    \\ should require capability (coin.FUND_TX), and should validate \\\n    \\ the spend of (limit * price), possibly updating some database \\\n    \\ entry. \\\n    \\ Should compose capability required for 'create-gas-payer-guard'.\"\n  )\n\n  (defun create-gas-payer-guard:guard ()\n    @doc\n    \" Provide a guard suitable for controlling a coin account that can \\\n    \\ pay gas via GAS_PAYER mechanics. Generally this is accomplished \\\n    \\ by having GAS_PAYER compose a capability without parameters,  \\\n    \\ that is required in this guard. Thus, if coin contract is able to \\\n    \\ successfully acquire GAS_PAYER, the composed 'anonymous' cap required \\\n    \\ here will be in scope, and gas buy will succeed.\"\n  )\n)\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Implement the ",(0,c.jsx)(n.code,{children:"GAS_PAYER"})," capability as defined in the ",(0,c.jsx)(n.code,{children:"gas-payer-v1.pact"})," file and compose an inner capability called ",(0,c.jsx)(n.code,{children:"ALLOW_GAS"})," to use as a guard for the account used to pay transaction fees:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"  (defcap GAS_PAYER:bool\n     ( user  : string\n       limit : integer\n       price : decimal\n     )\n     (compose-capability (ALLOW_GAS))\n  )\n\n  (defcap ALLOW_GAS () true)\n\n  (defun create-gas-payer-guard:guard ()\n    (create-capability-guard (ALLOW_GAS))\n  )\n"})}),"\n",(0,c.jsxs)(n.p,{children:["With this code, an account granted the ",(0,c.jsx)(n.code,{children:"GAS_PAYER"})," capability can pay gas fees for any transaction.\nIn addition, the ",(0,c.jsx)(n.code,{children:"create-gas-payer-guard"})," function uses the built-in ",(0,c.jsx)(n.code,{children:"create-capability-guard"})," function to return a guard for the ",(0,c.jsx)(n.code,{children:"ALLOW_GAS"})," capability."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"test-the-gas-payer-implementation",children:"Test the gas payer implementation"}),"\n",(0,c.jsxs)(n.p,{children:["At this point, you have a basic implementation of the ",(0,c.jsx)(n.code,{children:"gas-payer-v1"})," interface that can be used to pay transaction fees but without any other scoping or restrictions.\nBefore deploying the new module or updating it to be more restrictive, you should prepare a script for testing operations locally.\nTo test the module locally, you'll need to add the contracts that the gas station module depends on to your local environment."]}),"\n",(0,c.jsx)(n.p,{children:"To prepare a test file:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Open the code editor on your computer."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Copy the following required files to your working directory:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"coin-v5.pact\nfungible-v2.pact\nfungible-xchain-v1.pact\ngas-payer-v1.pact\n"})}),"\n",(0,c.jsx)(n.p,{children:"Copying these files to your local environment is required because the contracts aren't deployed in the Pact REPL by default."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Create a new ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file to provide all of the environment data required for the module, including the namespace, keys, signatures, and contracts."]}),"\n",(0,c.jsxs)(n.p,{children:["For example, the initial environment information for the ",(0,c.jsx)(n.code,{children:"gas-account"})," might look similar to the following:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(env-data\n   { "dev-account":\n       { "keys" : [ "58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c" ]\n       , "pred" : "keys-all"\n       }\n   }\n)\n   (env-sigs\n       [{ "key"  : "58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c"\n        , "caps" : []\n       }]\n  )\n\n(begin-tx "Define principal namespace")\n  (define-namespace "free" (read-keyset "dev-account" ) (read-keyset "dev-account" ))\n(commit-tx)\n \n(begin-tx "Define admin-keyset")\n  (namespace "free")\n  (define-keyset "free.dev-account" (read-keyset "dev-account" ))\n(commit-tx)\n\n(begin-tx "Load required modules")\n   (load "fungible-v2.pact")\n   (load "fungible-xchain-v1.pact")\n   (load "coin-v5.pact")\n   (create-table coin-table)\n   (create-table allocation-table)\n   (load "gas-payer-v1.pact")\n(commit-tx)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add a call to load the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(begin-tx "Load gas station module")\n   (load "gas-account.pact")\n(commit-tx)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Execute the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file using the ",(0,c.jsx)(n.code,{children:"pact"})," command-line interpreter and the ",(0,c.jsx)(n.code,{children:"--trace"})," option:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"pact gas-account.repl --trace\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should see that the operations are successful with output similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"gas-account.repl:1:0:Trace: Setting transaction data\ngas-account.repl:8:2:Trace: Setting transaction signatures/caps\ngas-account.repl:14:0:Trace: Begin Tx 0: Define principal namespace\ngas-account.repl:15:2:Trace: Namespace defined: free\ngas-account.repl:16:0:Trace: Commit Tx 0: Define principal namespace\ngas-account.repl:18:0:Trace: Begin Tx 1: Define admin-keyset\ngas-account.repl:19:2:Trace: Namespace set to free\ngas-account.repl:20:2:Trace: Keyset defined\ngas-account.repl:21:0:Trace: Commit Tx 1: Define admin-keyset\ngas-account.repl:23:0:Trace: Begin Tx 2: Load required modules\ngas-account.repl:24:3:Trace: Loading fungible-v2.pact...\nfungible-v2.pact:1:0:Trace: Loaded interface fungible-v2\ngas-account.repl:25:3:Trace: Loading fungible-xchain-v1.pact...\nfungible-xchain-v1.pact:1:0:Trace: Loaded interface fungible-xchain-v1\ngas-account.repl:26:3:Trace: Loading coin-v5.pact...\ncoin-v5.pact:1:0:Trace: Loaded module coin, hash rE7DU8jlQL9x_MPYuniZJf5ICBTAEHAIFQCB4blofP4\ngas-account.repl:27:3:Trace: TableCreated\ngas-account.repl:28:3:Trace: TableCreated\ngas-account.repl:29:3:Trace: Loading gas-payer-v1.pact...\ngas-payer-v1.pact:1:0:Trace: Loaded interface gas-payer-v1\ngas-account.repl:30:0:Trace: Commit Tx 2: Load required modules\ngas-account.repl:32:0:Trace: Begin Tx 3: Load gas station module\ngas-account.repl:33:3:Trace: Loading gas-account.pact...\ngas-account.pact:1:0:Trace: Namespace set to free\ngas-account.pact:3:0:Trace: Loaded module free.test-gas, hash rqS8Y5Rp-DxlTQHSKgeDJrRTlGFfoA5eaIKtcctwYN0\ngas-account.repl:34:0:Trace: Commit Tx 3: Load gas station module\nLoad successful\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"create-the-capability-guarded-account",children:"Create the capability-guarded account"}),"\n",(0,c.jsxs)(n.p,{children:["To make the gas station account more secure, you can create it using a principal account name and guard access to it by using the ",(0,c.jsx)(n.code,{children:"ALLOW_GAS"})," capability.\nBecause the gas station account is a capability-guarded account, the ",(0,c.jsx)(n.code,{children:"create-principal"})," Pact function creates the principal account name with a ",(0,c.jsx)(n.code,{children:"c:"})," prefix.\nYou can then define the gas station account name as a constant in the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file."]}),"\n",(0,c.jsx)(n.p,{children:"To create a capability-guarded account:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file in the code editor."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add a ",(0,c.jsx)(n.code,{children:"GAS_ACCOUNT"})," constant to store the gas station principal account in the module declaration:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"(defconst GAS_ACCOUNT (create-principal (create-gas-payer-guard)))\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add an ",(0,c.jsx)(n.code,{children:"init"})," function that uses the ",(0,c.jsx)(n.code,{children:"coin.create-account"})," function to create the gas station account in the module declaration:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"(defun init ()\n  (coin.create-account GAS_ACCOUNT (create-gas-payer-guard))\n)\n"})}),"\n",(0,c.jsx)(n.p,{children:"In this code:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["The first argument of the function is the account name you defined using the ",(0,c.jsx)(n.code,{children:"GAS_ACCOUNT"})," constant."]}),"\n",(0,c.jsx)(n.li,{children:"The second argument is the guard for the account."}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add an expression ",(0,c.jsx)(n.strong,{children:"after"})," the module declaration that calls the ",(0,c.jsx)(n.code,{children:"init"})," function if the module is deployed with ",(0,c.jsx)(n.code,{children:'{ "init": true }'})," in the environment data:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(if (read-msg "init")\n  [(init)]\n  ["Not creating the gas station account"]\n)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Save your changes to the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file in the code editor."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Update the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file to set ",(0,c.jsx)(n.code,{children:"init"})," to ",(0,c.jsx)(n.code,{children:"true"})," by adding the following lines of code before loading the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(env-data\n  { "init": true }\n)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Update the load transaction to display the capability-guarded gas station account name when you execute the file:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(begin-tx "Load gas station module")\n   (load "gas-account.pact")\n   [GAS_ACCOUNT]\n(commit-tx)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Execute the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"pact gas-account.repl --trace\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should see that the transaction completes with output similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'...\ngas-account.repl:36:0:Trace: Begin Tx 3: Load gas station module\ngas-account.repl:37:3:Trace: Loading 01-gas-account.pact...\ngas-account.pact:1:0:Trace: Namespace set to free\ngas-account.pact:3:0:Trace: Loaded module free.test-gas, hash q1bMc2SzjAJrbhUyZJ5t4u8Zktvi9H_xOZqsxZljTA4\ngas-account.pact:28:0:Trace: ["Write succeeded"]\ngas-account.repl:38:3:Trace: ["c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I"]\ngas-account.repl:39:0:Trace: Commit Tx 3: Load gas station module\nLoad successful\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"verify-the-gas-station-account",children:"Verify the gas station account"}),"\n",(0,c.jsxs)(n.p,{children:['In the previous output, the "Write succeeded" message indicates that you have successfully created the principal account for the gas station to use.\nYou can verify the account information by adding another transaction to the ',(0,c.jsx)(n.code,{children:"gas-account.repl"})," file that calls the ",(0,c.jsx)(n.code,{children:"coin.details"})," function with the account name for the capability-guarded gas station account."]}),"\n",(0,c.jsx)(n.p,{children:"To verify the gas account:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file in your code editor."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add a transaction similar to the following after loading the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(begin-tx "Verify account")\n   (coin.details free.test-gas.GAS_ACCOUNT)\n(commit-tx)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Execute the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"pact gas-account.repl --trace\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should see that the transaction completes with output similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'...\ngas-account.repl:37:3:Trace: Loading 01-gas-account.pact...\ngas-account.pact:1:0:Trace: Namespace set to free\ngas-account.pact:3:0:Trace: Loaded module free.test-gas, hash q1bMc2SzjAJrbhUyZJ5t4u8Zktvi9H_xOZqsxZljTA4\ngas-account.pact:28:0:Trace: ["Write succeeded"]\ngas-account.repl:38:3:Trace: ["c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I"]\ngas-account.repl:39:0:Trace: Commit Tx 3: Load gas station module\ngas-account.repl:41:0:Trace: Begin Tx 4: Verify account\ngas-account.repl:42:3:Trace: {"account": "c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I","balance": 0.0,"guard": CapabilityGuard {name: free.test-gas.ALLOW_GAS,args: [],pactId: }}\ngas-account.repl:43:0:Trace: Commit Tx 4: Verify account\nLoad successful\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"scope-to-specific-transactions",children:"Scope to specific transactions"}),"\n",(0,c.jsx)(n.p,{children:"Now that you have a capability-guarded gas station account that can be used to pay transaction fees, you can further scope it to only pay for specific transactions or only when specific conditions are met.\nFor example, you might want enforce an upper limit for transaction fees to help ensure that funds in a gas station account aren't drained too quickly."}),"\n",(0,c.jsx)(n.p,{children:"The following example illustrates how to enforce specific conditions for the use the gas station account.\nIn this example, the gas station administrator can use the gas station account for any transaction.\nOther users can only use the gas station account to pay transaction fees if the gas price is less than a specified price."}),"\n",(0,c.jsx)(n.p,{children:"To enforce specific conditions for transactions using the gas station account:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file in the code editor."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add the ",(0,c.jsx)(n.code,{children:"enforce-one"})," function to the ",(0,c.jsx)(n.code,{children:"GAS_PAYER"})," capability to specify two conditions:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'  (enforce-one\n    "Allow the administrator to use the gas station account for any transaction."\n    [\n      (enforce-guard  "free.dev-account" )\n      (enforce (<= 0.00000001 (at \'gas-price (chain-data)))\n        "Gas price must be less than 0.00000001"\n      )\n    ]\n  )\n'})}),"\n",(0,c.jsxs)(n.p,{children:["In this example, the ",(0,c.jsx)(n.code,{children:"enforce-guard"})," function allows the owner of the ",(0,c.jsx)(n.code,{children:"free.dev-account"})," keyset to the use the gas station account to pay for any transaction.\nFor all other transactions and users, the gas price must be less the specified 0.00000001."]}),"\n",(0,c.jsx)(n.p,{children:"You can use a similar approach to limit access to gas station funds based on other conditions.\nFor example, you can set a limit for transaction fees using a function to get the current gas price instead of using a hard-coded value.\nYou can also create conditions that prevent the gas station account from being used to submit continuation requests, that exclude specific module or function calls, or that set time boundaries for paying transaction fees."}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"display-account-details",children:"Display account details"}),"\n",(0,c.jsx)(n.p,{children:"Before deploying the gas station smart contract, add a function to display the account details when the contract is deployed.\nYou'll need this information to transfer funds to the new account on the network and chain where you deploy the contract."}),"\n",(0,c.jsx)(n.p,{children:"To add a function that displays the account information:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file in the code editor."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add the ",(0,c.jsx)(n.code,{children:"display"})," function to call the ",(0,c.jsx)(n.code,{children:"coin.details"})," function for the ",(0,c.jsx)(n.code,{children:"GAS_ACCOUNT"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"(defun display:object ()\n  (coin.details free.test-gas.GAS_ACCOUNT)\n)\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Add a call to the ",(0,c.jsx)(n.code,{children:"display"})," function to the end of the smart contract:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(if (read-msg "init")\n  [(init)]\n  ["Not creating the gas station account"]\n)\n\n(free.test-gas.display)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file in the code editor and add a test for the display function."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'(begin-tx "Test account display")\n   (free.test-gas.display)\n(commit-tx)\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Execute the ",(0,c.jsx)(n.code,{children:"gas-account.repl"})," file:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:"pact gas-account.repl --trace\n"})}),"\n",(0,c.jsx)(n.p,{children:"You should see that the transaction completes with output similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'...\ngas-account.repl:45:0:Trace: Begin Tx 5: Test account display\ngas-account.repl:46:3:Trace: {"account": "c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I","balance": 0.0,"guard": CapabilityGuard {name: free.test-gas.ALLOW_GAS,args: [],pactId: }}\ngas-account.repl:47:0:Trace: Commit Tx 5: Test account display\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"deploy-the-contract",children:"Deploy the contract"}),"\n",(0,c.jsx)(n.p,{children:"After you've updated and tested the module, you can deploy it on a chain on your local development network or the Kadena test network."}),"\n",(0,c.jsxs)(n.p,{children:["For this example, the contract is deployed in the ",(0,c.jsx)(n.code,{children:"free"})," namespace using an administrative account that has funds on chain 3 in the development network.\nTo deploy in the ",(0,c.jsx)(n.code,{children:"free"})," namespace, the module name and keyset name must be unique across all of the modules that exist in the ",(0,c.jsx)(n.code,{children:"free"})," namespace."]}),"\n",(0,c.jsx)(n.h3,{id:"prepare-to-deploy",children:"Prepare to deploy"}),"\n",(0,c.jsx)(n.p,{children:"To prepare to deploy the gas station module on the development network:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"The development network is currently running on your local computer."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["You have at least one ",(0,c.jsx)(n.strong,{children:"account"})," with ",(0,c.jsx)(n.strong,{children:"funds"})," on at least one ",(0,c.jsx)(n.strong,{children:"chain"})," in the development network."]}),"\n",(0,c.jsx)(n.p,{children:"If you don't have keys and at least one account on any chain on the network, you need to generate keys, create an account, and fund the account on at least one chain before continuing."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"You have the public key for the account on the chain where you have funds."}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"create-a-deployment-transaction",children:"Create a deployment transaction"}),"\n",(0,c.jsxs)(n.p,{children:["You can deploy the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," module on the local development network using a transaction template."]}),"\n",(0,c.jsx)(n.p,{children:"To deploy the module:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Create a new transaction template named ",(0,c.jsx)(n.code,{children:"deploy-contract.ktpl"})," in the ",(0,c.jsx)(n.code,{children:"~/.kadena/transaction-templates"})," folder."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sh",children:"cd ~/.kadena/transaction-templates\ntouch deploy-contract.ktpl\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Open the ",(0,c.jsx)(n.code,{children:"deploy-contract.ktpl"})," file in a code editor and create a reusable transaction request in YAML format similar to the following to specify the path to the ",(0,c.jsx)(n.code,{children:"gas-account.pact"})," file that contains your Pact module code."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-pact",children:'codeFile: "{{path-to-pact-code}}"\ndata:\n  admin-keyset:\n    keys: ["{{public-key}}"]\n    pred: "keys-all"\n  init: true\nmeta:\n  chainId: "{{chain-id}}"\n  sender: "{{{sender-account}}}"\n  gasLimit: 80300\n  gasPrice: 0.000001\n  ttl: 600\nsigners:\n  - public: "{{public-key}}"\n    caps: []\nnetworkId: "{{network-id}}"\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Create a transaction that uses the template by running the ",(0,c.jsx)(n.code,{children:"kadena tx add"})," command and following the prompts displayed."]}),"\n",(0,c.jsx)(n.p,{children:"For example:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sh",children:"? Which template do you want to use: deploy-contract.ktpl\n? File path of data to use for template .json or .yaml (optional):\n? Template value path-to-pact-code: ../../gas-account.pact\n? Template value public-key: 58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\n? Template value chain-id: 3\n? Template value sender-account: k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\n? Template value network-id: development\n? Where do you want to save the output: GasStationAccount\n"})}),"\n",(0,c.jsxs)(n.p,{children:["In this example, the unsigned transaction is saved in a ",(0,c.jsx)(n.code,{children:"GasStationAccount.json"})," file."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Sign the transaction by running the ",(0,c.jsx)(n.code,{children:"kadena tx sign"})," command and following the prompts displayed to sign with a wallet account or a public and secret key pair."]}),"\n",(0,c.jsx)(n.p,{children:"For example:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sh",children:"? Select an action: Sign with wallet\n? Select a transaction file: Transaction: GasStationAccount.json\n? 1 wallets found containing the keys for signing this transaction, please select a wallet to sign this transaction with first: Wallet: chainweaver-web-legacy\n? Enter the wallet password: ********\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Send the transaction by running the ",(0,c.jsx)(n.code,{children:"kadena tx send"})," command and following the prompts displayed."]}),"\n",(0,c.jsx)(n.p,{children:"After the transaction is complete, you should see the account created in the transaction results.\nFor example:"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Gas station account",src:a(82739).A+"",width:"1726",height:"124"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"fund-the-gas-station-account",children:"Fund the gas station account"}),"\n",(0,c.jsxs)(n.p,{children:["Now that you have created and deployed the gas station account, you're ready to fund the account to pay transaction fees.\nYou can use the ",(0,c.jsx)(n.code,{children:"kadena tx"})," commands to create, sign, and send a transfer transaction to the development network."]}),"\n",(0,c.jsx)(n.p,{children:"To fund the gas station account:"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Verify the development network is currently running on your local computer."}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Create a new unsigned transaction using the ",(0,c.jsx)(n.code,{children:"kadena tx add"})," command and the ",(0,c.jsx)(n.code,{children:"transfer.ktpl"})," template and follow the prompts displayed to select the sender, receiver, and amount to transfer."]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["For the ",(0,c.jsx)(n.code,{children:"account:from"})," template value, specify the administrative account that is providing funds to the gas station account.\nIn this example, it's the Chainweaver wallet account ",(0,c.jsx)(n.code,{children:"k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c"}),"."]}),"\n",(0,c.jsxs)(n.li,{children:["For the ",(0,c.jsx)(n.code,{children:"account:to"})," template value, specify the gas station principal account that you created with the capability guard.\nIn this example, it's the principal account ",(0,c.jsx)(n.code,{children:"c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I"}),"."]}),"\n",(0,c.jsxs)(n.li,{children:["For the ",(0,c.jsx)(n.code,{children:"decimal:amount"})," template value, specify the number of coins to transfer as a decimal value.\nIn this example, the transfer amount is ",(0,c.jsx)(n.code,{children:"2.0"}),"."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"For example, the prompts and output for creating the transaction look similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'\u279c  ~ kadena tx add\n? Which template do you want to use: transfer.ktpl\n? File path of data to use for template .json or .yaml (optional):\n? Select account alias for template value account:from: k-58705e        \n> Using account name k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\n? Select account alias for template value account:to: Enter account manually\n? Manual entry for account for template value account:to: c:J1yaCWrdEbhKekMRhF5WjOgvzUayxTD24q7UWHwaa9I\n? Template value decimal:amount: 2.0\n? Template value chain-id: 3\n? Template key "key:from" matches account "account:from". Use public account\'s key? Account public key: \n58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\n? Select network id for template value networkId: development\n? Where do you want to save the output: fund-gas\n'})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Sign the unsigned transaction using the ",(0,c.jsx)(n.code,{children:"kadena tx sign"})," command and the transaction file name generated by the ",(0,c.jsx)(n.code,{children:"kadena tx add"})," command."]}),"\n",(0,c.jsx)(n.p,{children:"For example, the prompts and output for the transaction look similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"\u279c  ~ kadena tx sign\n? Select an action: Sign with wallet\n? Select a transaction file: Transaction: fund-gas.json\n? 1 wallets found containing the keys for signing this transaction, please \nselect a wallet to sign this transaction with first: Wallet: chainweaver-web-legacy\n? Enter the wallet password: ********\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Send the signed transaction using the ",(0,c.jsx)(n.code,{children:"kadena tx send"})," command and the signed transaction file name generated by the ",(0,c.jsx)(n.code,{children:"kadena tx sign"})," command."]}),"\n",(0,c.jsx)(n.p,{children:"For example, the prompts and output for the transaction look similar to the following:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"\u279c  ~ kadena tx send\n? Select a transaction file: Transaction: transaction-6DWOi5enSt-signed.json\n\u280b Sending transactions...\n\nTransaction detail for command with hash: 6DWOi5enStLe6WjaUOMJfv-RTm3TSrfe_0m1IAH4yac\nNetwork ID  Chain ID\ndevelopment 3       \n\n\n\u2714 Completed\nTransaction: 6DWOi5enStLe6WjaUOMJfv-RTm3TSrfe_0m1IAH4yac submitted with request key: 6DWOi5enStLe6WjaUOMJfv-RTm3TSrfe_0m1IAH4yac\n"})}),"\n",(0,c.jsx)(n.p,{children:"After the transaction is completed, you can check the results in the block explorer using the request key."}),"\n",(0,c.jsx)(n.p,{children:"For example, you can open the local block explorer for the development network to view recent transactions:"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Explore recent transactions",src:a(72069).A+"",width:"2267",height:"392"})}),"\n",(0,c.jsx)(n.p,{children:"You can click the link matching the transaction request key to see the details about the funding transaction:"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"Fund gas account transaction details",src:a(58376).A+"",width:"2288",height:"1526"})}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"review",children:"Review"}),"\n",(0,c.jsx)(n.p,{children:"This project demonstrated how to create a capability-guarded principal account to hold funds.\nThis account can be used to pay for transactions on behalf of other users.\nThe project also provided a simple example for restricting the use of the gas station account based on a specific condition.\nIn this example project, the gas station module was deployed on the development network and chain 3 with funds from a Chainweaver wallet account."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},82739:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/gas-station-account-33a3f9c929991ce13caf9b44c89f5e0f.jpg"},58376:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/fund-gas-2fcf8ea21487b9456000d70f323780f5.jpg"},72069:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/gas-tx-f2707646c100f2721fb338bddbf56b5f.jpg"},28453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var t=a(96540);const c={},s=t.createContext(c);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);