"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[4508],{58413:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"api/service-api/get-block-header-branch","title":"Get branch block headers","description":"Provides reference information for the chainweb-node block header endpoints.","source":"@site/docs/api/service-api/get-block-header-branch.md","sourceDirName":"api/service-api","slug":"/api/service-api/get-block-header-branch","permalink":"/docs/api/service-api/get-block-header-branch","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/api/service-api/get-block-header-branch.md","tags":[{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"node api","permalink":"/docs/tags/node-api"},{"inline":true,"label":"chainweb api","permalink":"/docs/tags/chainweb-api"},{"inline":true,"label":"api reference","permalink":"/docs/tags/api-reference"},{"inline":true,"label":"block header","permalink":"/docs/tags/block-header"}],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Get branch block headers","description":"Provides reference information for the chainweb-node block header endpoints.","id":"get-block-header-branch","sidebar_position":3,"tags":["chainweb","node api","chainweb api","api reference","block header"]},"sidebar":"default","previous":{"title":"Get a block header by hash","permalink":"/docs/api/service-api/get-block-header-by-hash"},"next":{"title":"Stream block header events","permalink":"/docs/api/service-api/api-update-event-stream"}}');var t=r(74848),i=r(28453);const a={title:"Get branch block headers",description:"Provides reference information for the chainweb-node block header endpoints.",id:"get-block-header-branch",sidebar_position:3,tags:["chainweb","node api","chainweb api","api reference","block header"]},c="Get branch block headers",h={},d=[{value:"Request format",id:"request-format",level:2},{value:"Path parameters",id:"path-parameters",level:3},{value:"Query parameters",id:"query-parameters",level:3},{value:"Request schema",id:"request-schema",level:3},{value:"Responses",id:"responses",level:2},{value:"Response headers",id:"response-headers",level:3},{value:"Successful response schemas",id:"successful-response-schemas",level:3},{value:"Examples",id:"examples",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"get-branch-block-headers",children:"Get branch block headers"})}),"\n",(0,t.jsxs)(n.p,{children:["You can request only blocks that are included in the canonical branch of the chain by using the ",(0,t.jsx)(n.code,{children:"/header/branch"})," endpoint.\nThe ",(0,t.jsx)(n.code,{children:"/header/branch"})," endpoint returns blocks in descending order starting from the leafs of branches of the blockchain."]}),"\n",(0,t.jsx)(n.p,{children:"Block headers are returned in three different formats depending on the content type specified in the Accept header of the request:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"application/json"})," returns block headers in as a base64Url-encoded strings without padding."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"application/json;blockheader-encoding=object"})," returns block headers as JSON-encoded objects."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"application/octet-stream"})," returns block headers as binary data if supported by the endpoint."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that this endpoint uses the ",(0,t.jsx)(n.code,{children:"POST"})," method so you can specify lower and upper bounds for retrieving blocks in the request body."]}),"\n",(0,t.jsx)(n.h2,{id:"request-format",children:"Request format"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"POST http://{baseURL}/chain/{chain}/header/branch"})," to return a page of block headers from branches of the block chain in ",(0,t.jsx)(n.strong,{children:"descending"})," order.\nOnly blocks that are ancestors of the same block in the set of upper bounds and are not ancestors of any block in the set of lower bounds are returned."]}),"\n",(0,t.jsx)(n.h3,{id:"path-parameters",children:"Path parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"chain\xa0(required)"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsxs)(n.td,{children:["Specifies the chain identifier of the chain you want to send the request to. Valid values are 0 to 19. For example, to get block headers for the first chain (0), the request is ",(0,t.jsx)(n.code,{children:"POST http://{baseURL}/chain/0/header/branch"}),"."]})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"query-parameters",children:"Query parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"limit"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsxs)(n.td,{children:["Specifies the maximum number of records that should be returned. The actual number of records might be lower. For example: ",(0,t.jsx)(n.code,{children:"limit=3"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"next"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Specifies the cursor to retrieve the next page of results. This value can be found as the value of the next property of the previous page. For example: ",(0,t.jsx)(n.code,{children:'"inclusive:qgsxD1G5m8dGZ4W9nMKBotU2I10ilURkRIE3_UKHlLM"'}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"minheight"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsxs)(n.td,{children:["Specifies the minimum block height for the returned headers. For example: ",(0,t.jsx)(n.code,{children:"minheight=4471908"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"maxheight"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsxs)(n.td,{children:["Specifies the maximum block height for the returned headers. For example: ",(0,t.jsx)(n.code,{children:"maxheight=4953816"}),"."]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"request-schema",children:"Request schema"}),"\n",(0,t.jsx)(n.p,{children:"These parameters specify the upper and lower bounds for the queried branches."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lower"}),(0,t.jsx)(n.td,{children:"Array\xa0of\xa0strings"}),(0,t.jsxs)(n.td,{children:["Specifies the lower bound block header hash for the query. No block headers are returned that are predecessors of any block with a hash from this array. The block hash consists of 43 characters from the ",(0,t.jsx)(n.code,{children:"a-zA-Z0-9_-"})," character set."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"upper"}),(0,t.jsx)(n.td,{children:"Array of strings"}),(0,t.jsxs)(n.td,{children:["Specifies the upper bound block header for the query. All block hashes returned are predecessors of a block with a hash from this array. The block hash consists of 43 characters from the ",(0,t.jsx)(n.code,{children:"a-zA-Z0-9_-"})," character set."]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"The following examples illustrate the results to expect based on setting the lower and upper bound parameters."}),"\n",(0,t.jsx)(n.p,{children:"To return all ancestors of one block:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "lower": [],\n  "upper": [\n    "QxGCAz5AY1Y41nh1yWtgqhKhZ9pPiPRagFdIKNqBH74"\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"For example, to return all of the ancestors of a block that are not ancestors of another block, you might specify bounds similar to the following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "lower": [\n    "RClyuyZAacwvPpmLXKbTwrIRXWeUSjiNhJVP2esH8KM"\n  ],\n  "upper": [\n    "QxGCAz5AY1Y41nh1yWtgqhKhZ9pPiPRagFdIKNqBH74"\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"responses",children:"Responses"}),"\n",(0,t.jsxs)(n.p,{children:["Requests to ",(0,t.jsx)(n.code,{children:"http://{baseURL}/chain/{chain}/header/branch"})," return the following response codes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"200 OK"})," indicates that the request succeeded and returns the block headers matching the specified criteria as base64Url-encoded or JSON-encoded."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"400 Bad Request"})," indicates that the branch bounds were exceeded."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"404 Not Found"})," indicates that the block header indicated by a required parameter was not found."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"406 Not Acceptable"})," indicates that the value of the Accept header is not supported."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"response-headers",children:"Response headers"}),"\n",(0,t.jsx)(n.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"x-peer-addr"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,t.jsx)(n.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"x-server\u2011timestamp"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsxs)(n.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,t.jsx)(n.code,{children:"1618597601"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,t.jsx)(n.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"successful-response-schemas",children:"Successful response schemas"}),"\n",(0,t.jsx)(n.p,{children:"The format of the information returned in the response depends on the content type specified in the Accept header of the request."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"items\xa0(required)"}),(0,t.jsx)(n.td,{children:"Array\xa0of\xa0block\xa0headers"}),(0,t.jsxs)(n.td,{children:["Returns an array of block headers as base64Url-encoded strings (",(0,t.jsx)(n.code,{children:"application/json"}),"), JSON-encoded objects (",(0,t.jsx)(n.code,{children:"application/json;blockheader-encoding=object"}),"), or a binary data stream (",(0,t.jsx)(n.code,{children:"application/octet-stream"}),", if supported)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"limit\xa0(required)"}),(0,t.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,t.jsx)(n.td,{children:"Specifies the number of items in the page. This number can be smaller but never be larger than the number of requested items."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"next (required)"}),(0,t.jsx)(n.td,{children:"string\xa0or\xa0null"}),(0,t.jsxs)(n.td,{children:["Returns a cursor that can be used in a follow up request to query the next page. It should be used literally as the value for the ",(0,t.jsx)(n.code,{children:"next"})," parameter in the follow-up request. It can be specified as inclusive or exclusive."]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:"You can send a request to the Kadena main network\u2014mainnet01\u2014and chain 4 with a limit of three items per request and a minimum block height of 4953300 by calling the service endpoint like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Postman",children:"POST http://api.chainweb.com/chainweb/0.0/mainnet01/chain/4/header/branch?limit=3&minheight=4953300\n"})}),"\n",(0,t.jsxs)(n.p,{children:["With the Accept header set to ",(0,t.jsx)(n.code,{children:"application/json"}),", this request returns the block headers as a base64Url-encoded strings without padding:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "limit": 3,\n    "items": [\n        "AAAAAAAAAACHrEs-Th0GAIPjfG2bsp6NK5D8iWUoRUM1OQ3p9q3stapX5Zybos80AwAJAAAAGXv0fxVXgDQTtRTxMjWfr6JXXrSscoaCaxEDPC93QIgOAAAAVosxlCQP8q0cPi3zd_yD_099Untb69bnIgIFlAioj9ITAAAAYlpdztdOQ-ChRklldcC2oHbZlAMIiYAGRgzTZBXvRgaKSm6dcl7l1vKo1o0wOE5aEG0l4ulUQ1YVAAAAAAAAAG1aryT2lPfDS6jwjJmgctr-u158xYunNRIujS2Y2VbyBAAAABWoQdQYrsb9AUkBAAAAAAAAAAAAAAAAAAAAAAAAAAAA2JZLAAAAAAAFAAAAcRDzfU0dBgDGFmKDSkZ45LbBZMajR8v1m3Zww07plf9jBYzEE8ia82_PvnTt5I4z",\n        "AAAAAAAAAAA_lIk6Th0GAKw2xvazH-9PUpO1fCT45HbD8uU5Nsu51AAI0uD75S98AwAJAAAAptV1M_F1lYvTgMuC8g17ltHfA3SPsypQtiPWT8CTOW8OAAAAd_4KONk9zhF-yXHzShOookNJq9wV67K7jKxcZjcTtVETAAAAqp2F3-wGndQygNovYEYmrCygvvagdZRqHCi8Rml3C_qKSm6dcl7l1vKo1o0wOE5aEG0l4ulUQ1YVAAAAAAAAAJ1YNbk1mDHy9fXRpWr5RtcQNyMdcV6Wrc7l1yeb14WvBAAAAN80jMLyM8fxAUkBAAAAAAAAAAAAAAAAAAAAAAAAAAAA15ZLAAAAAAAFAAAAcRDzfU0dBgD-CxOF2XaGNoPjfG2bsp6NK5D8iWUoRUM1OQ3p9q3stapX5Zybos80",\n        "AAAAAAAAAAAu1Hc3Th0GANsQ9KLq4IMMIXs1kWe-AeOqxJtuuLxO3iruSl3AmktlAwAJAAAAMmRRH-P_WCcG8UNu-NS4iWCmT4Godwm0ScV7MJXxNuUOAAAAH6HdmZhFzniidoeZTFUa4CKnMa-5e0INX8vhvhezAPcTAAAA82lUdaVunS05mRdpWeSSb0vixsVpYISDRLX0BE2lySeKSm6dcl7l1vKo1o0wOE5aEG0l4ulUQ1YVAAAAAAAAAAHTXM_ZAusmXzCBgSx7u8opHkC8kkNCDX7KS8ywVI60BAAAAKnB1rDMucflAUkBAAAAAAAAAAAAAAAAAAAAAAAAAAAA1pZLAAAAAAAFAAAAcRDzfU0dBgBxACkcRTx3HKw2xvazH-9PUpO1fCT45HbD8uU5Nsu51AAI0uD75S98"\n    ],\n    "next": "inclusive:2xD0ourggwwhezWRZ74B46rEm264vE7eKu5KXcCaS2U"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["With the Accept header set to ",(0,t.jsx)(n.code,{children:"application/json;blockheader-encoding=object"}),", the request returns the block headers as JSON-encoded objects like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "limit": 3,\n    "items": [\n        {\n            "nonce": "16462985723698616006",\n            "creationTime": 1721071750065287,\n            "parent": "g-N8bZuyno0rkPyJZShFQzU5Den2rey1qlflnJuizzQ",\n            "adjacents": {\n                "19": "YlpdztdOQ-ChRklldcC2oHbZlAMIiYAGRgzTZBXvRgY",\n                "14": "VosxlCQP8q0cPi3zd_yD_099Untb69bnIgIFlAioj9I",\n                "9": "GXv0fxVXgDQTtRTxMjWfr6JXXrSscoaCaxEDPC93QIg"\n            },\n            "target": "ikpunXJe5dbyqNaNMDhOWhBtJeLpVENWFQAAAAAAAAA",\n            "payloadHash": "bVqvJPaU98NLqPCMmaBy2v67XnzFi6c1Ei6NLZjZVvI",\n            "chainId": 4,\n            "weight": "FahB1Biuxv0BSQEAAAAAAAAAAAAAAAAAAAAAAAAAAAA",\n            "height": 4953816,\n            "chainwebVersion": "mainnet01",\n            "epochStart": 1721068523032689,\n            "featureFlags": 0,\n            "hash": "tsFkxqNHy_WbdnDDTumV_2MFjMQTyJrzb8--dO3kjjM"\n        },\n        {\n            "nonce": "3928958401539935230",\n            "creationTime": 1721071687013439,\n            "parent": "rDbG9rMf709Sk7V8JPjkdsPy5Tk2y7nUAAjS4PvlL3w",\n            "adjacents": {\n                "19": "qp2F3-wGndQygNovYEYmrCygvvagdZRqHCi8Rml3C_o",\n                "14": "d_4KONk9zhF-yXHzShOookNJq9wV67K7jKxcZjcTtVE",\n                "9": "ptV1M_F1lYvTgMuC8g17ltHfA3SPsypQtiPWT8CTOW8"\n            },\n            "target": "ikpunXJe5dbyqNaNMDhOWhBtJeLpVENWFQAAAAAAAAA",\n            "payloadHash": "nVg1uTWYMfL19dGlavlG1xA3Ix1xXpatzuXXJ5vXha8",\n            "chainId": 4,\n            "weight": "3zSMwvIzx_EBSQEAAAAAAAAAAAAAAAAAAAAAAAAAAAA",\n            "height": 4953815,\n            "chainwebVersion": "mainnet01",\n            "epochStart": 1721068523032689,\n            "featureFlags": 0,\n            "hash": "g-N8bZuyno0rkPyJZShFQzU5Den2rey1qlflnJuizzQ"\n        },\n        {\n            "nonce": "2051174422813409393",\n            "creationTime": 1721071635518510,\n            "parent": "2xD0ourggwwhezWRZ74B46rEm264vE7eKu5KXcCaS2U",\n            "adjacents": {\n                "19": "82lUdaVunS05mRdpWeSSb0vixsVpYISDRLX0BE2lySc",\n                "14": "H6HdmZhFzniidoeZTFUa4CKnMa-5e0INX8vhvhezAPc",\n                "9": "MmRRH-P_WCcG8UNu-NS4iWCmT4Godwm0ScV7MJXxNuU"\n            },\n            "target": "ikpunXJe5dbyqNaNMDhOWhBtJeLpVENWFQAAAAAAAAA",\n            "payloadHash": "AdNcz9kC6yZfMIGBLHu7yikeQLySQ0INfspLzLBUjrQ",\n            "chainId": 4,\n            "weight": "qcHWsMy5x-UBSQEAAAAAAAAAAAAAAAAAAAAAAAAAAAA",\n            "height": 4953814,\n            "chainwebVersion": "mainnet01",\n            "epochStart": 1721068523032689,\n            "featureFlags": 0,\n            "hash": "rDbG9rMf709Sk7V8JPjkdsPy5Tk2y7nUAAjS4PvlL3w"\n        }\n    ],\n    "next": "inclusive:2xD0ourggwwhezWRZ74B46rEm264vE7eKu5KXcCaS2U"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["If you set the Accept header to ",(0,t.jsx)(n.code,{children:"application/octet-stream"})," and the content type is supported, the request returns a binary representation of the block header.\nIf the content type isn't support, the reguest fails with a ",(0,t.jsx)(n.strong,{children:"406 Not Acceptable"})," response code."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var s=r(96540);const t={},i=s.createContext(t);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);