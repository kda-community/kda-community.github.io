"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[4671],{52099:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"guides/transactions/howto-namespace-tx","title":"Define principal namespaces","description":"How to define a principal namespace using a transaction template and the Kadena CLI.","source":"@site/docs/guides/transactions/define-namespace.md","sourceDirName":"guides/transactions","slug":"/guides/transactions/howto-namespace-tx","permalink":"/docs/guides/transactions/howto-namespace-tx","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/transactions/define-namespace.md","tags":[],"version":"current","frontMatter":{"title":"Define principal namespaces","description":"How to define a principal namespace using a transaction template and the Kadena CLI.","id":"howto-namespace-tx"},"sidebar":"default","previous":{"title":"Check transaction status","permalink":"/docs/guides/transactions/howto-check-tx-status"},"next":{"title":"Transfer funds safely","permalink":"/docs/guides/transactions/howto-safe-transfers"}}');var s=a(74848),i=a(28453);const c={title:"Define principal namespaces",description:"How to define a principal namespace using a transaction template and the Kadena CLI.",id:"howto-namespace-tx"},d="Define principal namespaces",r={},o=[{value:"Create a transaction request",id:"create-a-transaction-request",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"define-principal-namespaces",children:"Define principal namespaces"})}),"\n",(0,s.jsxs)(n.p,{children:["As discussed in",(0,s.jsx)(n.a,{href:"/smart-contracts/basic-concepts",children:" Basic concepts"}),", Kadena namespaces provide a static prefix and a secure boundary for all of the contracts, modules, functions, and keyset definitions that you control.\nWhen you are building, testing, and deploying smart contracts on your local development network, you can work directly in the root namespace without defining this boundary.\nFor local development, your work is isolated from others because your blockchain\u2014and any smart contracts you deploy\u2014run exclusively on your local computer."]}),"\n",(0,s.jsx)(n.p,{children:"However, if you want to deploy a smart contract on a public blockchain network, like the Kadena test network or main production network, the contract must have a unique name that distinguishes your Pact module from all the others.\nIf you try to deploy a Pact module with a name that's already being used on the network where you are trying to deploy, the deployment will fail with an error and you'll pay a transaction fee for the failed attempt."}),"\n",(0,s.jsx)(n.p,{children:"To prevent name collisions on the same network, Kadena allows you to define your own unique namespace on the blockchain.\nThe namespace segregates your work\u2014your smart contracts, keyset definitions, and Pact modules\u2014from applications and modules created and deployed by others.\nWithin your namespace, you can control who has access to which features and who can update the namespace with changes.\nAs long as the namespace has a unique name, everything you define inside of that namespace is automatically unique, too."}),"\n",(0,s.jsxs)(n.p,{children:["To ensure every namespace has a unique name, Kadena provides a built-in ",(0,s.jsx)(n.code,{children:"ns"})," module on the main, test, and development networks.\nYou can use the ",(0,s.jsx)(n.code,{children:"ns"})," module to create a uniquely-named and cryptographically-secure ",(0,s.jsx)(n.strong,{children:"principal namespace"})," on any Kadena network."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ns"})," module includes a ",(0,s.jsx)(n.code,{children:"create-principal-namespace"})," function specifically for this purpose.\nThe ",(0,s.jsx)(n.code,{children:"create-principal-namespace"})," function enables you to create a namespace using the prefix ",(0,s.jsx)(n.code,{children:"n_"})," followed by the hash of a keyset.\nThis naming convention ensures that your principal namespace won't conflict with any other namespaces defined in the same network."]}),"\n",(0,s.jsx)(n.p,{children:"The following example demonstrates how to define a principal namespace in your development environment by using the Kadena CLI and a transaction template."}),"\n",(0,s.jsx)(n.h2,{id:"create-a-transaction-request",children:"Create a transaction request"}),"\n",(0,s.jsx)(n.p,{children:"To define a principal namespace:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Open the code editor on your computer and create a new transaction template (",(0,s.jsx)(n.code,{children:".ktpl"}),") file in the ",(0,s.jsx)(n.code,{children:"~/.kadena/transaction-templates"})," folder."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, create a ",(0,s.jsx)(n.code,{children:"namespace.ktpl"})," file in the ",(0,s.jsx)(n.code,{children:"~/.kadena/transaction-templates"})," folder."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a transaction request that executes the ",(0,s.jsx)(n.a,{href:"/pact-5/general/define-namespace",children:(0,s.jsx)(n.code,{children:"define-namespace"})})," function using the output of the ",(0,s.jsx)(n.code,{children:"create-principal-namespace"})," function from the namespace (",(0,s.jsx)(n.code,{children:"ns"}),") module in the YAML API request format."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"define-namespace"})," function takes three arguments:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Argument"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"namespace"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Specifies the name used to register your namespace."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"user-guard"})}),(0,s.jsx)(n.td,{children:"guard"}),(0,s.jsx)(n.td,{children:"Specifies who can use the namespace."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin-guard"})}),(0,s.jsx)(n.td,{children:"guard"}),(0,s.jsx)(n.td,{children:"Specifies the owner and administrator who controls the namespace."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["In the following example, a single keyset\u2014the ",(0,s.jsx)(n.code,{children:"dev-account"})," keyset\u2014is used for all three arguments like this:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["As input in the ",(0,s.jsx)(n.code,{children:'(ns.create-principal-namespace (read-keyset "dev-account"))'})," expression to generate the principal namespace hash to be registered for the namespace."]}),"\n",(0,s.jsxs)(n.li,{children:["As input to define both the ",(0,s.jsx)(n.code,{children:"user-guard"})," and the ",(0,s.jsx)(n.code,{children:"admin-guard"})," arguments required to define the namespace on a specific network and chain."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In this example, the ",(0,s.jsx)(n.code,{children:"dev-account"})," keyset has one key and uses the ",(0,s.jsx)(n.code,{children:"keys-all"})," predicate to define a principal namespace based on the ",(0,s.jsx)(n.code,{children:"fe4b6da332193cce4d3bd1ebdc716a0e4c3954f265c5fddd6574518827f608b7"})," public key:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'code: |-\n  (define-namespace (ns.create-principal-namespace (read-keyset "dev-account")) (read-keyset "dev-account") (read-keyset "dev-account"))\n  \ndata:\n  dev-account:\n    keys: [fe4b6da332193cce4d3bd1ebdc716a0e4c3954f265c5fddd6574518827f608b7]\n    pred: "keys-all"\nmeta:\n  chainId: "3"\n  sender: "k:fe4b6da332193cce4d3bd1ebdc716a0e4c3954f265c5fddd6574518827f608b7"\n  gasLimit: 80300\n  gasPrice: 0.000001\n  ttl: 600\nsigners:\n  - public: "fe4b6da332193cce4d3bd1ebdc716a0e4c3954f265c5fddd6574518827f608b7"\n    caps:\n      - name: "coin.GAS"\n        args: []\nnetworkId: "development"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you want to define a principal namespace that requires any key from a mutli-signature account to sign transctions and uses separate keysets for the ",(0,s.jsx)(n.code,{children:"user-guard"})," and ",(0,s.jsx)(n.code,{children:"admin-guard"})," arguments, you can modify the ",(0,s.jsx)(n.code,{children:"define-namespace"})," function and the keyset data accordingly.\nFor example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'code: |-\n  (define-namespace (ns.create-principal-namespace (read-keyset "ns-admin")) (read-keyset "ns-user") (read-keyset "ns-admin"))\ndata:\n  ns-admin:\n    keys: ["{{public-key-1}}","{{public-key-2}}","{{public-key-3}}"]\n    pred: "keys-any"\n  ns-user:\n    keys: ["{{public-key-1}}"]\n    pred: "keys-all"\nmeta:\n  chainId: "{{chain-id}}"\n  sender: "{{sender-account}}"\n  gasLimit: 80300\n  gasPrice: 0.000001\n  ttl: 600\nsigners:\n  - public: "{{public-key-1}}"\n    caps:\n      - name: "coin.GAS"\n        args: []\nnetworkId: "{{network-id}}"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you create a reusable template with variables, you can provide values for the template variables interactively or in a data file.\nFor example, you can add the values to a data file named ",(0,s.jsx)(n.code,{children:"principal-namespace.yaml"})," with values similar to the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'public-key-1: "58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c"\npublic-key-2: "1d5a5e10eb15355422ad66b6c12167bdbb23b1e1ef674ea032175d220b242ed4"\npublic-key-3: "4fe7981d36997c2a327d0d3ce961d3ae0b2d38185ac5e5cd98ad90140bc284d0"\nchain-id: "4"\nsender-account: "w:5HKwn7J9IqSwYU5ETqrDh7EgK43VQwMI0AQ11se7SLM:keys-any"\nnetwork-id: "development"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a transaction that uses the template by running ",(0,s.jsx)(n.code,{children:"kadena tx add"})," and responding to the prompts interactively or using command-line options similar to the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'kadena tx add --template="namespace-multisig.ktpl" --template-data="principal-namespace.yaml" --out-file="multisig.json" \n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Sign the transaction by running ",(0,s.jsx)(n.code,{children:"kadena tx sign"})," and responding to the prompts interactively or using command-line options similar to the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'kadena tx sign --tx-sign-with="wallet" --tx-unsigned-transaction-files="multisig.json" --wallet-name="pistolas-wallet" \n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Send the transaction to the blockchain by running ",(0,s.jsx)(n.code,{children:"kadena tx send"})," and responding to the prompts interactively or using command-line options similar to the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'kadena tx send --tx-signed-transaction-files="transaction-39LtH3PjVf-signed.json" --tx-transaction-network="devnet" \n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Verify the transaction results in the block explorer:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Namespace definitiopn",src:a(48963).A+"",width:"2282",height:"1364"})}),"\n",(0,s.jsxs)(n.p,{children:["After you've defined a principal namespace on a specific network and chain, you can use the ",(0,s.jsx)(n.code,{children:"namespace"})," function in your modules to deploy and update the modules in that namespace."]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-pact",children:'(namespace "n_99a0c477edf4100bc22b65d679e5dbe6e2da4b70")\n(define-keyset "n_99a0c477edf4100bc22b65d679e5dbe6e2da4b70.owner" (read-keyset "owner"))\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},48963:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/tx-namespace-3141abf98d48980d0cdbad0269e1acd0.jpg"},28453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>d});var t=a(96540);const s={},i=t.createContext(s);function c(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);