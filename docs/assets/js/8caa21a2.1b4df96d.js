"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[7588],{91630:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"pact-5/general/enforce","title":"enforce","description":"Use enforce to test whether a pure expression evaluates to true or false.","source":"@site/docs/pact-5/general/enforce.md","sourceDirName":"pact-5/general","slug":"/pact-5/general/enforce","permalink":"/docs/pact-5/general/enforce","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/pact-5/general/enforce.md","tags":[],"version":"current","frontMatter":{},"sidebar":"default","previous":{"title":"enforce-verifier","permalink":"/docs/pact-5/general/enforce-verifier"},"next":{"title":"enumerate","permalink":"/docs/pact-5/general/enumerate"}}');var r=n(74848),a=n(28453);const c={},i="enforce",o={},l=[{value:"Basic syntax",id:"basic-syntax",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Return value",id:"return-value",level:2},{value:"Examples",id:"examples",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"enforce",children:"enforce"})}),"\n",(0,r.jsxs)(s.p,{children:["Use ",(0,r.jsx)(s.code,{children:"enforce"})," to test whether a pure ",(0,r.jsx)(s.code,{children:"expression"})," evaluates to true or false.\nIf the specified ",(0,r.jsx)(s.code,{children:"expression"})," evaluates to true, the function returns true.\nIf the specified ",(0,r.jsx)(s.code,{children:"expression"})," evaluates to false, the function fails the transaction and displays the specified error ",(0,r.jsx)(s.code,{children:"message"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Prior to Pact 5.3, ",(0,r.jsx)(s.code,{children:"enforce"})," restricted access to tables so that only system-level operations could access database tables and expressions that attempted to read user data would fail with an error. Beginning with Pact 5.3, the ",(0,r.jsx)(s.code,{children:"expression"})," that is evaluated with the ",(0,r.jsx)(s.code,{children:"enforce"})," statement can access the Pact database to read data.\nThe ",(0,r.jsx)(s.code,{children:"expression"})," can't modify any data in tables.\nIf an expression attempts to modify data, the operation fails with an error."]}),"\n",(0,r.jsx)(s.h2,{id:"basic-syntax",children:"Basic syntax"}),"\n",(0,r.jsx)(s.p,{children:"To fail a transaction with a specified error message if an expression evaluates to false, use the following syntax:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-pact",children:"(enforce expression message)\n"})}),"\n",(0,r.jsx)(s.h2,{id:"arguments",children:"Arguments"}),"\n",(0,r.jsxs)(s.p,{children:["Use the following arguments to specify the test expression and error message for the ",(0,r.jsx)(s.code,{children:"enforce"})," Pact function:"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Argument"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"expression"}),(0,r.jsx)(s.td,{children:"bool"}),(0,r.jsx)(s.td,{children:"Specifies the expression to evaluate."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"message"})}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Specifies the error message to display if the ",(0,r.jsx)(s.code,{children:"expression"})," evaluates as false."]})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"return-value",children:"Return value"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"enforce"})," function returns ",(0,r.jsx)(s.code,{children:"true"})," if the specified ",(0,r.jsx)(s.code,{children:"expression"})," is true.\nIf the ",(0,r.jsx)(s.code,{children:"expression"})," is false, the function fails the transaction with the specified error message."]}),"\n",(0,r.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(s.p,{children:["The following example demonstrates how to use the ",(0,r.jsx)(s.code,{children:"enforce"})," function to evaluate the expression ",(0,r.jsx)(s.code,{children:"(+ 2 2) = 4"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-pact",children:'pact> (enforce (= (+ 2 2) 4) "All is well")\ntrue\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Because the specified expression (",(0,r.jsx)(s.code,{children:"2 + 2 = 4"}),") is true, the function returns true and the transaction continues."]}),"\n",(0,r.jsxs)(s.p,{children:["The following example demonstrates how to use the ",(0,r.jsx)(s.code,{children:"enforce"})," function to evaluate the expression ",(0,r.jsx)(s.code,{children:"(2 + 2) != 4"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-pact",children:'pact> (enforce (!= (+ 2 2) 4) "The expression is false")\nThe expression is false\n at <interactive>:0:0: (enforce (native `!=`  True if X does not equal Y.  Type: x... "The expression is false"))\n'})}),"\n",(0,r.jsx)(s.p,{children:"Because the expression is false, the transaction fails with the error message specified."}),"\n",(0,r.jsxs)(s.p,{children:["The following example demonstrates evaluating an expression that requires read access to a database table.\nIn this example, the ",(0,r.jsx)(s.code,{children:"enforce"})," function retrieves ",(0,r.jsx)(s.code,{children:"details"})," for a particular ",(0,r.jsx)(s.code,{children:"account"})," variable in a table to determine if the account is unlocked:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-pact",children:"(enforce (at \u2018unlocked (details account)) \u201caccount is locked\u201d)\n"})})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>i});var t=n(96540);const r={},a=t.createContext(r);function c(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);