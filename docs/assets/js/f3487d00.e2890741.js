"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[571],{33416:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"pact-5/repl/test-capability","title":"test-capability","description":"Use test-capability to acquire or install the capability specified.","source":"@site/docs/pact-5/repl/test-capability.md","sourceDirName":"pact-5/repl","slug":"/pact-5/repl/test-capability","permalink":"/docs/pact-5/repl/test-capability","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/pact-5/repl/test-capability.md","tags":[],"version":"current","frontMatter":{},"sidebar":"default","previous":{"title":"sig-keyset","permalink":"/docs/pact-5/repl/sig-keyset"},"next":{"title":"typecheck","permalink":"/docs/pact-5/repl/typecheck"}}');var i=a(74848),c=a(28453);const s={},r="test-capability",l={},d=[{value:"Basic syntax",id:"basic-syntax",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Return value",id:"return-value",level:2},{value:"Example",id:"example",level:2}];function o(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"test-capability",children:"test-capability"})}),"\n",(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"test-capability"})," to acquire or install the ",(0,i.jsx)(t.code,{children:"capability"})," specified.\nYou can use this function to acquire any capability that's not managed or to install any managed capability.\nThe specified capability and any composed capabilities it encompasses are in scope for the rest of the transaction."]}),"\n",(0,i.jsx)(t.h2,{id:"basic-syntax",children:"Basic syntax"}),"\n",(0,i.jsxs)(t.p,{children:["To acquire or install the ",(0,i.jsx)(t.code,{children:"capability"})," specified, use the following syntax:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-pact",children:"(test-capability (capability))\n"})}),"\n",(0,i.jsx)(t.h2,{id:"arguments",children:"Arguments"}),"\n",(0,i.jsxs)(t.p,{children:["Use the following argument when using the ",(0,i.jsx)(t.code,{children:"test-capabilities"})," Pact function."]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Argument"}),(0,i.jsx)(t.th,{children:"Type"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"capability"})}),(0,i.jsx)(t.td,{children:"capability-token"}),(0,i.jsx)(t.td,{children:"Specifies the capability and scope to test."})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"return-value",children:"Return value"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"test-capability"})," function returns a string that indicates whether the capability has been installed or acquired."]}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(t.p,{children:["The following example demonstrates how to use ",(0,i.jsx)(t.code,{children:"test-capability"})," to acquire a capability for the scope of a REPL transaction:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-pact",children:'pact> (module m g (defcap g () true))\n"Loaded module m, hash c5kiBbxH0zDIMPpAlJdXwMNsNiwnZY4YRzkJvvagn1c"\npact> (test-capability (g))\n"Capability acquired"\n'})}),"\n",(0,i.jsx)(t.p,{children:"In this example, the capability isn't a managed capability and doesn't require any arguments.\nManaged capabilities define a resource that the capability controls access to and a management function that modifies the resource.\nFor example, you might define a managed capability and management function similar to the following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-pact",children:'   (defcap PAY (sender:string receiver:string amount:decimal)\n     @managed amount manage-PAY\n     (compose-capability (USER_GUARD sender)))\n \n   (defun manage-PAY (mgd recd)\n     (let ((bal:decimal (- mgd recd)))\n       (enforce (>= bal 0.0) "insufficient balance")\n       bal))\n \n   (defun pay (sender:string receiver:string amount:decimal)\n     (with-capability (PAY sender receiver amount) (transfer sender receiver amount))\n   )\n'})}),"\n",(0,i.jsxs)(t.p,{children:["For this example, the ",(0,i.jsx)(t.code,{children:"PAY"})," managed capability requires the ",(0,i.jsx)(t.code,{children:"sender"}),", ",(0,i.jsx)(t.code,{children:"receiver"}),", and ",(0,i.jsx)(t.code,{children:"amount"})," arguments:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-pact",children:'(begin-tx "Set capability")\n   (test-capability (cap-role.PAY "Alice" "Bob" 3.0))\n(commit-tx)\n'})})]})}function p(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>r});var n=a(96540);const i={},c=n.createContext(i);function s(e){const t=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(c.Provider,{value:t},e.children)}}}]);