"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[5758],{5615:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api/peer-to-peer/publish-cut","title":"Publish the current state","description":"Use the POST /cut endpoint to publish the cut height for a Chainweb node.","source":"@site/docs/api/peer-to-peer/publish-cut.md","sourceDirName":"api/peer-to-peer","slug":"/api/peer-to-peer/publish-cut","permalink":"/docs/api/peer-to-peer/publish-cut","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/api/peer-to-peer/publish-cut.md","tags":[{"inline":true,"label":"chainweb","permalink":"/docs/tags/chainweb"},{"inline":true,"label":"node api","permalink":"/docs/tags/node-api"},{"inline":true,"label":"chainweb api","permalink":"/docs/tags/chainweb-api"},{"inline":true,"label":"api reference","permalink":"/docs/tags/api-reference"},{"inline":true,"label":"block height cut","permalink":"/docs/tags/block-height-cut"}],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Publish the current state","description":"Use the POST /cut endpoint to publish the cut height for a Chainweb node.","id":"publish-cut","sidebar_position":3,"tags":["chainweb","node api","chainweb api","api reference","block height cut"]},"sidebar":"default","previous":{"title":"Query the current state","permalink":"/docs/api/peer-to-peer/get-cut"},"next":{"title":"Get payload","permalink":"/docs/api/peer-to-peer/get-payload"}}');var i=t(74848),h=t(28453);const r={title:"Publish the current state",description:"Use the POST /cut endpoint to publish the cut height for a Chainweb node.",id:"publish-cut",sidebar_position:3,tags:["chainweb","node api","chainweb api","api reference","block height cut"]},c="Publish the current state",o={},a=[{value:"Request format",id:"request-format",level:2},{value:"Responses",id:"responses",level:2},{value:"Response header",id:"response-header",level:3},{value:"Examples",id:"examples",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,h.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"publish-the-current-state",children:"Publish the current state"})}),"\n",(0,i.jsxs)(n.p,{children:["In the Kadena network, a ",(0,i.jsx)(n.strong,{children:"cut height"})," represents the distributed state from a Chainweb node.\nEach cut height\u2014much like a database snapshot or a block height\u2014references one block header for each chain, compared with concurrent blocks on other chains."]}),"\n",(0,i.jsx)(n.p,{children:"Two blocks from two different chains are considered concurrent if either block is an adjacent parent and a direct dependency of the other or if the blocks do not depend at all on each other."}),"\n",(0,i.jsx)(n.h2,{id:"request-format",children:"Request format"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"PUT https://{baseURL}/cut"})," to publish a cut to a Chainweb node.\nThe cut must contain an ",(0,i.jsx)(n.code,{children:"origin"})," property that is not null.\nThe receiving node will first try to obtain all missing dependencies from the node specified for the ",(0,i.jsx)(n.code,{children:"origin"})," property before searching for the dependencies in the peer-to-peer network."]}),"\n",(0,i.jsxs)(n.p,{children:["Use the following parameters to specify a ",(0,i.jsx)(n.code,{children:"cut"})," with an ",(0,i.jsx)(n.code,{children:"origin"})," property that is not null."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"origin (required)"}),(0,i.jsx)(n.td,{children:"object"}),(0,i.jsxs)(n.td,{children:["Describes a peer information object that consists of an ",(0,i.jsx)(n.code,{children:"id"})," string and an ",(0,i.jsx)(n.code,{children:"address"})," object for a Chainweb node. The ",(0,i.jsx)(n.code,{children:"origin"})," parameter is required to use the ",(0,i.jsx)(n.code,{children:"PUT /cut"})," endpoint. For more information, see the ",(0,i.jsx)(n.a,{href:"/api/data-models#peer-information-model",children:"Peer information"})," data model."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"height\xa0(required)"}),(0,i.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,i.jsx)(n.td,{children:"Specifies the cut height to publish. The cut height is the sum of the height for all of the blocks included in the cut. You should avoid using this value because its semantics may change in the future."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"weight\xa0(required)"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Specifies the cut weight. The cut weight is the sum of the weights from all of the blocks included in the cut. The weight string consists of 43 characters from the [",(0,i.jsx)(n.code,{children:"a-zA-Z0-9_-"}),"] character set."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"hashes\xa0(required)"}),(0,i.jsx)(n.td,{children:"object"}),(0,i.jsx)(n.td,{children:"Specifies an object that maps chain identifiers 0-19 to their respective block hash and block height for the cut."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"instance"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Specifies the network identifier for the cut."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"id"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Specifies a cut identifier. The id string consists of 43 characters from the [",(0,i.jsx)(n.code,{children:"a-zA-Z0-9_-"}),"] character set."]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"responses",children:"Responses"}),"\n",(0,i.jsxs)(n.p,{children:["Requests to ",(0,i.jsx)(n.code,{children:"PUT https://{baseURL}/cut"})," return the following response codes:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"204 No Content"})," indicates that the request was successful and the cut was added to the cut processing pipeline on the remote Chainweb node."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"401 Unauthorized"})," indicates that the node where you are trying to publish the cut is not a peer of the node identified in the ",(0,i.jsx)(n.code,{children:"origin"})," property, and therefore cannot process the cut you're attempting to publish."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"response-header",children:"Response header"}),"\n",(0,i.jsx)(n.p,{children:"The response header parameters are the same for all successful and unsuccessful Chainweb node requests."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"x-peer-addr"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Specifies the host address and port number of the client as observed by the remote Chainweb node. The host address can be a domain name or an IP address in IPv4 or IPv6 format. For example: ",(0,i.jsx)(n.code,{children:'"10.36.1.3:42988"'}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"x-server\u2011timestamp"}),(0,i.jsx)(n.td,{children:"integer\xa0>=\xa00"}),(0,i.jsxs)(n.td,{children:["Specifies the clock time of the remote Chainweb node using the UNIX epoch timestamp. For example: ",(0,i.jsx)(n.code,{children:"1618597601"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"x\u2011chainweb\u2011node\u2011version"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Specifies the version of the remote Chainweb node. For example: ",(0,i.jsx)(n.code,{children:'"2.23"'}),"."]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["You can send a request to publish a cut on a node with a call to the ",(0,i.jsx)(n.code,{children:"/cut"})," endpoint similar to the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Postman",children:"PUT https://sfchainweb.example.com/chainweb/0.0/testnet04/cut\n"})}),"\n",(0,i.jsx)(n.p,{children:"The request body for publishing a cut contains parameters similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n   "origin": {\n      "address": {\n        "hostname": "85.238.99.91",\n        "port": 30004\n        },\n      "id": "PRLmVUcc9AH3fyfMYiWeC4nV2i1iHwc0-aM7iAO8h18"\n    },\n    "height": 30798466,\n    "weight": "b0wYplmNiTBXCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",\n    "hashes": {\n      "0": {\n        "height": 1539923,\n        "hash": "qEaSmWt_tDcJC9AGbgWY9x12LW5VED7hGgfyz9x_S3w"\n      },\n      "1": {\n        "height": 1539923,\n        "hash": "TJuC6nfhamfD517gspAZmqD9umR71nAgttDOi1JbBHw"\n      },\n      "2": {\n        "height": 1539924,\n        "hash": "4ineCWfnO1rneWuBMLPzqTl2HF_sZpypT_3TEzf3VLc"\n      },\n      "3": {\n        "height": 1539924,\n        "hash": "ZEOMXB2ByqzL2HfYVKIZKAnoe4wIeJ2SaltnXDir59k"\n      },\n      "4": {\n        "height": 1539923,\n        "hash": "0g0rOoSznVW2BJDBmK0Lbxz22F-sxTZUNIrUs_Q8Ye4"\n      },\n      "5": {\n        "height": 1539923,\n        "hash": "5y_TL-clnF_wELMBKyJk0Sz8RVShw_bGQETJdrMkADA"\n      },\n      "6": {\n        "height": 1539923,\n        "hash": "YkQKv6P4_C4jRM3RqKK9FWPxIneeLzlkKQS9ATAQYRk"\n      },\n      "7": {\n        "height": 1539923,\n        "hash": "j_hJ9iiH_ATyeQeeRN3auGXjbBWiFgnTU0dYPIz8cKM"\n      },\n      "8": {\n        "height": 1539924,\n        "hash": "s7c3B55VbDsS6EJ-nc9S5k2kNbPOBGI8xxF3vUg4d4Q"\n      },\n      "9": {\n        "height": 1539922,\n        "hash": "bowQf63xSY9owHKhK1yGee2Q0Fn8yL_oCLaEUn-CGoA"\n      },\n      "10": {\n        "height": 1539924,\n        "hash": "uP-pHW4QKrV9fN1mlDGwKuaiIDlJW7xYSj1nW53EHM4"\n      },\n      "11": {\n        "height": 1539924,\n        "hash": "TIhegjZ0GEC73T4m0BVuFtfLNGuS56IUWEuf93AJ5UU"\n      },\n      "12": {\n        "height": 1539923,\n        "hash": "-j1qcAS9Fs-WQmc3WEhzZ96VojxnlIA2TFpfyIv31Zs"\n      },\n      "13": {\n        "height": 1539923,\n        "hash": "S-4TqMgWGlK1k33XRlU9w0Lfwr0RvkO5Jn78Au1OglM"\n      },\n      "14": {\n        "height": 1539923,\n        "hash": "xSuULf--S4TrgYNz82deaGhnPLWrg3pXkynGeUPUGwA"\n      },\n      "15": {\n        "height": 1539923,\n        "hash": "jsc9rugvcHXDiBAuoO9_j8R_b_jchtJJ8b5596i8wVg"\n      },\n      "16": {\n        "height": 1539923,\n        "hash": "qs1aEY8kSxfUBb_JRVswv5dYINRXBjGJteC-6RC1hjc"\n      },\n      "17": {\n        "height": 1539924,\n        "hash": "xzVBXaQxzlUfUrakDgppUubQBRXGh-Uy0HBdMNwCq_Y"\n      },\n      "18": {\n        "height": 1539924,\n        "hash": "4VOHPAqwioySYRycdl5MxfscQHwtlwwCAt7AySYQT98"\n      },\n      "19": {\n        "height": 1539923,\n        "hash": "1PrRg20XyQ_2cfgGOgNK9K-cqIJ1vO8-A-RJlfN5m00"\n      }\n    },\n    "id": "BBz7KeurYTeQ0hMGbwUbQC84cRbVcacoDQTye-3qkXI",\n    "instance": "mainnet01"\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If the request is successful, you'll see the ",(0,i.jsx)(n.strong,{children:"204 No Content"})," response returned."]})]})}function l(e={}){const{wrapper:n}={...(0,h.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(96540);const i={},h=s.createContext(i);function r(e){const n=s.useContext(h);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(h.Provider,{value:n},e.children)}}}]);