"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[7315],{46481:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"guides/troubleshooting","title":"Troubleshooting tips","description":"Tips for troubleshooting common issues when connecting to Chainweb nodes or calling Kadena API endpoints.","source":"@site/docs/guides/troubleshooting-tips.md","sourceDirName":"guides","slug":"/guides/troubleshooting","permalink":"/docs/guides/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/troubleshooting-tips.md","tags":[],"version":"current","frontMatter":{"title":"Troubleshooting tips","description":"Tips for troubleshooting common issues when connecting to Chainweb nodes or calling Kadena API endpoints.","id":"troubleshooting","toc_min_heading_level":2,"toc_max_heading_level":3},"sidebar":"default","previous":{"title":"Develop with @kadena/client","permalink":"/docs/guides/kadena-client-quickstart"},"next":{"title":"Kadena REST API","permalink":"/docs/api/"}}');var i=t(74848),s=t(28453);const a={title:"Troubleshooting tips",description:"Tips for troubleshooting common issues when connecting to Chainweb nodes or calling Kadena API endpoints.",id:"troubleshooting",toc_min_heading_level:2,toc_max_heading_level:3},r="Troubleshooting tips",c={},d=[{value:"Common API issues",id:"common-api-issues",level:2},{value:"Network and chain identifiers",id:"network-and-chain-identifiers",level:3},{value:"Transaction formatting",id:"transaction-formatting",level:3},{value:"Gas management",id:"gas-management",level:3},{value:"Nonce handling",id:"nonce-handling",level:3},{value:"Error handling",id:"error-handling",level:3},{value:"Security",id:"security",level:3},{value:"Common Pact contract issues",id:"common-pact-contract-issues",level:2},{value:"Contract-specific errors",id:"contract-specific-errors",level:3},{value:"Not enough input parsing error",id:"not-enough-input-parsing-error",level:3},{value:"Error: Keyset failure ...",id:"error-keyset-failure-",level:3},{value:"Capability not in scope",id:"capability-not-in-scope",level:3},{value:"Common Chainweb node issues",id:"common-chainweb-node-issues",level:2},{value:"Out of date binaries",id:"out-of-date-binaries",level:3},{value:"Timeout exceptions",id:"timeout-exceptions",level:3},{value:"Something went wrong exceptions",id:"something-went-wrong-exceptions",level:3},{value:"Network communication issues",id:"network-communication-issues",level:3},{value:"Network configuration issues",id:"network-configuration-issues",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"troubleshooting-tips",children:"Troubleshooting tips"})}),"\n",(0,i.jsx)(n.p,{children:"If you encounter errors, warnings, or Bad Request failures when you attempt to connect to a Chainweb nodes or call Kadena API endpoints, you should check for the following common issues and potential solutions."}),"\n",(0,i.jsx)(n.h2,{id:"common-api-issues",children:"Common API issues"}),"\n",(0,i.jsx)(n.p,{children:"It can be challenging to call REST API endpoints manually from the command-line because of all of the information you must include in the URL to reach a node that can respond to your request.\nThe following are the most common causes of potential issues when you have problems calling Kadena API endpoints."}),"\n",(0,i.jsx)(n.h3,{id:"network-and-chain-identifiers",children:"Network and chain identifiers"}),"\n",(0,i.jsxs)(n.p,{children:["You should verify that you are using the correct network identifier and chain in the call.\nMost API endpoints require you to specify the network identifier, such as ",(0,i.jsx)(n.code,{children:"testnet04"})," or ",(0,i.jsx)(n.code,{children:"mainnet01"}),", and a specific chain identifier in the request.\nIf you specify testnet or mainnet or the wrong chain identifier, you'll receive a Bad Request or empty response instead of the information you expect.\nIf you're submitting or checking the status of a transaction, be sure you've specified the correct chain identifier, and, if applicable, that there are sufficient funds to pay transaction fees on the network and chain you specify."]}),"\n",(0,i.jsx)(n.h3,{id:"transaction-formatting",children:"Transaction formatting"}),"\n",(0,i.jsx)(n.p,{children:"If you are using YAML files to format your transaction requests and encounter errors, check the YAML file for formatting or field name errors.\nThere are slight differences in the fields expected and how they are defined in the YAML file depending on whether you are sending a signed transaction request with a public and secret key, an unsigned transaction request with a public key, or using a transaction template and the Kadena CLI to submit the transaction.\nFor more information about transaction formatting, see the following topics:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/smart-contracts/transactions",children:"Transaction format and flow"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/transactions/howto-construct-tx",children:"Construct transactions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guides/transactions/howto-sign-submit-tx",children:"Sign and submit transactions"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"gas-management",children:"Gas management"}),"\n",(0,i.jsx)(n.p,{children:"Although default values for the gas limit and gas price might be appropriate for most situations, you should always check the settings and adjust them when necessary.\nFor example, if you're deploying a complex contract, you might need to set a higher gas limit or gas price to ensure your transaction is processed."}),"\n",(0,i.jsx)(n.h3,{id:"nonce-handling",children:"Nonce handling"}),"\n",(0,i.jsx)(n.p,{children:"The nonce setting is optional in YAML request files and defaults to the transaction creation time, if not set.\nHowever, it's a best practice to include a unique nonce to prevent duplicate transactions."}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsx)(n.p,{children:"If you don't get the results you expect from an API request, you should always check the response for any additional information about the errors encountered."}),"\n",(0,i.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,i.jsx)(n.p,{children:"If an API request fails, you should check the keys you used to sign the transaction request and verify you are using the correct keys and accounts for the network and chain you connect to.\nMost Chainweb service API requests don't require a secure (HTTPS) connection.\nHowever, private keys are used to sign requests, so in most cases you should use a secure connection when calling API endpoints."}),"\n",(0,i.jsxs)(n.p,{children:["For more information about calling specific endpoints and their parameters, see the ",(0,i.jsx)(n.a,{href:"/api",children:"API documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"common-pact-contract-issues",children:"Common Pact contract issues"}),"\n",(0,i.jsx)(n.p,{children:"In most cases, Pact error messages provide the information you need to resolve coding issues such as invalid syntax or formatting errors.\nHowever, there a few common errors that can be more difficult to diagnose and resolve.\nThe following are the most common errors that you might encounter when executing functions defined in Pact contracts."}),"\n",(0,i.jsx)(n.h3,{id:"contract-specific-errors",children:"Contract-specific errors"}),"\n",(0,i.jsxs)(n.p,{children:["If you see an error message that isn't a Pact interpreter error, you should copy the message and search in the smart contract you are executing for a matching message.\nIt's likely that the function definition includes an ",(0,i.jsx)(n.code,{children:"enforce"})," statement that contains the message and the error indicates that you haven't met all of the conditions that the ",(0,i.jsx)(n.code,{children:"enforce"})," statement defines."]}),"\n",(0,i.jsx)(n.h3,{id:"not-enough-input-parsing-error",children:"Not enough input parsing error"}),"\n",(0,i.jsx)(n.p,{children:"One of the most common Pact parsing errors you might see is a signing error that's similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'Error in $.signers[0].clist[0].name: ".": not enough input\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This error typically indicates that you've forgotten to add the namespace of a capability that you tried to sign for.\nEven contracts that are deployed in the root namespace must include at least the module name before the capability name.\nFor example, the capabilities defined in the ",(0,i.jsx)(n.code,{children:"coin"})," contract require you to specify the ",(0,i.jsx)(n.code,{children:"coin"})," module name before the capability name, such that to acquire the ",(0,i.jsx)(n.code,{children:"TRANSFER"})," capability, you must sign for the ",(0,i.jsx)(n.code,{children:"coin.TRANSFER"})," capability."]}),"\n",(0,i.jsxs)(n.p,{children:["For most contracts, you must sign for capabilities using a registered namespace, like ",(0,i.jsx)(n.code,{children:"free"})," or ",(0,i.jsx)(n.code,{children:"user"})," or a principal namespace like ",(0,i.jsx)(n.code,{children:"n_eef68e581f767dd66c4d4c39ed922be944ede505"}),", and the module name before the capability name.\nFor example, if you define the ",(0,i.jsx)(n.code,{children:"VOTER_REG"})," capability in a ",(0,i.jsx)(n.code,{children:"vote-mgr"})," module and deploy the module in the ",(0,i.jsx)(n.code,{children:"free"})," namespace, you would sign for the ",(0,i.jsx)(n.code,{children:"free.vote-mrg.VOTER_REG"})," capability."]}),"\n",(0,i.jsx)(n.h3,{id:"error-keyset-failure-",children:"Error: Keyset failure ..."}),"\n",(0,i.jsx)(n.p,{children:"If you see a keyset failure, you should check for the following issues:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check whether you have signed the transaction using the required keyset."}),"\n",(0,i.jsx)(n.li,{children:"Check that you've met the conditions that are specified inb the keyset predicate.\nFor example, if a keyset requires more that one key to sign the message, be sure you have signed with the required number of keys."}),"\n",(0,i.jsxs)(n.li,{children:["Check that you have signed for all required capabilities.\nFor example, if you have signed to a acquire a capability, check whether the function requires you to sign for additional capabilities by reviewing the ",(0,i.jsx)(n.code,{children:"with-capability"})," statements to be sure that all capabilities are in scope."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"capability-not-in-scope",children:"Capability not in scope"}),"\n",(0,i.jsx)(n.p,{children:"If you attempt to access an account or row that is guarded by a capability defined outside of the scope of a function, executing the function might fail because the capability is not in scope.\nIn this case, you might need to execute a different function that brings the capability into scope for the function you intended to execute."}),"\n",(0,i.jsx)(n.h2,{id:"common-chainweb-node-issues",children:"Common Chainweb node issues"}),"\n",(0,i.jsx)(n.p,{children:"The most common issues you might encounter if you're a node operator or attempting to connect to a remote node are problems with peer synchronization, network interruptions, or node unavailability."}),"\n",(0,i.jsx)(n.p,{children:"The following are the most common causes of potential issues when you have problems connecting to Chainweb nodes."}),"\n",(0,i.jsx)(n.h3,{id:"out-of-date-binaries",children:"Out of date binaries"}),"\n",(0,i.jsxs)(n.p,{children:["Peer synchronization failures are often caused by nodes with out of date binaries or dependencies.\nFor example, if a node attempts to synchronize with an outdate version of the ",(0,i.jsx)(n.code,{children:"librocksdb"})," library, peer synchronization will fail.\nTo address this issue, you should make that any node you control is up to date with the most recent official release of the ",(0,i.jsx)(n.code,{children:"chainweb-node"})," binary."]}),"\n",(0,i.jsx)(n.h3,{id:"timeout-exceptions",children:"Timeout exceptions"}),"\n",(0,i.jsxs)(n.p,{children:["If a synchronizing node fails to provide timely feedback to the network, other nodes will receive a timeout exception warning.\nGenerally, the warning can be ignored and nodes can synch to alternative nodes.\nThese exceptions can be fixed by issuing a ",(0,i.jsx)(n.code,{children:"ConnectionTimeout"})," statement."]}),"\n",(0,i.jsx)(n.h3,{id:"something-went-wrong-exceptions",children:"Something went wrong exceptions"}),"\n",(0,i.jsxs)(n.p,{children:['A "Something went wrong" error signals an internal server error due to misconfiguration.\nIf you see this error, you should regenerate your current configuration file and post a message on the Kadena Discord server ',(0,i.jsx)(n.a,{href:"https://discord.com/channels/502858632178958377/1051827506279370802",children:"#infrastructure"})," channel to make sure your node is configured correctly."]}),"\n",(0,i.jsx)(n.p,{children:"To regenerate the configuration:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./chainweb-node --print-config > config.yaml\n"})}),"\n",(0,i.jsx)(n.h3,{id:"network-communication-issues",children:"Network communication issues"}),"\n",(0,i.jsxs)(n.p,{children:["Every Chainweb node maintains a list of peers.\nYou can connect to the ",(0,i.jsx)(n.code,{children:"/cut/peer"})," endpoint on any node to discover its list of peers.\nFor example, to see a list of peers for a bootstrap node, you can run a command similar to the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -sk "https://us-e2.chainweb.com/chainweb/0.0/mainnet01/cut/peer" | python -m json.tool | grep hostname\n'})}),"\n",(0,i.jsx)(n.p,{children:"The command returns information about peer nodes similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'    "hostname": "46.38.245.213",\n    "hostname": "fr1.chainweb.com",\n    "hostname": "95.214.55.90",\n    "hostname": "api.kda.kaddex.xyz",\n    "hostname": "us-w3.chainweb.com",\n    "hostname": "195.201.194.100",\n    "hostname": "89.58.13.15",\n    "hostname": "37.221.196.102",\n    "hostname": "3.75.157.154",\n    "hostname": "node.kadena.fun",\n    "hostname": "cw.hyperioncn.net",\n    "hostname": "195.201.194.100",\n    "hostname": "fr2.chainweb.com",\n    "hostname": "212.25.52.40",\n'})}),"\n",(0,i.jsx)(n.h3,{id:"network-configuration-issues",children:"Network configuration issues"}),"\n",(0,i.jsx)(n.p,{children:"If you do not have incoming and outgoing ports configured correctly on your router, network traffic might be blocked, preventing access to the node, or the node might be offline.\nTo see is a node is accessible, you can try pinging the node with a command similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ping -c 3 <node ip>\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can also try sending a request to the /health-check endpoint for a node:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -k https://<node-ip>:443/health-check\n"})}),"\n",(0,i.jsx)(n.p,{children:"A healthy node should return the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Health check OK.\n"})}),"\n",(0,i.jsx)(n.p,{children:"If a node is down, try connecting to a different node."})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const i={},s=o.createContext(i);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);