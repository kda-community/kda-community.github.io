"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[9335],{65968:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"guides/accounts/howto-fund-accounts","title":"Fund on-chain accounts","description":"How to create a new Kadena account by transferring digital assets into it using the coin contract function, Kadena CLI, and Kadena client library.","source":"@site/docs/guides/accounts/fund-accounts.md","sourceDirName":"guides/accounts","slug":"/guides/accounts/howto-fund-accounts","permalink":"/docs/guides/accounts/howto-fund-accounts","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/accounts/fund-accounts.md","tags":[],"version":"current","frontMatter":{"title":"Fund on-chain accounts","description":"How to create a new Kadena account by transferring digital assets into it using the coin contract function, Kadena CLI, and Kadena client library.","id":"howto-fund-accounts"},"sidebar":"default","previous":{"title":"Create new accounts","permalink":"/docs/guides/accounts/howto-create-accounts"},"next":{"title":"Check account balances","permalink":"/docs/guides/accounts/howto-get-balances"}}');var t=a(74848),i=a(28453);a(56289),a(58069);const s={title:"Fund on-chain accounts",description:"How to create a new Kadena account by transferring digital assets into it using the coin contract function, Kadena CLI, and Kadena client library.",id:"howto-fund-accounts"},o="Fund on-chain accounts",r={},d=[{value:"Using a YAML request and curl",id:"using-a-yaml-request-and-curl",level:2},{value:"Using kadena-cli commands",id:"using-kadena-cli-commands",level:2},{value:"Using the Kadena client library",id:"using-the-kadena-client-library",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"fund-on-chain-accounts",children:"Fund on-chain accounts"})}),"\n",(0,t.jsxs)(e.p,{children:["The Kadena ",(0,t.jsx)(e.code,{children:"coin"})," contract provides two functions for funding an on-chain account:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"transfer-create"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"transfer"})}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["You can use the ",(0,t.jsx)(e.code,{children:"transfer-create"})," function to create and fund new accounts in a single step if you have access to funds and control a keyset with access to the funds.\nYou can use the ",(0,t.jsx)(e.code,{children:"transfer"})," function any time you want to transfer assets between existing accounts.\nThis guide provides instructions and examples for creating an on-chain account by transferring digital assets (KDA) into the account using an API call, Kadena CLI with YAML configuration, and the Kadena client TypeScript library."]}),"\n",(0,t.jsx)(e.h2,{id:"using-a-yaml-request-and-curl",children:"Using a YAML request and curl"}),"\n",(0,t.jsxs)(e.p,{children:["One way you can create and fund a new account is by calling the ",(0,t.jsx)(e.code,{children:"transfer-create"})," function that's defined in the ",(0,t.jsx)(e.code,{children:"coin"})," contract deployed on the Kadena development, test, and main network.\nTo make this call, you need to know the following information:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["The account name for a ",(0,t.jsx)(e.strong,{children:"funding account"})," with funds that you control."]}),"\n",(0,t.jsxs)(e.li,{children:["The ",(0,t.jsx)(e.strong,{children:"public key"})," for the ",(0,t.jsx)(e.strong,{children:"receiving account"})," you want to create."]}),"\n",(0,t.jsxs)(e.li,{children:["The guard for the ",(0,t.jsx)(e.strong,{children:"receiving account"})," and the amount to transfer."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["For this example, you can create the request using the YAML execution file format, convert the request to JSON, then submit the API request using a ",(0,t.jsx)(e.code,{children:"curl"})," command.\nYou could also submit the request using Postman or other tools that enable you to call API endpoints."]}),"\n",(0,t.jsx)(e.p,{children:"To create and fund a new account:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Open a terminal on your local computer."}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Check that you have ",(0,t.jsx)(e.code,{children:"curl"})," installed by running the following command:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"which curl\n"})}),"\n",(0,t.jsx)(e.p,{children:"You should see the path to the file similar to the following:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"/usr/bin/curl\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Create a YAML execution request in a ",(0,t.jsx)(e.code,{children:"fund-new-account.yaml"})," file with content similar to the following:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'code: |-\n  (coin.transfer-create "k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59" "9a23bf6a61f753d3ffa45c02b33c65b9dc80b8fb63857debcfe21fdb170fcd99"(read-keyset "receiver-guard") 1.0)\ndata:\n  receiver-guard:\n    keys: [9a23bf6a61f753d3ffa45c02b33c65b9dc80b8fb63857debcfe21fdb170fcd99]\n    pred: "keys-all"\nsigs:\n  - public: 3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\n    caps: []\nnetworkId: development\npublicMeta:\n    chainId: "3"\n    sender: "k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59"\n    gasLimit: 100000,\n    gasPrice: 0.0000001,\n    ttl: 7200,\ntype: exec\n'})}),"\n",(0,t.jsx)(e.p,{children:"As you can see in this example:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["The transaction request calls the ",(0,t.jsx)(e.code,{children:"coin.transfer-create"})," function."]}),"\n",(0,t.jsxs)(e.li,{children:["The funding account name is ",(0,t.jsx)(e.code,{children:"k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["The receiving account is ",(0,t.jsx)(e.code,{children:"9a23bf6a61f753d3ffa45c02b33c65b9dc80b8fb63857debcfe21fdb170fcd99"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["The network identifier is ",(0,t.jsx)(e.code,{children:"development"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["The chain identifier for the account balance is chain ",(0,t.jsx)(e.code,{children:"3"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["The ",(0,t.jsx)(e.code,{children:"gasLimit"}),", ",(0,t.jsx)(e.code,{children:"gasPrice"}),", and ",(0,t.jsx)(e.code,{children:"ttl"})," values represent reasonable settings."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Convert the YAML execution request to a JSON object with proper formatting using the ",(0,t.jsx)(e.code,{children:"pact --apireq"})," command with a command similar to the following:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"pact --apireq fund-new-account.yaml --local\n"})}),"\n",(0,t.jsx)(e.p,{children:"This command displays the resulting JSON as standard output.\nFor example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'{"hash":"ZVNycZjGYzovTKtIKuPxlGd6SvnzoqLTva7QDrdDcEw","sigs":[],"cmd":"{\\"networkId\\":\\"development\\",\\"payload\\":{\\"exec\\":{\\"data\\":{\\"dev-account\\":{\\"pred\\":\\"keys-all\\",\\"keys\\":[\\"3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\"]}},\\"code\\":\\"(coin.transfer-create \\\\\\"k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\\\\\" (read-keyset \\\\\\"dev-account\\\\\\"))\\"}},\\"signers\\":[],\\"meta\\":{\\"creationTime\\":1732575822,\\"ttl\\":7200,\\"gasLimit\\":100000,\\"chainId\\":\\"3\\",\\"gasPrice\\":1.0e-7,\\"sender\\":\\"k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\"},\\"nonce\\":\\"2024-11-25 23:03:42.968111 UTC\\"}"}\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Connect to the Pact ",(0,t.jsx)(e.code,{children:"/local"})," endpoint for the appropriate network with a command similar to the following:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'curl -X POST "localhost:8080/chainweb/0.0/development/chain/3/pact/api/v1/local" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"hash":"ZVNycZjGYzovTKtIKuPxlGd6SvnzoqLTva7QDrdDcEw","sigs":[],"cmd":"{\\"networkId\\":\\"development\\",\\"payload\\":{\\"exec\\":{\\"data\\":{\\"dev-account\\":{\\"pred\\":\\"keys-all\\",\\"keys\\":[\\"3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\"]}},\\"code\\":\\"(coin.transfer-create \\\\\\"k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\\\\\" (read-keyset \\\\\\"dev-account\\\\\\"))\\"}},\\"signers\\":[],\\"meta\\":{\\"creationTime\\":1732575822,\\"ttl\\":7200,\\"gasLimit\\":100000,\\"chainId\\":\\"3\\",\\"gasPrice\\":1.0e-7,\\"sender\\":\\"k:3e7e7db00e2e575a5260b8705ab7663574b186657451d6990316af6bc5108b59\\"},\\"nonce\\":\\"2024-11-25 23:03:42.968111 UTC\\"}"}\'\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["You can follow similar steps to fund an existing on-chain account using the ",(0,t.jsx)(e.code,{children:"transfer"})," function."]}),"\n",(0,t.jsx)(e.h2,{id:"using-kadena-cli-commands",children:"Using kadena-cli commands"}),"\n",(0,t.jsxs)(e.p,{children:["If you have installed the ",(0,t.jsx)(e.code,{children:"kadena-cli"})," package in your development environment, you can use the ",(0,t.jsx)(e.code,{children:"kadena account fund"})," command to fund an existing local or testnet account that you have previously added to the local development environment."]}),"\n",(0,t.jsxs)(e.p,{children:["To fund an on-chain account balance using ",(0,t.jsx)(e.code,{children:"kadena-cli"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Open a terminal on your local computer."}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:["Check that you have ",(0,t.jsx)(e.code,{children:"kadena"})," installed by running the following command:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:" which kadena\n"})}),"\n",(0,t.jsx)(e.p,{children:"You should see the path to the file similar to the following:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"/usr/local/bin/kadena\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Fund the account with interactive prompting by running the following command:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"kadena account fund\n"})}),"\n",(0,t.jsx)(e.p,{children:"Follow the prompts displayed to select an account alias, network, chain identifier, and amount."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"using-the-kadena-client-library",children:"Using the Kadena client library"}),"\n",(0,t.jsxs)(e.p,{children:["If you're familiar with JavaScript or TypeScript, you can use the ",(0,t.jsx)(e.code,{children:"@kadena/client"})," library to write scripts for common tasks.\nThe ",(0,t.jsx)(e.code,{children:"@kadena/client"})," library implements a TypeScript-based API for interacting with smart contracts and Chainweb nodes.\nThe library provides functions that simplify building transactions with Pact commands and connecting to blockchain nodes."]}),"\n",(0,t.jsxs)(e.p,{children:["You should note that creating the client connection is separate from using the ",(0,t.jsx)(e.code,{children:"Pact.builder"})," function to construct transactions."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"  import { Pact, createClient } from '@kadena/client';\n\n  const transferKDA = async (from, to, amount, pubKey) => {\n    const client = createClient('https://api.chainweb.com/chainweb/0.0/mainnet01/chain/1/pact');\n\n    const transaction = Pact.builder\n      .execution(`(coin.transfer \"${from}\" \"${to}\" ${amount})`)\n      .addSigner(pubKey, (signFor) => [\n        signFor('coin.TRANSFER', from, to, amount),\n        signFor('coin.GAS'),\n      ])\n      .setMeta({\n        chainId: '1',\n        gasLimit: 2500,\n        gasPrice: 0.000001,\n        sender: from,\n      })\n      .setNetworkId('mainnet01')\n      .createTransaction();\n\n    try {\n      const signedTx = await signWithChainweaver(transaction); // Pick your preferred signing method\n      const preflightResult = await client.preflight(signedTx);\n      console.log('Preflight result:', preflightResult);\n\n      if (preflightResult.result.status === 'failure') {\n        console.error('Preflight failed:', preflightResult.result.error.message);\n        return preflightResult;\n      }\n\n      const res = await client.submit(signedTx);\n      console.log('Transaction submitted:', res);\n      return res;\n    } catch (error) {\n      console.error('Error transferring KDA:', error);\n    }\n  };\ntransferKDA('your-from-account', 'your-to-account', 0.1).catch(console.error);\n"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}}}]);