"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[2780],{84595:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"reference/marmalade/token-standard-architecture","title":"Token standard architecture","description":"Build a non-fungible token (NFT) marketplace using the Marmalade token standard and Pact smart contracts.","source":"@site/docs/reference/marmalade/token-standard-architecture.md","sourceDirName":"reference/marmalade","slug":"/reference/marmalade/token-standard-architecture","permalink":"/docs/reference/marmalade/token-standard-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/reference/marmalade/token-standard-architecture.md","tags":[],"version":"current","frontMatter":{"title":"Token standard architecture","description":"Build a non-fungible token (NFT) marketplace using the Marmalade token standard and Pact smart contracts.","id":"token-standard-architecture","order":3,"layout":"full"}}');var r=t(74848),o=t(28453);const i={title:"Token standard architecture",description:"Build a non-fungible token (NFT) marketplace using the Marmalade token standard and Pact smart contracts.",id:"token-standard-architecture",order:3,layout:"full"},c="Token standard architecture",s={},l=[{value:"Core contracts",id:"core-contracts",level:2},{value:"Ledger contract",id:"ledger-contract",level:2},{value:"Policy manager",id:"policy-manager",level:2},{value:"Sales-specific contracts",id:"sales-specific-contracts",level:2},{value:"Policies",id:"policies",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"token-standard-architecture",children:"Token standard architecture"})}),"\n",(0,r.jsx)(n.p,{children:"Marmalade contracts define a poly-fungible token standard and token policy management for the Kadena blockchain.\nThese contracts provide interfaces for defining, minting, and managing digital items like non-fungible tokens and token collections using Pact smart contracts on the Kadena network."}),"\n",(0,r.jsx)(n.p,{children:"The Marmalade token standard architecture depends on several smart contracts that enable you to manage how tokens are minted, offered for sale, and transferred between accounts.\nThis multi-layered contract architecture simplifies how you create and manage tokens, define marketplace policies, and implement common token features."}),"\n",(0,r.jsx)(n.h2,{id:"core-contracts",children:"Core contracts"}),"\n",(0,r.jsx)(n.p,{children:"The Marmalade contract architecture provides separate contracts to handle specific tasks.\nFor example, there are separate contracts for managing policies applied to token and for managing auction rules for token sales.\nThis architecture ensures that functions are called in the correct order to complete multi-step transactions."}),"\n",(0,r.jsx)(n.p,{children:"At a high level, the Marmalade architecture consists of the following main contracts:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The Marmalade ",(0,r.jsx)(n.strong,{children:"ledger"})," (",(0,r.jsx)(n.code,{children:"marmalade-v2.ledger"}),") contract provides the core functionality of the marketplace with the ability to create, mint, burn, transfer, buy, and sell tokens."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The Marmalade ",(0,r.jsx)(n.strong,{children:"policy manager"})," (",(0,r.jsx)(n.code,{children:"marmalade-v2.policy-manager"}),") contract enables token creators to configure rules to control token properties and allowed operations."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Marmalade ",(0,r.jsx)(n.strong,{children:"sale"})," (",(0,r.jsx)(n.code,{children:"marmalade-v2.sale-contracts"}),") contracts enable tokens to be offered for sale using sales models that don't rely on a fixed price."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ledger-contract",children:"Ledger contract"}),"\n",(0,r.jsxs)(n.p,{children:["The Marmalade ledger contract\u2014",(0,r.jsx)(n.code,{children:"marmalade-v2.ledger"}),"\u2014is the primary contract that enables buyers and sellers use to interact with the marketplace.\nThis contract keeps track of important information for everyone participating in the marketplace and records every transaction that takes place involving tokens minted with Marmalade.\nThe ledger stores information about tokens, including the token metadata, the policies associated with the token, and the record of token ownership.\nThe main functions in the ledger contract are"]}),"\n",(0,r.jsxs)(n.p,{children:["The Marmalade Ledger plays a central role in enabling you to manage the lifecycle of non-fungible tokens and other digital assets.\nThe ledger contract provides the core functions\u2014such as ",(0,r.jsx)(n.code,{children:"create-token"}),", ",(0,r.jsx)(n.code,{children:"mint"}),", ",(0,r.jsx)(n.code,{children:"burn"}),", ",(0,r.jsx)(n.code,{children:"transfer"}),", and ",(0,r.jsx)(n.code,{children:"sale"}),"\u2014that are required to create, transfer, and track the ownership of tokens.\nThe ledger contract ensures that all token-related activity is recorded accurately and securely in a transparent, traceable, and tamper-proof way."]}),"\n",(0,r.jsxs)(n.p,{children:["The ledger contract defines the tables and schemas to store information about accounts and tokens.\nThe ledger contract also defines specific ",(0,r.jsx)(n.strong,{children:"capabilities"})," to perform specific actions and enforce specific conditions when those actions are performed.\nThe tables, schemas, and capabilities defined in the ledger contract ensure that token creators, token owners, and token buyers comply with predefined rules and constraints when they interact."]}),"\n",(0,r.jsx)(n.p,{children:"By enforcing rules and constraints through token policies, Marmalade promotes more secure and trustworthy transactions for all marketplace participants."}),"\n",(0,r.jsxs)(n.p,{children:["For more technical information about the Marmalade ledger contract, see ",(0,r.jsx)(n.a,{href:"/reference/marmalade/ledger",children:"Ledger contract"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"policy-manager",children:"Policy manager"}),"\n",(0,r.jsxs)(n.p,{children:["The Marmalade policy manager contract\u2014",(0,r.jsx)(n.code,{children:"marmalade-v2.policy-manager"}),"\u2014enables token creators to select multiple policies to configure the specific token features they want to implement.\nThe policy manager acts as a middle layer between the ledger and the individual policies applied to a token."]}),"\n",(0,r.jsx)(n.p,{children:"The policy manager gives token creators greater flexibility in defining rules for transferring ownership and managing transactions between buyers and sellers.\nFor example, it's the policy manager contract that enables a sale to require a secure escrow account to complete a token transfer or to guarantee royalty payments."}),"\n",(0,r.jsx)(n.p,{children:"The following diagram provides a simplified view of how the policy manager contract acts as a middle layer between the ledger contract and policies applied to a token in the token creation process:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Contract workflow to mint a token",src:t(28437).A+"",width:"1180",height:"341"})}),"\n",(0,r.jsx)(n.p,{children:"By using the policy manager contract, you can standardize the rules for creating asset properties, collecting payments, and transferring ownership within a marketplaces, providing a more consistent experience for marketplace participants."}),"\n",(0,r.jsx)(n.p,{children:"With the policy manager contract, you can choose token properties from built-in policies\u2014like the non-fungible policy and royalty policy\u2014or create custom policies to use on their own or in combination with the built-in policies."}),"\n",(0,r.jsxs)(n.p,{children:["For more technical details about the Marmalade policy manager contract, see ",(0,r.jsx)(n.a,{href:"/reference/marmalade/policy-manager",children:"Policy manager contract"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"sales-specific-contracts",children:"Sales-specific contracts"}),"\n",(0,r.jsx)(n.p,{children:"Marmalade supports sales-specific contracts to provide flexibility for how tokens can be sold.\nSales-specific contracts allow you to define different sales models with different sales mechanics\u2014like auctions or limited offering periods\u2014instead of simply quoting an asking price."}),"\n",(0,r.jsx)(n.p,{children:"When you offer a token for sale in the ledger, you can provide a reference to a specific contract that defines the rules for the sale.\nFor example, the sale contract you reference might have auction rules that specify an opening price and how to handle incoming bids.\nDepending on the rules defined in the referenced sale contract, the policy manager contract updates the final price of the quote during the buy process."}),"\n",(0,r.jsx)(n.p,{children:"By using a separate contract to define and manage the mechanics of the sales process, you can ensure that buyers and sellers can participate safely without compromising royalty payments.\nIt's important to note that contracts that define a sales model\u2014the sale contract\u2014must be reviewed and registered in the policy manager so that the policy manager can enforce the contract rules."}),"\n",(0,r.jsx)(n.p,{children:"The following diagram provides a simplified view of the interaction between the ledger, policy manager, and a sale contract:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Contract interaction using a sale contract",src:t(21364).A+"",width:"1180",height:"445"})}),"\n",(0,r.jsxs)(n.p,{children:["For information about registered sales-specific contracts, see the ",(0,r.jsx)(n.a,{href:"/reference/marmalade/conventional-sale",children:"conventional sale"})," and ",(0,r.jsx)(n.a,{href:"/reference/marmalade/dutch-sale",children:"dutch sale"})," contract reference.\nFor more information about how to implement the sale contract interface or create a custom sale contract, see ",(0,r.jsx)(n.a,{href:"/reference/marmalade/custom-sale",children:"Custom sales contracts"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"policies",children:"Policies"}),"\n",(0,r.jsxs)(n.p,{children:["Individual policies give you granular control over token properties and token-related activity, including minting, burning, transferring, and buying tokens.\nToken policies are implemented as smart contracts based on the interfaces defined in the ",(0,r.jsx)(n.a,{href:"https://github.com/kadena-io/marmalade/blob/main/pact/kip/token-policy-v2.pact",children:(0,r.jsx)(n.code,{children:"kip.token-policy-v2"})})," standard.\nThere are several built-in policies\u2014called ",(0,r.jsx)(n.strong,{children:"concrete policies"}),"\u2014that are configured to handle the most common marketplace use cases."]}),"\n",(0,r.jsx)(n.p,{children:"The built-in concrete policies are officially released and maintained to provide ready-to-use implementations of common features that don't require any custom development work."}),"\n",(0,r.jsx)(n.p,{children:"The concrete policies currently available provide the following features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Guard enforcement policy.\nIf the ",(0,r.jsx)(n.code,{children:"guard-policy"})," is applied to a token, a keyset or another type of guard must be specified to initiate any token-related activity, bolstering security against unauthorized minting."]}),"\n",(0,r.jsxs)(n.li,{children:["Non-fungible token enforcement policy.\nIf the ",(0,r.jsx)(n.code,{children:"non-fungible-policy"})," is applied to a token, the token is guaranteed to be unique with a maximum supply of one and precision set to zero."]}),"\n",(0,r.jsxs)(n.li,{children:["Royalty enforcement policy.\nIf the ",(0,r.jsx)(n.code,{children:"royalty-policy"})," is applied to a token, you can designate an account to receive royalties each time the token is transferred to a new owner, fostering an ongoing revenue stream from NFT sales."]}),"\n",(0,r.jsxs)(n.li,{children:["Collection identification policy.\nIf the ",(0,r.jsx)(n.code,{children:"collection-policy"})," is applied to a token, the token is identified as part of a collection and can be discovered as an item in a toke list."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You can also create ",(0,r.jsx)(n.strong,{children:"custom policies"})," to implement unique rules or enforce specific behavior not covered by the concrete policies.\nYou can find examples of custom policies in the ",(0,r.jsx)(n.a,{href:"https://github.com/kadena-io/marmalade/tree/main/examples/policies",children:"examples/policies"})," repository."]}),"\n",(0,r.jsx)(n.p,{children:"Example policies aren't officially released and maintained, but can be useful models for developing your own custom policies.\nIf an example or custom policy seems broadly useful to a general audience, it can be promoted to a concrete policy, contributing to the overall evolution of the Marmalade marketplace."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28437:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/mint_flow-f60d5fb49f15ca0522674d3023ef194d.png"},21364:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/offer-sale-contracts-workflow-33c92a71d20d4d2fe1ed611bb44c64bd.png"},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var a=t(96540);const r={},o=a.createContext(r);function i(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);