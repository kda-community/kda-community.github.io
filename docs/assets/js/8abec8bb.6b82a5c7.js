"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[8560],{44587:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"smart-contracts/functions-variables","title":"Functions, variables, and types","description":"Work with common built-in functions and start write your own function declarations that include variables and types.","source":"@site/docs/smart-contracts/functions-variables-types.md","sourceDirName":"smart-contracts","slug":"/smart-contracts/functions-variables","permalink":"/docs/smart-contracts/functions-variables","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/smart-contracts/functions-variables-types.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Functions, variables, and types","description":"Work with common built-in functions and start write your own function declarations that include variables and types.","id":"functions-variables","sidebar_position":6},"sidebar":"default","previous":{"title":"Pact features and conventions","permalink":"/docs/smart-contracts/lang-features"},"next":{"title":"Modules and interfaces","permalink":"/docs/smart-contracts/modules"}}');var i=a(74848),s=a(28453);const o={title:"Functions, variables, and types",description:"Work with common built-in functions and start write your own function declarations that include variables and types.",id:"functions-variables",sidebar_position:6},l="Functions, variables, and types",c={},r=[{value:"View built-in functions",id:"view-built-in-functions",level:2},{value:"Use common functions",id:"use-common-functions",level:2},{value:"Prepare to write functions",id:"prepare-to-write-functions",level:2},{value:"Define a function",id:"define-a-function",level:2},{value:"Add calculator functions",id:"add-calculator-functions",level:2},{value:"Variables",id:"variables",level:2},{value:"Constant values",id:"constant-values",level:3},{value:"Changeable values",id:"changeable-values",level:3},{value:"Typing in variable declarations",id:"typing-in-variable-declarations",level:2},{value:"More built-in functions",id:"more-built-in-functions",level:2},{value:"Entering a namespace",id:"entering-a-namespace",level:3},{value:"Hashing values",id:"hashing-values",level:3},{value:"Defining conditions with if statements",id:"defining-conditions-with-if-statements",level:3},{value:"Enforcing conditions",id:"enforcing-conditions",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"functions-variables-and-types",children:"Functions, variables, and types"})}),"\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.a,{href:"/smart-contracts/lang-features",children:"Language features and conventions"}),", you were introduced to Pact built-in functions and function categories.\nIn this part of the documentation, you'll begin working with common built-in functions and writing your own function declarations that include variables and types."]}),"\n",(0,i.jsx)(n.h2,{id:"view-built-in-functions",children:"View built-in functions"}),"\n",(0,i.jsx)(n.p,{children:"To view information about Pact built-in functions:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell on your local computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Display the list of built-in functions by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact --builtins\n"})}),"\n",(0,i.jsx)(n.p,{children:"You might want to save the output from this command to a file for quick reference.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact --builtins > builtin-functions.txt\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Pact REPL interpreter by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"View usage information for a specific built-in function by typing the function name in the interpreter."}),"\n",(0,i.jsxs)(n.p,{children:["For example, to see information about the format function, type ",(0,i.jsx)(n.code,{children:"format"})," at the ",(0,i.jsx)(n.code,{children:"pact>"})," prompt:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact> format\n"})}),"\n",(0,i.jsx)(n.p,{children:"After you enter the function name, you'll see information about the function in the interpreter.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'native `format`\n\n  Interpolate VARS into TEMPLATE using {}.\n\n  Type:\n  template:string vars:[*] -> string\n\n  Examples:\n  > (format "My {} has {}" ["dog" "fleas"])\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"use-common-functions",children:"Use common functions"}),"\n",(0,i.jsx)(n.p,{children:"Pact includes many built-in functions that enable you to perform common tasks like manipulating lists, assigning values, and formatting strings with variables.\nA few of the most common general purpose functions include the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"at"}),"\n",(0,i.jsx)(n.li,{children:"bind"}),"\n",(0,i.jsx)(n.li,{children:"map"}),"\n",(0,i.jsx)(n.li,{children:"format"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can use the ",(0,i.jsx)(n.a,{href:"/pact-5/general/at",children:"at"})," built-in function to return a value from a list or an object.\nThe ",(0,i.jsx)(n.a,{href:"/pact-5/general/bind",children:"bind"})," built-in function allows you to map a variable to a value from within an object.\nYou can use the ",(0,i.jsx)(n.a,{href:"/pact-5/general/map",children:"map"})," built-in function to apply a specific operation to all elements in a list and return the results.\nThe ",(0,i.jsx)(n.a,{href:"/pact-5/general/format",children:"format"})," built-in function allows you to create messages using strings and variables."]}),"\n",(0,i.jsx)(n.p,{children:"Let's try a few simple examples to see how these functions work."}),"\n",(0,i.jsx)(n.p,{children:"To use the common general functions:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell on your local computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Start the Pact REPL interpreter you installed in ",(0,i.jsx)(n.a,{href:"/smart-contracts/install",children:"Install Pact"})," by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Select an item from a list using its place\u2014its index location\u2014in the list."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(at 1 ["red" 4 true])\n4\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The index location starts with position 0, so at index position 1, the result is ",(0,i.jsx)(n.code,{children:"4"}),".\nAs this example illustrates, the list can include different data types.\nIf you change the index to 0, the result is ",(0,i.jsx)(n.code,{children:'"red"'}),".\nIf you change the index to 2, the result is ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Select a value from an object by specifying the object key."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact > (at "name" { "type": "cat", "name": "Scratchy", "age": 6 })\n"Scratchy"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, you use the ",(0,i.jsx)(n.code,{children:'"name"'}),' key instead of an index location to return the value\u2014"Scratchy"\u2014from that key.']}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Bind a variable from a source object to a value in another object using the ",(0,i.jsx)(n.code,{children:":="})," symbol."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact > (bind { "a": 1, "b": 2 } { "a" := a-value } a-value)\n1\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, the value from the ",(0,i.jsx)(n.code,{children:'"a"'})," key in the source object is assigned to the ",(0,i.jsx)(n.code,{children:"a-value"})," variable, so the value returned by the ",(0,i.jsx)(n.code,{children:"a-value"})," variable is 1."]}),"\n",(0,i.jsxs)(n.p,{children:["A more common use case for binding values using the ",(0,i.jsx)(n.code,{children:":="})," symbol is when you want to bind the values from a table object to a variable.\nThe following example illustrates how you might bind a value from a table in a function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defun pay (from to)\n    (with-read payments from { "balance":= from-bal }\n    ...code\n    )\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This example reads a table named ",(0,i.jsx)(n.strong,{children:"payments"})," that includes a user ",(0,i.jsx)(n.strong,{children:"from"})," that is sending a balance.\nA binding is used in this case to map the ",(0,i.jsx)(n.strong,{children:"balance"})," column in the payments table to the value of ",(0,i.jsx)(n.strong,{children:"from-bal"})," variable that is provided by the user.\nIn this example,the function calls the balance of the user using the ",(0,i.jsx)(n.strong,{children:"balance"})," variable rather than the ",(0,i.jsx)(n.strong,{children:"from-bal"})," variable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Apply a specific operation to each element in a list and return the results using the ",(0,i.jsx)(n.code,{children:"map"})," built-in function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact > (map (+ 1) [1 2 3])\n[2 3 4]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This expression adds the value 1 to each element in the specified list then returns the result in a new list.\nYou can also use the ",(0,i.jsx)(n.code,{children:"map"})," function with other values, including strings, and with any of the operators available in Pact.\nFor example, if you have a list of names, you can map \u201cHello \u201d to each of them to returning a friendly message for each list item."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title=" "',children:'pact> (map (+ "Hello ") ["Kadena" "Pact" "Standard Library"])\n["Hello Kadena" "Hello Pact" "Hello Standard Library"]\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Format a message using strings, curly braces (",(0,i.jsx)(n.code,{children:"{ }"}),") for placeholders and a list of values or variables."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(format "My {} has {}" ["dog" "fleas"])\n"My dog has fleas"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The first set of curly braces is the placeholder for the first value in the list.\nThe second set of curly braces is the placeholder for the second value in the list.\nYou can create as many placeholders and list values as you need for your messages.\nIn a more typical use case, you would use the ",(0,i.jsx)(n.code,{children:"format"})," function to create dynamic strings with variables inserted into specific locations in Pact contracts."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Close the Pact REPL interpreter session by pressing Control-d."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prepare-to-write-functions",children:"Prepare to write functions"}),"\n",(0,i.jsxs)(n.p,{children:["Now that you've experimented with several built-in functions in Pact, you\u2019re ready to write some simple functions of your own.\nIn Pact, functions are always defined in the context of a ",(0,i.jsx)(n.strong,{children:"module"}),".\nAs you learned in ",(0,i.jsx)(n.a,{href:"/smart-contracts/basic-concepts",children:"Pact smart contracts"}),", modules are one of the core components of the Pact programming language.\nA module definition must include information about who has ownership of the module using either an administrator keyset or by defining a GOVERNANCE capability.\nSo, before you start writing functions, you need to create a module and identify the module owner."]}),"\n",(0,i.jsx)(n.p,{children:"To prepare to write your first functions:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a code editor\u2014such as Visual Studio Code\u2014on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new file named ",(0,i.jsx)(n.code,{children:"myModule.pact"})," for your new Pact module."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add a module definition and a GOVERNANCE capability to the file with the following lines of code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(module myModule GOVERNANCE\n    (defcap GOVERNANCE() true)\n\n    ;; DEFINE FUNCTION HERE\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"defcap"})," function is a reserved keyword that defines a capability that controls the ownership of your contract.\nIt must evaluate to true to allow changes to the module.\nYou'll learn more about the power of capabilities in later tutorials and examples.\nThese lines of code represent the bare minimum required to define a module.\nBefore moving on to writing functions within the module, you can test that the module runs using the Pact REPL interpreter."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Pact REPL interpreter by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Load the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file by running a command similar to the following with the path to the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (load "myModule.pact")\n'})}),"\n",(0,i.jsx)(n.p,{children:"You should see output similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'"Loading myModule.pact..."\n"Loaded module myModule, hash lt47sdWmlQKnqv66VwNBolJqjRg1TcZpteGps5H0xCc"\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"define-a-function",children:"Define a function"}),"\n",(0,i.jsxs)(n.p,{children:["Functions are the core units of logic in a module.\nThey define all of the operations you want your application to offer and all of the features that your users want to access.\nAlthough Pact includes many built-in functions for you to use, you typically need to define most of a contract's logic using your own functions.\nFunctions definitions start with the reserved keyword ",(0,i.jsx)(n.code,{children:"defun"})," in Pact.\nAfter the ",(0,i.jsx)(n.code,{children:"defun"})," keyword, you must provide the function name followed by any arguments or other functions that the function uses."]}),"\n",(0,i.jsx)(n.p,{children:"The following is a simple example of the syntax to define a function in Pact:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defun returnPhrase (a b) ;; Start of function declaration\n    ;; COMMANDS GO HERE\n)                         ;; End of function declaration\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"defun"})," function is a reserved keyword that signals the start of a function declaration.\nIn this example, the function is named ",(0,i.jsx)(n.code,{children:"returnPhrase"})," and the function accepts inputs with the variable identifiers ",(0,i.jsx)(n.code,{children:"a"})," and ",(0,i.jsx)(n.code,{children:"b"}),".\nThe function includes comments by using two semi-colons (;;) to start each comment."]}),"\n",(0,i.jsx)(n.p,{children:"Let's add this function to your module."}),"\n",(0,i.jsx)(n.p,{children:"To define your first function:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open the code editor\u2014such as Visual Studio Code\u2014on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file you created for your new Pact module."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Define the function in the module by replacing the comment with the following lines of code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(module myModule GOVERNANCE          ;; Start of module definition\n  (defcap GOVERNANCE() true)\n\n  (defun returnPhrase (a b)          ;; Start of function declaration\n   (format "My {} has {}" [a b])\n  )                                  ;; End of function declaration\n)                                    ;; End of module definition\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"returnPhrase"})," function can now take any two inputs and return a formatted string value."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Pact REPL interpreter by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pact\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Load the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (load "myModule.pact")\n'})}),"\n",(0,i.jsx)(n.p,{children:"You should see output similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'"Loading myModule.pact..."\n"Loaded module myModule, hash sa059rM_ifArkCn4vDWpc20C1FThTMtWRNIMpVcrE6w"\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Call the ",(0,i.jsx)(n.code,{children:"returnPhrase"})," function by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(returnPhrase "car" "bright lights")\n"My car has bright lights"\n'})}),"\n",(0,i.jsx)(n.p,{children:"You can now change these inputs to any values you\u2019d like."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"add-calculator-functions",children:"Add calculator functions"}),"\n",(0,i.jsx)(n.p,{children:"Now that you have a working module with one function, you can add functions for the math operations that take any two numbers as input, and return the result."}),"\n",(0,i.jsx)(n.p,{children:"To add simple calculator functions:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open the code editor\u2014such as Visual Studio Code\u2014on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file you created for your new Pact module."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Define functions for adding, subtracting, multiplying, or dividing any input values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:" (defun addNumbers (a b)\n   (+ a b)\n )\n\n (defun subtractNumbers (a b)\n   (- a b)\n )\n\n (defun multiplyNumbers (a b)\n   (* a b)\n )\n\n (defun divNumbers (a b)\n   (/ a b)\n )\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Call the functions with different values to see the results."}),"\n",(0,i.jsx)(n.p,{children:"For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact> (addNumbers 3 4)\n7\npact> (subtractNumbers 23 4)\n19\npact> (multiplyNumbers 12 4)\n48\n(round (divNumbers 63.5 4.1) 8)\n15.48780488\n"})}),"\n",(0,i.jsx)(n.p,{children:"It's important to note that these simple calculator functions are valid, but could be improved by explicitly specifying the data type expected.\nFor example, in the current form, you could execute the addNumbers function to concatenate two strings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(addNumbers "Hello " "Kadena")\n"Hello Kadena"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To prevent errors or unintentional behavior, you can explicitly define the type for each function.\nFor example, you might want to explicitly set the data type to ",(0,i.jsx)(n.code,{children:"integer"})," or ",(0,i.jsx)(n.code,{children:"decimal"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defun addNumbers (a:integer b:integer)\n   (+ a b)\n )\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more information about specifying types, see ",(0,i.jsx)(n.a,{href:"#typing-in-variable-declarations",children:"Typing in variable declarations"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"variables",children:"Variables"}),"\n",(0,i.jsxs)(n.p,{children:["In the previous examples, you used the variable identifiers ",(0,i.jsx)(n.code,{children:"a"})," and ",(0,i.jsx)(n.code,{children:"b"})," to represent input arguments in your function declarations.\nVariables represent and store any type of data that you want to reference and manipulate in a program."]}),"\n",(0,i.jsx)(n.h3,{id:"constant-values",children:"Constant values"}),"\n",(0,i.jsxs)(n.p,{children:["In Pact, you can define variables for constant values using the ",(0,i.jsx)(n.code,{children:"defconst"})," reserved keyword."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defconst variable_name variable_value [optional_text])\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For example, the following statement illustrates defining the constant ",(0,i.jsx)(n.code,{children:"PI"})," with eight decimal places followed by an optional comment:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(defconst PI 3.14159265 "Pi to 8 decimals")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The following example illustrates defining the constant ",(0,i.jsx)(n.code,{children:"PENNY"})," with an explicit type of ",(0,i.jsx)(n.code,{children:"decimal"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(defconst PENNY:decimal 0.1)\n"})}),"\n",(0,i.jsx)(n.p,{children:"By convention, constant variables use all uppercase letters.\nHowever, this convention isn't required."}),"\n",(0,i.jsx)(n.p,{children:"To use a constant in your module:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open the code editor\u2014such as Visual Studio Code\u2014on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Open the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add the constant variable for ",(0,i.jsx)(n.code,{children:"PI"})," to your module and save your changes."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Load the ",(0,i.jsx)(n.code,{children:"myModule.pact"})," file."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Call the ",(0,i.jsx)(n.code,{children:"addNumbers"})," function with the ",(0,i.jsx)(n.code,{children:"PI"})," constant."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(addNumbers 1.0 PI)\n4.14159265\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can experiment with using the ",(0,i.jsx)(n.code,{children:"PI"})," constant in other functions.\nHowever, you should note that the data type for ",(0,i.jsx)(n.code,{children:"PI"})," is a decimal value.\nTherefore, the other values you pass should also be decimal values\u2014as in this example with 1.0\u2014and not the integer values."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"changeable-values",children:"Changeable values"}),"\n",(0,i.jsxs)(n.p,{children:["You can also define variables for values that can be changed using ",(0,i.jsx)(n.code,{children:"let"})," expressions.\nWithin functions, you can use the ",(0,i.jsx)(n.code,{children:"let"})," keyword to bind a variable identifier to a value.\nFor example, you can assign the variable identifier ",(0,i.jsx)(n.code,{children:"x"})," a value of ",(0,i.jsx)(n.code,{children:"10"})," and perform a simple addition by entering the following in the Pact terminal:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((x 10))\n (+ x 5)\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This expression returns the result of adding ",(0,i.jsx)(n.code,{children:"5"})," to ",(0,i.jsx)(n.code,{children:"x"})," with the value ",(0,i.jsx)(n.code,{children:"15"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can also use the ",(0,i.jsx)(n.code,{children:"let"})," keyword to reference previously-declared variables in the same ",(0,i.jsx)(n.code,{children:"let"})," declaration.\nThe following example illustrates referencing a previously-declared variable in the same ",(0,i.jsx)(n.code,{children:"let"})," declaration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((x 2) (y (* x 10))) (+ x y))\n22\n"})}),"\n",(0,i.jsx)(n.h2,{id:"typing-in-variable-declarations",children:"Typing in variable declarations"}),"\n",(0,i.jsx)(n.p,{children:"Most of the examples you've seen so far haven't explicitly specified the data type being used.\nHowever, in practice, you should explicitly identify the data type for each variable you define in a program.\nBy identifying the data type\u2014for example, integer, decimal, boolean, or string\u2014you can ensure that variables can be set and manipulated correctly and without introducing unexpected behavior by mismatching types."}),"\n",(0,i.jsxs)(n.p,{children:["For example, to specify that the variable ",(0,i.jsx)(n.code,{children:"x"})," is an integer, you can add the ",(0,i.jsx)(n.code,{children:"integer"})," data type to the declaration like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((x:integer 10))x)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can specify a variable is a ",(0,i.jsx)(n.code,{children:"decimal"})," value like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(let ((x:decimal 10.0))x)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can specify a variable is a ",(0,i.jsx)(n.code,{children:"string"})," value like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(let ((state:string "CA"))state)\n"CA"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"more-built-in-functions",children:"More built-in functions"}),"\n",(0,i.jsx)(n.p,{children:"You've already seen how to use several common built-in Pact functions.\nHowever, there are many more built-in functions that you'll use frequently in Pact smart contracts, including the following general functions:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"namespace"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"hash"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"if"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"enforce"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"entering-a-namespace",children:"Entering a namespace"}),"\n",(0,i.jsxs)(n.p,{children:["In the Kadena ecosystem, a ",(0,i.jsx)(n.strong,{children:"namespace"})," is conceptually similar to a domain name except that the name is a static prefix that establishes a private boundary for the contracts, keys, and other elements that you control.\nWhen you are building, testing, and deploying smart contracts on your local development network, you don't need to define a namespace.\nYour work is isolated from others because your blockchain\u2014and any smart contracts you deploy\u2014run exclusively on your local computer."]}),"\n",(0,i.jsx)(n.p,{children:"However, if you want to deploy a smart contract on the Kadena test network or another public blockchain, the contract must have a unique name that distinguishes your Pact module from all the others.\nIf you try to deploy a Pact module with a name that's already being used on the network where you are trying to deploy, the deployment will fail with an error and you'll pay a transaction fee for the failed attempt."}),"\n",(0,i.jsx)(n.p,{children:"To prevent name collisions on the same network, Kadena allows you to define your own unique namespace on the blockchain.\nThe namespace segregates your work\u2014your smart contracts, keysets, and Pact modules\u2014from applications and modules created and deployed by others.\nWithin your namespace, you can define whatever keysets and modules you need and control who can update the namespace with changes.\nAs long as you choose a unique name for your namespace, everything you define inside of that namespace is automatically unique, too."}),"\n",(0,i.jsxs)(n.p,{children:["Pact provides the ",(0,i.jsx)(n.code,{children:"define-namespace"})," and ",(0,i.jsx)(n.code,{children:"namespace"})," built-in functions for you define or enter the namespace you want to use as your current working environment.\nAfter you declare the namespace you want to work with, all of the modules and functions you define are contained within that namespace."]}),"\n",(0,i.jsxs)(n.p,{children:["You can access the modules and functions in a namespace by using their fully qualified name.\nThe fully-qualified name includes the namespace string as a prefix before the module name.\nFor example, if you declare a principal namespace such as ",(0,i.jsx)(n.code,{children:"ns-my-local-dev"})," for the module ",(0,i.jsx)(n.code,{children:"my-calculator"}),", you can call functions in the module using a fully-qualified name similar to the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"ns-my-local-dev.my-calculator.add\n"})}),"\n",(0,i.jsx)(n.p,{children:"To define and enter a namespace:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell on your local computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Pact command-line interpreter to open the Pact terminal."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add a ",(0,i.jsx)(n.code,{children:"user-keyset"})," guard and an ",(0,i.jsx)(n.code,{children:"admin-keyset"})," guard to your working environment by entering the following lines:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(env-data\n { 'user-keyset :\n   { 'keys : [ 'user-public-key ]\n   , 'pred : 'keys-all\n   }\n , 'admin-keyset :\n   { 'keys : [ 'admin-public-key ]\n   , 'pred : 'keys-all\n   }\n }\n)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"user-keyset"})," and ",(0,i.jsx)(n.code,{children:"admin-keyset"})," are required to define a new namespace.\nIn the terminal, you should see this information added to your working environment:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact> (env-data\n....>  { 'user-keyset :\n....>    { 'keys : [ 'user-public-key ]\n....>    , 'pred : 'keys-all\n....>    }\n....>  , 'admin-keyset :\n....>    { 'keys : [ 'admin-public-key ]\n....>    , 'pred : 'keys-all\n....>    }\n....>  }\n....> )\n\"Setting transaction data\"\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Define a new namespace by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact>  (define-namespace 'ns-my-local-dev (read-keyset 'user-keyset) (read-keyset 'admin-keyset))\n"})}),"\n",(0,i.jsx)(n.p,{children:"In the terminal, you should see this information added to your working environment:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'"Namespace defined: ns-my-local-dev"\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Enter the new namespace by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"pact> (namespace 'ns-my-local-dev)\n"})}),"\n",(0,i.jsx)(n.p,{children:"In the terminal, you should see this information added to your working environment:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'"Namespace set to ns-my-local-dev"\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you define a module in this workspace, you would set the first line to specify the namespace before any of the module code.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(namespace "ns-my-local-dev")\n\n(module myModule GOVERNANCE\n    (defcap GOVERNANCE() true)\n    ...\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The module is created with the fully-qualified ",(0,i.jsx)(n.code,{children:"ns-my-local-dev.[contract_name]"})," name."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"hashing-values",children:"Hashing values"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"hash"})," function enables you to compute a unique Base64Url-encoded string for a specified ",(0,i.jsx)(n.code,{children:"value"})," using the BLAKE2b 256-bit hashing algorithm.\nUsing a hashing algorithm is a common operation for blockchain networks when you need to create unique values.\nYou can create hashes for any type of data.\nStrings values are converted directly.\nOther data type values are converted using their JSON representation."]}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use the ",(0,i.jsx)(n.code,{children:"hash"})," function to create a unique index for the ",(0,i.jsx)(n.code,{children:'"hello"'})," string value:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (hash "hello")\n"Mk3PAn3UowqTLEQfNlol6GsXPe-kuOWJSCU0cbgbcs8"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Because ",(0,i.jsx)(n.code,{children:'"hello"'})," is a string value, the ",(0,i.jsx)(n.code,{children:"hash"}),' function computes the BLAKE2b 256-bit hash of the string "hello" and returns the hash value.\nIf you change the string to \u201chello1\u201d, the hash function returns different value.\nFor example:']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(hash "hello1")\n"zbEgnuUZLD7FFPPH9VD91-Ah9KzCeCLqBVL2hGAg8d4"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can also use the ",(0,i.jsx)(n.code,{children:"hash"})," function to compute the hash for lists, objects, and other data types.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(hash [1 2 3])\n"qPorDZllGgkv-ZaODZMQE0tUgv2ghZ4G86OTDmKANXg"\n'})}),"\n",(0,i.jsx)(n.p,{children:"The following example computes the hash for the JSON representation of an object and returns the hash value:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'(hash { \'foo: 1 })\n"h9BZgylRf_M4HxcBXr15IcSXXXSz74ZC2IAViGle_z4"\n'})}),"\n",(0,i.jsx)(n.p,{children:"The hash enables you to reference and manipulate the specific data in complex ways."}),"\n",(0,i.jsx)(n.h3,{id:"defining-conditions-with-if-statements",children:"Defining conditions with if statements"}),"\n",(0,i.jsxs)(n.p,{children:["Because Pact doesn't support recursion or unbounded looping, the ",(0,i.jsx)(n.code,{children:"if"})," function is particularly useful for testing conditions.\nThe basic format for testing conditions with ",(0,i.jsx)(n.code,{children:"if"})," statements looks like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:"(if condition then else)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If the specified ",(0,i.jsx)(n.code,{children:"condition"})," is true, evaluate the ",(0,i.jsx)(n.code,{children:"then"})," expression.\nIf the specified ",(0,i.jsx)(n.code,{children:"condition"})," is false, evaluate the ",(0,i.jsx)(n.code,{children:"else"})," expression."]}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates the use of ",(0,i.jsx)(n.code,{children:"if"})," to test a condition\u2014whether (2 + 2 =4)\u2014in the Pact REPL:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact>(if (= (+ 2 2) 4) "Sanity prevails" "Chaos reigns")\n"Sanity prevails"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, the condition ",(0,i.jsx)(n.code,{children:"(= (+ 2 2) 4)"})," evaluates to true, so the expression ",(0,i.jsx)(n.code,{children:'"Sanity prevails"'})," is returned."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact>(if (= (+ 2 2) 5) "Sanity prevails" "Chaos reigns")\n"Chaos reigns"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, the condition ",(0,i.jsx)(n.code,{children:"(= (+ 2 2) 5)"})," evaluates to false, so the expression ",(0,i.jsx)(n.code,{children:'"Chaos reigns"'})," is returned."]}),"\n",(0,i.jsx)(n.h3,{id:"enforcing-conditions",children:"Enforcing conditions"}),"\n",(0,i.jsxs)(n.p,{children:["Pact provides several ",(0,i.jsx)(n.code,{children:"enforce"})," functions that enable you to evaluate conditions and allow or block further operations based on the result.\nOne critical function in Pact is ",(0,i.jsx)(n.code,{children:"enforce"}),".\nIf you hit an enforce block and invalidate it, it will stop you from executing any further."]}),"\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"enforce"})," function, you can test whether a specified ",(0,i.jsx)(n.code,{children:"expression"})," evaluates to true or false.\nIf the specified ",(0,i.jsx)(n.code,{children:"expression"})," evaluates to true, the function returns true and operation continues.\nIf the specified ",(0,i.jsx)(n.code,{children:"expression"})," evaluates to false, the function halts execution and displays a specified error ",(0,i.jsx)(n.code,{children:"message"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The following example tests the expression (1 + 3 != 5):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (enforce (!= (+ 1 3) 5) "whoops")\ntrue\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Because the specified expression (",(0,i.jsx)(n.code,{children:"4 != 5"}),") is true, the function returns true and the operation continues."]}),"\n",(0,i.jsxs)(n.p,{children:["The following example demonstrates how to use the ",(0,i.jsx)(n.code,{children:"enforce"})," function to evaluate the expression ",(0,i.jsx)(n.code,{children:"(2 + 2) != 4"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-pact",children:'pact> (enforce (!= (+ 2 2) 4) "The expression is false")\nThe expression is false\n at <interactive>:0:0: (enforce (native `!=`  True if X does not equal Y.  Type: x... "The expression is false")\n'})}),"\n",(0,i.jsxs)(n.p,{children:["There are many situations where the enforcement functions are useful for testing specific behavior.\nFor example, one of the most common enforcement functions is the ",(0,i.jsx)(n.code,{children:"enforce-guard"})," function.\nThis function ensures that the logic for a specified ",(0,i.jsx)(n.code,{children:"guard"})," or ",(0,i.jsx)(n.code,{children:"keyset"})," is enforced before protected operations can be executed.\nYou'll learn more about guards and enforcing guard logic in ",(0,i.jsx)(n.a,{href:"/smart-contracts/guards",children:"Guards"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>l});var t=a(96540);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);