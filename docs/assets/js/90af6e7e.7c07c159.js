"use strict";(self.webpackChunkkadena_docs=self.webpackChunkkadena_docs||[]).push([[9134],{29040:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"guides/kadena-client-quickstart","title":"Develop with @kadena/client","description":"The _Get started with @kadena/client_ library provides a beginner\'s guide to using the @kadena/client TypeScript API for interacting with Pact smart contracts and Chainweb nodes using JavaScript or TypeScript frontend frameworks.","source":"@site/docs/guides/kadena-client-quickstart.md","sourceDirName":"guides","slug":"/guides/kadena-client-quickstart","permalink":"/docs/guides/kadena-client-quickstart","draft":false,"unlisted":false,"editUrl":"https://github.com/kda-community/kadena-docs-new/blob/master/docs/guides/kadena-client-quickstart.md","tags":[{"inline":true,"label":"TypeScript","permalink":"/docs/tags/type-script"},{"inline":true,"label":"Kadena","permalink":"/docs/tags/kadena"},{"inline":true,"label":"Kadena client","permalink":"/docs/tags/kadena-client"},{"inline":true,"label":"frontend","permalink":"/docs/tags/frontend"}],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Develop with @kadena/client","description":"The _Get started with @kadena/client_ library provides a beginner\'s guide to using the @kadena/client TypeScript API for interacting with Pact smart contracts and Chainweb nodes using JavaScript or TypeScript frontend frameworks.","id":"kadena-client-quickstart","sidebar_position":9,"tags":["TypeScript","Kadena","Kadena client","frontend"]},"sidebar":"default","previous":{"title":"Develop with Chainweaver","permalink":"/docs/guides/chainweaver"},"next":{"title":"Troubleshooting tips","permalink":"/docs/guides/troubleshooting"}}');var i=t(74848),c=t(28453);const r={title:"Develop with @kadena/client",description:"The _Get started with @kadena/client_ library provides a beginner's guide to using the @kadena/client TypeScript API for interacting with Pact smart contracts and Chainweb nodes using JavaScript or TypeScript frontend frameworks.",id:"kadena-client-quickstart",sidebar_position:9,tags:["TypeScript","Kadena","Kadena client","frontend"]},s="Develop with @kadena/client",o={},l=[{value:"What is @kadena/client?",id:"what-is-kadenaclient",level:2},{value:"About JavaScript and TypeScript",id:"about-javascript-and-typescript",level:3},{value:"About TypeScript tooling",id:"about-typescript-tooling",level:3},{value:"Before you begin",id:"before-you-begin",level:2},{value:"Prepare your first project",id:"prepare-your-first-project",level:2},{value:"Prepare to interact with a smart contract",id:"prepare-to-interact-with-a-smart-contract",level:2},{value:"Example: Check an account balance",id:"example-check-an-account-balance",level:2},{value:"Review the sample code",id:"review-the-sample-code",level:3},{value:"What happens in each part",id:"what-happens-in-each-part",level:3},{value:"Example: Create an account",id:"example-create-an-account",level:2},{value:"Example: Transfer between accounts",id:"example-transfer-between-accounts",level:2},{value:"Signatures and capabilities",id:"signatures-and-capabilities",level:2},{value:"Capabilities",id:"capabilities",level:3},{value:"Transactions and gas",id:"transactions-and-gas",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"develop-with-kadenaclient",children:"Develop with @kadena/client"})}),"\n",(0,i.jsxs)(n.p,{children:["Welcome to the ",(0,i.jsx)(n.em,{children:"Quick Start Beginners Guide"})," for the Kadena client TypeScript library.\nThe ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library is a Node package that you can install and manage using the ",(0,i.jsx)(n.code,{children:"npm"})," package manager.\nThis library enables you to connect to and interact with the Kadena blockchain using JavaScript or TypeScript programs.\nIf you're new to programming, this guide provides everything you need to know to get started.\nIf you're an experienced JavaScript or TypeScript developer, you can skip this guide and go directly to the ",(0,i.jsx)(n.a,{href:"/reference/kadena-client",children:"Kadena TypeScript client"})," reference information."]}),"\n",(0,i.jsx)(n.h2,{id:"what-is-kadenaclient",children:"What is @kadena/client?"}),"\n",(0,i.jsxs)(n.p,{children:["The Kadena client library provides an ",(0,i.jsx)(n.em,{children:"application programming interface (API)"}),"\u2014in the form of functions\u2014that enable web applications that are written as JavaScript or TypeScript programs to talk to the Kadena blockchain.\nBy providing support for web applications that run as JavaScript or TypeScript programs, the library helps you build interactive features that add, use, or modify information in the blockchain.\nFor example, the library simplifies common tasks by abstracting the logic required to connect to the blockchain when you want to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Check account balances"}),"\n",(0,i.jsx)(n.li,{children:"Create new accounts"}),"\n",(0,i.jsx)(n.li,{children:"Transfer assets betweeen accounts"}),"\n",(0,i.jsx)(n.li,{children:"Send transactions to execute smart contract functions"}),"\n",(0,i.jsx)(n.li,{children:"Sign transactions with digital signatures"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"about-javascript-and-typescript",children:"About JavaScript and TypeScript"}),"\n",(0,i.jsxs)(n.p,{children:["It's worth noting that ",(0,i.jsx)(n.code,{children:"@kadena/client"})," is a TypeScript library."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"JavaScript (JS)"})," is a programming language that runs directly in web browsers and on servers to enable interactive and dynamic user experiences.\nUnlike HTML that's used to structure content or CSS that's used to style content, JavaScript adds interactivity to web pages by supporting user interactions like mouse clicks and keyboard input, dynamic changes to page content, and asynchronous requests to servers."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"TypeScript (TS)"})," is a superset of JavaScript that adds features that aren't supported in JavaScript, such as static type checking and compile-time error checking to find problems before your code runs.\nBecause TypeScript is a superset of JavaScript, any valid JavaScript code is also valid TypeScript code.\nHowever, the additional features that TypeScript provides must be removed to compile TypeScript code as standard JavaScript."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"about-typescript-tooling",children:"About TypeScript tooling"}),"\n",(0,i.jsxs)(n.p,{children:["You can't execute TypeScript programs that include TypeScript syntax, such as type notation, with programs programs that don't support that syntax.\nFor example, you can't use ",(0,i.jsx)(n.code,{children:"Node.js"})," to execute a TypeScript program\u2014as a file with the ",(0,i.jsx)(n.code,{children:".ts"})," extension\u2014directly or if the file includes any TypeScript type notation."]}),"\n",(0,i.jsx)(n.p,{children:"To execute TypeScript programs, you have three options:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Compile the TypeScript file to JavaScript using the TypeScript compiler, then execute the JavaScript file.\nFor example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tsc kadena-sample-program.ts\nnode kadena-sample-program.js\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Install and use ",(0,i.jsx)(n.code,{children:"tsx"})," for fast execution without compiling the TypeScript file as a separate step.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install --global tsx\ntsx kadena-sample-program.ts\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Install and use ",(0,i.jsx)(n.code,{children:"ts-node"})," to compile and execute the TypeScript file with the TypeScript compiler.\nFor example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install --global ts-node\nts-node kadena-account-creator.ts\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The programs in this guide use TypeScript syntax and use ",(0,i.jsx)(n.code,{children:"tsx"})," to demonstrate executing the programs without compiling to JavaScript first."]}),"\n",(0,i.jsx)(n.h2,{id:"before-you-begin",children:"Before you begin"}),"\n",(0,i.jsx)(n.p,{children:"You must have a few common software development tools installed on your computer to follow the instructions in this guide.\nVerify the following basic requirements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node.js"})," is a cross-platform execution environment for JavaScript code and ",(0,i.jsx)(n.strong,{children:"npm"})," is a package manager that helps you install and manage code libraries like the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Download ",(0,i.jsx)(n.a,{href:"https://nodejs.org/",children:"Node.js"}),", version 18 or later, and choose the Long Term Support (LTS) version, if necessary."]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"node --version"})," to verify the version of ",(0,i.jsx)(n.code,{children:"node"})," you are running."]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"npm --version"})," to verify ",(0,i.jsx)(n.code,{children:"npm"})," is installed and the version of it you are running."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"TypeScript"})," is progamming language you'll use to create programs that use the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"tsc --version"})," to check whether TypeScript is installed and the version of it you are running."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Code editor"})," can be a simple text editing program or an integrated development environment (IDE) such as Microsoft ",(0,i.jsx)(n.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Basic terminal shell"})," is a program that enables you to execute commands interactively in through command-line programs."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prepare-your-first-project",children:"Prepare your first project"}),"\n",(0,i.jsx)(n.p,{children:"Now that you have had an introduction to the @kadena/client library and familiar with the tooling required to work with TypeScript programs, you're ready to create your first project by following these step-by-step instructions."}),"\n",(0,i.jsx)(n.p,{children:"To prepare a new project:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell on your computer."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new folder and change to the project directory by running the following command to create a new ",(0,i.jsx)(n.code,{children:"my-kadena-app"})," project:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir my-kadena-app && cd my-kadena-app\n"})}),"\n",(0,i.jsx)(n.p,{children:'This command creates a new folder called "my-kadena-app" and makes that folder your current working directory.'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Initialize the new project by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm init --yes\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command creates a ",(0,i.jsx)(n.code,{children:"package.json"})," file in your project directory that keeps track of your project settings and dependencies."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Install the required libraries by running the following commands:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install @kadena/client\nnpm install --save-dev @kadena/pactjs-cli typescript ts-node\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The first command adds a ",(0,i.jsx)(n.code,{children:"node_modules"})," folder to your project directory and downloads and installs ",(0,i.jsx)(n.code,{children:"the @kadena/client"})," library and related development tools.\nThe second command adds development dependencies for packages that support working with Pact types and TypeScript programs."]}),"\n",(0,i.jsx)(n.p,{children:"After running these commands, your project includes the following folders in the node_modules/@kadena folder:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"chainweb-node-client"}),"\n",(0,i.jsx)(n.li,{children:"client"}),"\n",(0,i.jsx)(n.li,{children:"cryptography-utils"}),"\n",(0,i.jsx)(n.li,{children:"pactjs"}),"\n",(0,i.jsx)(n.li,{children:"pactjs-cli"}),"\n",(0,i.jsx)(n.li,{children:"pactjs-generator"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Initialize settings for TypeScript by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx tsc --init\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command creates a ",(0,i.jsx)(n.code,{children:"tsconfig.json"})," TypeScript configuration file in your project."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prepare-to-interact-with-a-smart-contract",children:"Prepare to interact with a smart contract"}),"\n",(0,i.jsx)(n.p,{children:"Before you start writing any code, it's important to understand how the programs will interact with the blockchain."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Kadena blockchain network consists of computers that run ",(0,i.jsx)(n.strong,{children:"Chainweb node"})," software."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Smart contracts"})," are program that run on the blockchain nodes to execute operations according to specific rules."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pact"})," is a smart contract programming language that can be interpreted and executed by Chainweb nodes.\nThe functions in the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library translate TypeScript operations that a browser can understand into Pact operations that Chainweb nodes can recognize and act on."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"coin"})," Pact module is a built-in smart contract that handles ledger operations for the Kadena native cryptocurrency, KDA."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ledger operations"})," are functions that involve activity like creating and updating ",(0,i.jsx)(n.strong,{children:"accounts"})," that hold assets and ",(0,i.jsx)(n.strong,{children:"transfers"})," that move assets from one account to another."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All of the programs in this guide demonstrate how to use the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library to call functions that are defined using the Pact programming language in the ",(0,i.jsx)(n.code,{children:"coin"})," contract."]}),"\n",(0,i.jsx)(n.h2,{id:"example-check-an-account-balance",children:"Example: Check an account balance"}),"\n",(0,i.jsxs)(n.p,{children:["To start with something simple, like checking an account balance, you must have at least one account on the Kadena development, test, or main production network.\nIf you don't have an account on any Kadena network, you should start by creating one.\nIf you have the ",(0,i.jsx)(n.code,{children:"@kadena/kadena-cli"})," package installed, you can use ",(0,i.jsx)(n.code,{children:"kadena account add"})," to create an account."]}),"\n",(0,i.jsxs)(n.p,{children:["For this example, the account is on the Kadena ",(0,i.jsx)(n.code,{children:"development"})," network running locally and the code checks the balance on chain ",(0,i.jsx)(n.code,{children:"3"})," for the account.\nTo execute the sample code in your own environment, you must modify the example code to reflect the account name, network identifier, and chain identifier for the account you've created."]}),"\n",(0,i.jsx)(n.p,{children:"To create a program that checks an account balance:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new file called ",(0,i.jsx)(n.code,{children:"check-balance.ts"})," in your code editor."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add the following code to the file and modify the network and chain, if necessary:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Import the tools we need from the Kadena library.\nimport { Pact, createClient} from '@kadena/client';\n\n// Create an asynchronous function that checks a Kadena account balance.\nasync function checkBalance(accountName) {\n  console.log(`Checking balance for account: ${accountName}`);\n  \n  try {\n    // Step 1: Build a transaction that uses the Pact language.\n    const transaction = Pact.builder\n      .execution(\n        // Call the \"get-balance\" function from the \"coin\" smart contract\n        Pact.modules.coin['get-balance'](accountName)\n      )\n      // Specify the chain to check.\n      .setMeta({ chainId: '3' }) \n      .createTransaction();\n  \n    // Step 2: Create a client on a specific chain in the Kadena development network.\n    const client = createClient(\n      'http://127.0.0.1:8080/chainweb/0.0/development/chain/3/pact'\n    );\n\n    // To connect to the Kadena test network, replace the client URL with one\n    // similar to the following:\n    // 'https://api.testnet.chainweb.com//chainweb/0.0/testnet04/chain/3/pact'\n\n    // Step 3: Send the request to the blockchain.\n    const result = await client.local(transaction, {\n      preflight: false,\n      signatureVerification: false,\n    });\n\n    // Step 4: Display the result\n    if (result.result.status === 'success') {\n      console.log(`Balance: ${result.result.data} KDA`);\n      return result.result.data;\n    } else {\n      console.log('Error:', result.result.error);\n    }\n  } catch (error) {\n    console.log('Something went wrong:', error.message);\n  }\n}\n\n// Example usage - replace with a real Kadena account\nconst exampleAccount = 'k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c';\ncheckBalance(exampleAccount);\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell and enter the following command to execute the program:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tsx check-balance.ts\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you've modified the network, chain, and account name, you should see output similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Checking balance for account: k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\nBalance: 47 KDA\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"review-the-sample-code",children:"Review the sample code"}),"\n",(0,i.jsxs)(n.p,{children:["Now that you've seen the ",(0,i.jsx)(n.code,{children:"@kadena/client"})," library in action in a simple example, let's review the code to understand what each part of the program does."]}),"\n",(0,i.jsx)(n.p,{children:"In general, you can see that the program consists of the following keys parts:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Import"})," statement"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Function"})," definition"]}),"\n",(0,i.jsxs)(n.li,{children:["Constructing the ",(0,i.jsx)(n.strong,{children:"transaction"})]}),"\n",(0,i.jsxs)(n.li,{children:["Creating the ",(0,i.jsx)(n.strong,{children:"client"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sending the transaction ",(0,i.jsx)(n.strong,{children:"request"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"what-happens-in-each-part",children:"What happens in each part"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Import"})," statement: ",(0,i.jsx)(n.code,{children:"import { Pact, createClient} from '@kadena/client';"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pulls in the specific functions needed from the Kadena client library."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"})," definition: ",(0,i.jsx)(n.code,{children:"async function checkBalance(accountName) { ... }"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Uses the ",(0,i.jsx)(n.code,{children:"async"})," keyword so that the function can wait for responses from the blockchain."]}),"\n",(0,i.jsxs)(n.li,{children:["Creates a reusable ",(0,i.jsx)(n.code,{children:"checkBalances"})," function that can check any account's balance"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Transaction"})," construction: ",(0,i.jsx)(n.code,{children:"Pact.builder.execution(...)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Creates a transaction request to call the ",(0,i.jsx)(n.code,{children:"get-balance"})," function in the ",(0,i.jsx)(n.code,{children:"coin"})," contract."]}),"\n",(0,i.jsxs)(n.li,{children:["Sets required information for thetransaction request, in this case, the ",(0,i.jsx)(n.code,{children:"accountName"})," and the ",(0,i.jsx)(n.code,{children:"chainID"})," are required."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Client"})," creation: ",(0,i.jsx)(n.code,{children:"createClient(...)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Creates a connection to a specific Kadena network, chain, and endpoint."}),"\n",(0,i.jsxs)(n.li,{children:["In this example, the client URL points to the ",(0,i.jsx)(n.code,{children:"development"})," Kadena network."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request"})," a response: ",(0,i.jsx)(n.code,{children:"client.local(transaction, ...)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sends the balance inquiry to the blockchain through the client connection."}),"\n",(0,i.jsxs)(n.li,{children:["In this example, the ",(0,i.jsx)(n.code,{children:"local"})," property indicates that the request is a read operation with no changes to the blockchain."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-create-an-account",children:"Example: Create an account"}),"\n",(0,i.jsxs)(n.p,{children:["Now let's look at a slightly more complex example that creates a new on-chain account without transferring any funds to the account.\nThe account must be defined on a specific network and chain, but will have a default balance of 0.0.\nYou'll notice that this example has several similarities to the ",(0,i.jsx)(n.code,{children:"check-balance.ts"})," program, but uses a well-known test account to create the new account and takes an account public key as input to create the account."]}),"\n",(0,i.jsx)(n.p,{children:"To create a program that creates a new account:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new file called ",(0,i.jsx)(n.code,{children:"create-kadena-account.ts"})," in your code editor."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add the following code to the file and modify the network and chain, if necessary:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Import basic functions to interact with the blockchain from the Kadena client library.\nimport { Pact, createClient, createSignWithKeypair, isSignedTransaction } from '@kadena/client';\n\n// Create a client to connect to the Kadena network. In this example, the client connects to\n// chain 3 in the Kadena development network.\nconst client = createClient('http://127.0.0.1:8080/chainweb/0.0/development/chain/3/pact');\n\n// To create a client to interact with the Kadena test (testnet04) network, replace the  \n// client URL with one similar to the following:\n// https://api.testnet.chainweb.com//chainweb/0.0/testnet04/chain/3/pact\n\n// Return an error if the required argument is missing:\nif (!process.argv[2]) {\n  console.error('Specify a public key or Kadena account name.');\n  process.exit(1);\n}\n\n// Use a well-known test account to create a new account.\nconst FUNDING_ACCOUNT = 'sender00';\nconst FUNDING_ACCOUNT_PUBLIC_KEY = '368820f80c324bbc7c2b0610688a7da43e39f91d118732671cd9c7500ff43cca';\nconst FUNDING_ACCOUNT_PRIVATE_KEY = '251a920c403ae8c8f65f59142316af3c82b631fba46ddea92ee8c95035bd2898';\n\n// Function to prepend \"k:\" if not already present\nconst formatAccount = (account: string): string => {\n  return account.startsWith('k:') ? account : `k:${account}`;\n};\n\n// Function to extract the key part (after \"k:\")\nconst accountKey = (account: string): string => {\n  const formatted = formatAccount(account);\n  return formatted.split(':')[1];\n};\n\nmain(FUNDING_ACCOUNT, FUNDING_ACCOUNT_PUBLIC_KEY, FUNDING_ACCOUNT_PRIVATE_KEY, process.argv[2]);\n\nasync function main(sender: string, senderPublicKey: string, senderPrivateKey: string, inputAccount: string) {\n  const account = formatAccount(inputAccount);\n\n  // Construct a transaction that creates a new account.\n  try {\n    const transaction = Pact.builder\n      .execution(Pact.modules.coin['create-account'](account, () => '(read-keyset \"ks\")'))\n      .addData('ks', {\n        keys: [accountKey(account)],\n        pred: 'keys-all',\n      })\n      .addSigner(senderPublicKey, (withCap) => [withCap('coin.GAS')])\n      // For this example, chain '3' on the 'development' network.\n      .setMeta({ chainId: '3', senderAccount: sender })\n      .setNetworkId('development')\n      .createTransaction();\n\n    // Sign this transaction with the well-known public key.\n    const signWithKeypair = createSignWithKeypair({\n      publicKey: senderPublicKey,\n      secretKey: senderPrivateKey,\n    });\n\n    const signedTx = await signWithKeypair(transaction);\n    if (isSignedTransaction(signedTx)) {\n      console.log(`Creating account: ${account}`);\n      const transactionDescriptor = await client.submit(signedTx);\n      const response = await client.listen(transactionDescriptor);\n      if (response.result.status === 'failure') {\n        throw response.result.error;\n      } else {\n        console.log('Account created successfully:', response.result);\n      }\n    }\n  } catch (error) {\n    console.error('Error creating account:', error);\n    process.exit(1);\n  }\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell and enter a command similar to folowing to execute the program:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tsx create-kadena-account.ts 5e46e1b7d048e0f3f4766e292cd41daca2073e240f13b069b6fc10f9bde9a0b4\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you've modified the network, chain, and entered a valid public key, you should see output similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Creating account: k:5e46e1b7d048e0f3f4766e292cd41daca2073e240f13b069b6fc10f9bde9a0b4\nAccount created successfully: { status: 'success', data: 'Write succeeded' }\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-transfer-between-accounts",children:"Example: Transfer between accounts"}),"\n",(0,i.jsx)(n.p,{children:"The previous example demonstrated how to use the @kadena/client library to create a new account without transferring any funds to the account.\nHowever, for the new account to be used, it must have a balance that's greater than 0.0 on at least one chain in a network.\nIn this example, you'll create a transaction that transfers KDA coins from one account to another."}),"\n",(0,i.jsx)(n.p,{children:"Note that sending the transaction to the blockchain requires a public and private keypair, wallet, or another method signing the transaction.\nHowever, you can build the transfer transaction using on-chain account information, then use the kadena tx sign and kadena tx send commands to send the transaction to the blockchain."}),"\n",(0,i.jsx)(n.p,{children:"To create a program that transfers assets between accounts:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new file called ",(0,i.jsx)(n.code,{children:"build-transfer-tx.ts"})," in your code editor."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add the following code to the file and modify the network and chain, if necessary:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Import basic functions to interact with the blockchain from the Kadena client library.\nimport { Pact, createClient, createSignWithKeypair, isSignedTransaction } from '@kadena/client';\n\n// This function shows how to build a transfer transaction\nfunction buildTransferTransaction() {\n  console.log('Building a KDA transfer transaction...');\n  \n  // Account details (these are examples - use real accounts in practice)\n  const senderAccount = 'k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c';\n  const receiverAccount = 'k:2084ce886c203b38944ebc16c4ac3714f379f81bcacae6e41be2dd4edc91971b';\n  const transferAmount = { decimal: '10.5' }; // Amount to transfer\n  const senderPublicKey = 'y58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c'; // The sender's public key\n\n  // Build the transaction\n  const unsignedTransaction = Pact.builder\n    .execution(\n      // Call the transfer function from the coin contract\n      Pact.modules.coin.transfer(\n        senderAccount,    // From this account\n        receiverAccount,  // To this account  \n        transferAmount    // This amount of KDA\n      )\n    )\n    .addSigner(senderPublicKey, (withCapability) => [\n      // Grant permission to pay for gas (transaction fees)\n      withCapability('coin.GAS'),\n      // Grant permission to transfer the specified amount\n      withCapability('coin.TRANSFER', senderAccount, receiverAccount, transferAmount),\n    ])\n    .setMeta({ \n      chainId: '3',                    // Chain to use for the transfer\n      senderAccount: senderAccount     // Who pays the transaction fee\n    })\n    .setNetworkId('development')       // Use the development Kadena network\n    .createTransaction();              // Build the final transaction\n\n  console.log('Transaction built successfully!');\n  console.log('Transaction details:', JSON.stringify(unsignedTransaction, null, 2));\n  \n  return unsignedTransaction;\n}\n\n// Run the function\nbuildTransferTransaction();\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Open a terminal shell and enter a command similar to folowing to execute the program:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"tsx build-transfer-tx.ts\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you've provided valid accounts, network, and chain information, you should see an unsigned transaction with output similar to the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'Building a KDA transfer transaction...\nTransaction built successfully!\nTransaction details: {\n  "cmd": "{\\"payload\\":{\\"exec\\":{\\"code\\":\\"(coin.transfer \\\\\\"k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\\\\\\" \\\\\\"k:2084ce886c203b38944ebc16c4ac3714f379f81bcacae6e41be2dd4edc91971b\\\\\\" 10.5)\\",\\"data\\":{}}},\\"nonce\\":\\"kjs:nonce:1756323794526\\",\\"signers\\":[{\\"pubKey\\":\\"58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\\",\\"scheme\\":\\"ED25519\\",\\"clist\\":[{\\"name\\":\\"coin.GAS\\",\\"args\\":[]},{\\"name\\":\\"coin.TRANSFER\\",\\"args\\":[\\"k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\\",\\"k:2084ce886c203b38944ebc16c4ac3714f379f81bcacae6e41be2dd4edc91971b\\",{\\"decimal\\":\\"10.5\\"}]}]}],\\"meta\\":{\\"gasLimit\\":2500,\\"gasPrice\\":1e-8,\\"sender\\":\\"k:58705e8699678bd15bbda2cf40fa236694895db614aafc82cf1c06c014ca963c\\",\\"ttl\\":900,\\"creationTime\\":1756323794,\\"chainId\\":\\"3\\"},\\"networkId\\":\\"development\\"}",\n  "hash": "49TpjRoElzfX1xxHWF6wbqOot0x0jBlE1NJJUJtiv_E",\n  "sigs": [\n    null\n  ]\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy and paste the unsigned transaction JSON object into a new unsignedTx.json file."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Sign the transaction by running the ",(0,i.jsx)(n.code,{children:"kadena tx sign"})," command and following the prompts displayed."]}),"\n",(0,i.jsx)(n.p,{children:"For example, if you are signing the transaction with a Chainweaver wallet, you can use the legacy command-line option, select your Chainweaver wallet, and provide the password for the Chainweaver wallet to sign the transaction."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kadena tx sign --tx-unsigned-transaction-files=unsignedTx.json --legacy\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Send the signed transaction to the blockchain by running the ",(0,i.jsx)(n.code,{children:"kadena tx send"})," command and following the prompts displayed."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kadena tx send \n? Select a transaction file: Transaction: transaction-49TpjRoElz-signed.json\n\u280b Sending transactions...\n\nTransaction detail for command with hash: 49TpjRoElzfX1xxHWF6wbqOot0x0jBlE1NJJUJtiv_E\nNetwork ID  Chain ID\ndevelopment 3       \n\n\n\u2714 Completed\nTransaction: 49TpjRoElzfX1xxHWF6wbqOot0x0jBlE1NJJUJtiv_E submitted with request key: 49TpjRoElzfX1xxHWF6wbqOot0x0jBlE1NJJUJtiv_E\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Review the results in the block explorer by using the request key."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Successful transfer between accounts",src:t(91895).A+"",width:"1484",height:"278"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"signatures-and-capabilities",children:"Signatures and capabilities"}),"\n",(0,i.jsxs)(n.p,{children:["In the previous example, you learned that crafting a transaction is only part of the story when you want to interact with the blockchain, and this is especially true if you want to change the blockchain state, as you do when you transfer value between any two accounts.\nTo execute transactions that change the blockchain state, you need to ",(0,i.jsx)(n.strong,{children:"sign"})," the transaction with cryptographic keys."]}),"\n",(0,i.jsx)(n.p,{children:"By signing a transaction, you authorize the operation to be executed.\nYour signature is ony valid if you are an owner of the account initiating the transaction and your keys ensure that no one can impersonate you or intercept and tamper with the transactions you authorize."}),"\n",(0,i.jsx)(n.h3,{id:"capabilities",children:"Capabilities"}),"\n",(0,i.jsx)(n.p,{children:"Pact smart contracts provide an additional layer of access control\u2014called capabilities\u2014that enable you to authorize specific and concrete actions, like paying the transaction fee, or limiting a transfer to a specific amount."}),"\n",(0,i.jsxs)(n.p,{children:["You authorize these specific actions by adding the capabilities that you approve of to the signature used to sign the transaction where the capabilities are called.\nYou saw an example of this in the ",(0,i.jsx)(n.code,{children:"build-transfer-tx"})," program where you added the ",(0,i.jsx)(n.code,{children:"coin.GAS"})," and ",(0,i.jsx)(n.code,{children:"coin.TRANSFER"})," capabilities to the ",(0,i.jsx)(n.code,{children:"addSigners"})," property."]}),"\n",(0,i.jsx)(n.h3,{id:"transactions-and-gas",children:"Transactions and gas"}),"\n",(0,i.jsxs)(n.p,{children:["If you're exploring other contracts on the Kadena test or production network, you'll notice that most smart contracts include the ",(0,i.jsx)(n.code,{children:"coin.GAS"})," capability or a similar capability."]}),"\n",(0,i.jsx)(n.p,{children:"Every transaction that takes place on a blockchain consumes resources, including computer time, bandwidth, memory, and storage.\nTo compensate for the resources consumed and the services provided by network node operators, every transaction on the blockchain requires someone to pay the transaction fee, called gas.\nGas helps to prevent the misuse of network resources by making transactions that overburden the system more expensive to process."}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"coin.GAS"})," capability allows smart contract users to explicitly approve the payment of transaction fees.\nIt's possible to sign transactions with an unrestricted signature.\nHowever, if any capability is explicitly added to a signature, then all required capabilities must be included in the signature list.\nIf a capability is missing, the transaction fails."]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},91895:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/kadena-client-transfer-71b4b9e5f261f6836fcb876bf47cfc02.jpg"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(96540);const i={},c=a.createContext(i);function r(e){const n=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(c.Provider,{value:n},e.children)}}}]);